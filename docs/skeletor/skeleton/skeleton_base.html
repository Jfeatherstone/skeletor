<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 15.0.0"/>
    <title>skeletor.skeleton.skeleton_base API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:.75rem center;margin-bottom:1rem;}.pdoc .alert > em{display:none;}.pdoc .alert > *:last-child{margin-bottom:0;}.pdoc .alert.note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .alert.warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .alert.danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .decorator-deprecated{color:#842029;}.pdoc .decorator-deprecated ~ span{filter:grayscale(1) opacity(0.8);}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../skeleton.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;skeletor.skeleton</a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="class" href="#SkeletonBase">SkeletonBase</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#SkeletonBase.__init__">SkeletonBase</a>
                        </li>
                        <li>
                                <a class="variable" href="#SkeletonBase.points">points</a>
                        </li>
                        <li>
                                <a class="variable" href="#SkeletonBase.skeletonPoints">skeletonPoints</a>
                        </li>
                        <li>
                                <a class="variable" href="#SkeletonBase.skeletonAdjMat">skeletonAdjMat</a>
                        </li>
                        <li>
                                <a class="variable" href="#SkeletonBase.skeletonGraph">skeletonGraph</a>
                        </li>
                        <li>
                                <a class="variable" href="#SkeletonBase.topologyPoints">topologyPoints</a>
                        </li>
                        <li>
                                <a class="variable" href="#SkeletonBase.topologyAdjMat">topologyAdjMat</a>
                        </li>
                        <li>
                                <a class="variable" href="#SkeletonBase.topologyGraph">topologyGraph</a>
                        </li>
                        <li>
                                <a class="variable" href="#SkeletonBase.verbose">verbose</a>
                        </li>
                        <li>
                                <a class="variable" href="#SkeletonBase.debug">debug</a>
                        </li>
                        <li>
                                <a class="function" href="#SkeletonBase.generateTopology">generateTopology</a>
                        </li>
                        <li>
                                <a class="function" href="#SkeletonBase.save">save</a>
                        </li>
                        <li>
                                <a class="function" href="#SkeletonBase.plot">plot</a>
                        </li>
                        <li>
                                <a class="function" href="#SkeletonBase.animate">animate</a>
                        </li>
                </ul>

            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../../skeletor.html">skeletor</a><wbr>.<a href="./../skeleton.html">skeleton</a><wbr>.skeleton_base    </h1>

                        <div class="docstring"><p>Base class for skeletonization methods.</p>

<p>Based on Lukas Meyer's implementation here, under the MIT License:
<a href="https://github.com/meyerls/pc-skeletor">https://github.com/meyerls/pc-skeletor</a></p>

<p>MIT License</p>

<p>Copyright (c) 2022 Lukas Meyer</p>

<p>Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:</p>

<p>The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.</p>

<p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.</p>
</div>

                        <input id="mod-skeleton_base-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-skeleton_base-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">  1</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">  2</span></a><span class="sd">Base class for skeletonization methods.</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">  3</span></a>
</span><span id="L-4"><a href="#L-4"><span class="linenos">  4</span></a><span class="sd">Based on Lukas Meyer&#39;s implementation here, under the MIT License:</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos">  5</span></a><span class="sd">https://github.com/meyerls/pc-skeletor</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">  6</span></a>
</span><span id="L-7"><a href="#L-7"><span class="linenos">  7</span></a><span class="sd">MIT License</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos">  8</span></a>
</span><span id="L-9"><a href="#L-9"><span class="linenos">  9</span></a><span class="sd">Copyright (c) 2022 Lukas Meyer</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos"> 10</span></a>
</span><span id="L-11"><a href="#L-11"><span class="linenos"> 11</span></a><span class="sd">Permission is hereby granted, free of charge, to any person obtaining a copy</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos"> 12</span></a><span class="sd">of this software and associated documentation files (the &quot;Software&quot;), to deal</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos"> 13</span></a><span class="sd">in the Software without restriction, including without limitation the rights</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos"> 14</span></a><span class="sd">to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos"> 15</span></a><span class="sd">copies of the Software, and to permit persons to whom the Software is</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos"> 16</span></a><span class="sd">furnished to do so, subject to the following conditions:</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos"> 17</span></a>
</span><span id="L-18"><a href="#L-18"><span class="linenos"> 18</span></a><span class="sd">The above copyright notice and this permission notice shall be included in all</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos"> 19</span></a><span class="sd">copies or substantial portions of the Software.</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos"> 20</span></a>
</span><span id="L-21"><a href="#L-21"><span class="linenos"> 21</span></a><span class="sd">THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos"> 22</span></a><span class="sd">IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos"> 23</span></a><span class="sd">FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos"> 24</span></a><span class="sd">AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos"> 25</span></a><span class="sd">LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos"> 26</span></a><span class="sd">OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE</span>
</span><span id="L-27"><a href="#L-27"><span class="linenos"> 27</span></a><span class="sd">SOFTWARE.</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos"> 28</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos"> 29</span></a>
</span><span id="L-30"><a href="#L-30"><span class="linenos"> 30</span></a><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos"> 31</span></a><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos"> 32</span></a>
</span><span id="L-33"><a href="#L-33"><span class="linenos"> 33</span></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Union</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos"> 34</span></a><span class="kn">import</span> <span class="nn">logging</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos"> 35</span></a><span class="kn">import</span> <span class="nn">os</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos"> 36</span></a>
</span><span id="L-37"><a href="#L-37"><span class="linenos"> 37</span></a><span class="kn">import</span> <span class="nn">open3d</span> <span class="k">as</span> <span class="nn">o3d</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos"> 38</span></a><span class="kn">import</span> <span class="nn">networkx</span> <span class="k">as</span> <span class="nn">nx</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos"> 39</span></a>
</span><span id="L-40"><a href="#L-40"><span class="linenos"> 40</span></a><span class="kn">from</span> <span class="nn">skeletor.utils</span> <span class="kn">import</span> <span class="n">plotSpatialGraph</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos"> 41</span></a>
</span><span id="L-42"><a href="#L-42"><span class="linenos"> 42</span></a><span class="kn">import</span> <span class="nn">sparse</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos"> 43</span></a>
</span><span id="L-44"><a href="#L-44"><span class="linenos"> 44</span></a><span class="k">class</span> <span class="nc">SkeletonBase</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos"> 45</span></a>
</span><span id="L-46"><a href="#L-46"><span class="linenos"> 46</span></a>    <span class="c1">#############################</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos"> 47</span></a>    <span class="c1">## Variables to be defined</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos"> 48</span></a>    <span class="c1">#############################</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos"> 49</span></a>    <span class="c1"># The following variables should be defined by the inheriting</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos"> 50</span></a>    <span class="c1"># class for this base class to function properly.</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos"> 51</span></a>
</span><span id="L-52"><a href="#L-52"><span class="linenos"> 52</span></a>    <span class="n">points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos"> 53</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos"> 54</span></a><span class="sd">    numpy.ndarray[N,d]</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos"> 55</span></a>
</span><span id="L-56"><a href="#L-56"><span class="linenos"> 56</span></a><span class="sd">    Set of points comprising the point cloud.</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos"> 57</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos"> 58</span></a>    
</span><span id="L-59"><a href="#L-59"><span class="linenos"> 59</span></a>    <span class="n">skeletonPoints</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos"> 60</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos"> 61</span></a><span class="sd">    numpy.ndarray[M,d]</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos"> 62</span></a>
</span><span id="L-63"><a href="#L-63"><span class="linenos"> 63</span></a><span class="sd">    Set of points comprising the skeleton.</span>
</span><span id="L-64"><a href="#L-64"><span class="linenos"> 64</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos"> 65</span></a>    
</span><span id="L-66"><a href="#L-66"><span class="linenos"> 66</span></a>    <span class="c1"># Adjacency matrix noting which points of the</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos"> 67</span></a>    <span class="c1"># skeleton are connected to which others</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos"> 68</span></a>    <span class="c1"># sparse.COO[M,M]</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos"> 69</span></a>    <span class="n">skeletonAdjMat</span> <span class="o">=</span> <span class="n">sparse</span><span class="o">.</span><span class="n">COO</span><span class="p">([],</span> <span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos"> 70</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos"> 71</span></a><span class="sd">    sparse.COO[M,M]</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos"> 72</span></a>
</span><span id="L-73"><a href="#L-73"><span class="linenos"> 73</span></a><span class="sd">    Adjacency matrix for the skeleton. Stored as a sparse matrix</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos"> 74</span></a><span class="sd">    since there may be a potential very large amount of skeleton points.</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos"> 75</span></a><span class="sd">    Can always be converted to a dense matrix with:</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos"> 76</span></a>
</span><span id="L-77"><a href="#L-77"><span class="linenos"> 77</span></a><span class="sd">        skeletonAdjMat.todense()</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos"> 78</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-79"><a href="#L-79"><span class="linenos"> 79</span></a>
</span><span id="L-80"><a href="#L-80"><span class="linenos"> 80</span></a>    <span class="n">skeletonGraph</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos"> 81</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos"> 82</span></a><span class="sd">    networkx.Graph()</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos"> 83</span></a>
</span><span id="L-84"><a href="#L-84"><span class="linenos"> 84</span></a><span class="sd">    Graph representation of the skeleton.</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos"> 85</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos"> 86</span></a>
</span><span id="L-87"><a href="#L-87"><span class="linenos"> 87</span></a>    <span class="n">topologyPoints</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
</span><span id="L-88"><a href="#L-88"><span class="linenos"> 88</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-89"><a href="#L-89"><span class="linenos"> 89</span></a><span class="sd">    numpy.ndarray[L,d]</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos"> 90</span></a>
</span><span id="L-91"><a href="#L-91"><span class="linenos"> 91</span></a><span class="sd">    Points for the topological graph, ie. graph with all degree 2 vertices</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos"> 92</span></a><span class="sd">    removed and their neighbors joined.</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos"> 93</span></a>
</span><span id="L-94"><a href="#L-94"><span class="linenos"> 94</span></a><span class="sd">    Computed by this base class&#39;s function `generateTopology()`.</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos"> 95</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos"> 96</span></a>
</span><span id="L-97"><a href="#L-97"><span class="linenos"> 97</span></a>    <span class="n">topologyAdjMat</span> <span class="o">=</span> <span class="n">sparse</span><span class="o">.</span><span class="n">COO</span><span class="p">([],</span> <span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos"> 98</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos"> 99</span></a><span class="sd">    sparse.COO[M,M]</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos">100</span></a>
</span><span id="L-101"><a href="#L-101"><span class="linenos">101</span></a><span class="sd">    Adjacency matrix for the topological graph. Stored as a sparse matrix.</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos">102</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos">103</span></a>
</span><span id="L-104"><a href="#L-104"><span class="linenos">104</span></a>    <span class="n">topologyGraph</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos">105</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos">106</span></a><span class="sd">    networkx.Graph()</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos">107</span></a>
</span><span id="L-108"><a href="#L-108"><span class="linenos">108</span></a><span class="sd">    Graph representation of the topological graph.</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos">109</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-110"><a href="#L-110"><span class="linenos">110</span></a>
</span><span id="L-111"><a href="#L-111"><span class="linenos">111</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos">112</span></a>                 <span class="n">points</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="L-113"><a href="#L-113"><span class="linenos">113</span></a>                 <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos">114</span></a>                 <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="L-115"><a href="#L-115"><span class="linenos">115</span></a><span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos">116</span></a><span class="sd">        The base class for a skeletonization algorithm, which implements</span>
</span><span id="L-117"><a href="#L-117"><span class="linenos">117</span></a><span class="sd">        methods to plot the skeleton and generate images/movies.</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos">118</span></a>
</span><span id="L-119"><a href="#L-119"><span class="linenos">119</span></a><span class="sd">        Parameters</span>
</span><span id="L-120"><a href="#L-120"><span class="linenos">120</span></a><span class="sd">        ----------</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos">121</span></a><span class="sd">        points : numpy.ndarray[N,d]</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos">122</span></a><span class="sd">            Point cloud.</span>
</span><span id="L-123"><a href="#L-123"><span class="linenos">123</span></a>
</span><span id="L-124"><a href="#L-124"><span class="linenos">124</span></a><span class="sd">        verbose : bool</span>
</span><span id="L-125"><a href="#L-125"><span class="linenos">125</span></a><span class="sd">            Whether or not to print information during generation.</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos">126</span></a>
</span><span id="L-127"><a href="#L-127"><span class="linenos">127</span></a><span class="sd">        debug : bool</span>
</span><span id="L-128"><a href="#L-128"><span class="linenos">128</span></a><span class="sd">            Whether or not to plot debug figures during generation.</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos">129</span></a>
</span><span id="L-130"><a href="#L-130"><span class="linenos">130</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos">131</span></a>
</span><span id="L-132"><a href="#L-132"><span class="linenos">132</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">verbose</span>
</span><span id="L-133"><a href="#L-133"><span class="linenos">133</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">debug</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos">134</span></a>
</span><span id="L-135"><a href="#L-135"><span class="linenos">135</span></a>        <span class="c1"># The only real benefit of giving the points to this</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos">136</span></a>        <span class="c1"># template class is to note the dimension.</span>
</span><span id="L-137"><a href="#L-137"><span class="linenos">137</span></a>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="s1">&#39;__iter__&#39;</span><span class="p">):</span>
</span><span id="L-138"><a href="#L-138"><span class="linenos">138</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="n">points</span>
</span><span id="L-139"><a href="#L-139"><span class="linenos">139</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">dim</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="n">points</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos">140</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-141"><a href="#L-141"><span class="linenos">141</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-142"><a href="#L-142"><span class="linenos">142</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">dim</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos">143</span></a>
</span><span id="L-144"><a href="#L-144"><span class="linenos">144</span></a>        <span class="c1"># TODO: Update this</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos">145</span></a>        <span class="c1">#if self.verbose:</span>
</span><span id="L-146"><a href="#L-146"><span class="linenos">146</span></a>        <span class="c1">#    logging.basicConfig(format=&#39;%(asctime)s - %(message)s&#39;, level=logging.DEBUG)</span>
</span><span id="L-147"><a href="#L-147"><span class="linenos">147</span></a>        <span class="c1">#else:</span>
</span><span id="L-148"><a href="#L-148"><span class="linenos">148</span></a>        <span class="c1">#    logging.basicConfig(format=&#39;%(asctime)s - %(message)s&#39;, level=logging.INFO)</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos">149</span></a>
</span><span id="L-150"><a href="#L-150"><span class="linenos">150</span></a>
</span><span id="L-151"><a href="#L-151"><span class="linenos">151</span></a>
</span><span id="L-152"><a href="#L-152"><span class="linenos">152</span></a>    <span class="k">def</span> <span class="nf">generateTopology</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos">153</span></a>                         <span class="n">keepSpatialEmbedding</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos">154</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos">155</span></a><span class="sd">        Create a copy of the skeleton graph with all vertices of</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos">156</span></a><span class="sd">        degree 2 removed.</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos">157</span></a>
</span><span id="L-158"><a href="#L-158"><span class="linenos">158</span></a><span class="sd">        The spatial embedding can be carried over as well, but likely</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos">159</span></a><span class="sd">        doesn&#39;t mean very much anymore.</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos">160</span></a>
</span><span id="L-161"><a href="#L-161"><span class="linenos">161</span></a><span class="sd">        Parameters</span>
</span><span id="L-162"><a href="#L-162"><span class="linenos">162</span></a><span class="sd">        ----------</span>
</span><span id="L-163"><a href="#L-163"><span class="linenos">163</span></a><span class="sd">        keepSpatialEmbedding : bool</span>
</span><span id="L-164"><a href="#L-164"><span class="linenos">164</span></a><span class="sd">            Whether to carry the spatial embedding from the skeleton</span>
</span><span id="L-165"><a href="#L-165"><span class="linenos">165</span></a><span class="sd">            over to the topology graph (True) or to leave the</span>
</span><span id="L-166"><a href="#L-166"><span class="linenos">166</span></a><span class="sd">            topology graph unembedded (False).</span>
</span><span id="L-167"><a href="#L-167"><span class="linenos">167</span></a>
</span><span id="L-168"><a href="#L-168"><span class="linenos">168</span></a><span class="sd">        Returns</span>
</span><span id="L-169"><a href="#L-169"><span class="linenos">169</span></a><span class="sd">        -------</span>
</span><span id="L-170"><a href="#L-170"><span class="linenos">170</span></a><span class="sd">        topology : networkx.Graph</span>
</span><span id="L-171"><a href="#L-171"><span class="linenos">171</span></a><span class="sd">            Graph representing topology of the skeleton.</span>
</span><span id="L-172"><a href="#L-172"><span class="linenos">172</span></a>
</span><span id="L-173"><a href="#L-173"><span class="linenos">173</span></a><span class="sd">            Also saved as self.topologyGraph</span>
</span><span id="L-174"><a href="#L-174"><span class="linenos">174</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-175"><a href="#L-175"><span class="linenos">175</span></a>        <span class="c1"># TODO: Remove all degree 2 nodes and then make a networkx graph</span>
</span><span id="L-176"><a href="#L-176"><span class="linenos">176</span></a>        <span class="k">pass</span>
</span><span id="L-177"><a href="#L-177"><span class="linenos">177</span></a>
</span><span id="L-178"><a href="#L-178"><span class="linenos">178</span></a>
</span><span id="L-179"><a href="#L-179"><span class="linenos">179</span></a>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">output</span><span class="p">):</span>
</span><span id="L-180"><a href="#L-180"><span class="linenos">180</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-181"><a href="#L-181"><span class="linenos">181</span></a><span class="sd">        Not implemented! </span>
</span><span id="L-182"><a href="#L-182"><span class="linenos">182</span></a>
</span><span id="L-183"><a href="#L-183"><span class="linenos">183</span></a><span class="sd">        Save the resulting skeleton in to a file. Can be written</span>
</span><span id="L-184"><a href="#L-184"><span class="linenos">184</span></a>
</span><span id="L-185"><a href="#L-185"><span class="linenos">185</span></a><span class="sd">        Parameters</span>
</span><span id="L-186"><a href="#L-186"><span class="linenos">186</span></a><span class="sd">        ----------</span>
</span><span id="L-187"><a href="#L-187"><span class="linenos">187</span></a><span class="sd">        output : str</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos">188</span></a><span class="sd">            Output file path, including filename. If no</span>
</span><span id="L-189"><a href="#L-189"><span class="linenos">189</span></a><span class="sd">            extension is given, `.ply` will be used.</span>
</span><span id="L-190"><a href="#L-190"><span class="linenos">190</span></a>
</span><span id="L-191"><a href="#L-191"><span class="linenos">191</span></a><span class="sd">        Returns</span>
</span><span id="L-192"><a href="#L-192"><span class="linenos">192</span></a><span class="sd">        -------</span>
</span><span id="L-193"><a href="#L-193"><span class="linenos">193</span></a><span class="sd">        None</span>
</span><span id="L-194"><a href="#L-194"><span class="linenos">194</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos">195</span></a>        <span class="c1"># TODO</span>
</span><span id="L-196"><a href="#L-196"><span class="linenos">196</span></a>        <span class="k">pass</span>
</span><span id="L-197"><a href="#L-197"><span class="linenos">197</span></a>
</span><span id="L-198"><a href="#L-198"><span class="linenos">198</span></a>
</span><span id="L-199"><a href="#L-199"><span class="linenos">199</span></a>    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos">200</span></a>             <span class="n">plotPoints</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="L-201"><a href="#L-201"><span class="linenos">201</span></a>             <span class="n">plotSkeleton</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="L-202"><a href="#L-202"><span class="linenos">202</span></a>             <span class="n">backend</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;mpl&#39;</span><span class="p">,</span>
</span><span id="L-203"><a href="#L-203"><span class="linenos">203</span></a>             <span class="n">ax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-204"><a href="#L-204"><span class="linenos">204</span></a>             <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="L-205"><a href="#L-205"><span class="linenos">205</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos">206</span></a><span class="sd">        Plot the point cloud, skeleton, or other information.</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos">207</span></a>
</span><span id="L-208"><a href="#L-208"><span class="linenos">208</span></a><span class="sd">        Parameters</span>
</span><span id="L-209"><a href="#L-209"><span class="linenos">209</span></a><span class="sd">        ----------</span>
</span><span id="L-210"><a href="#L-210"><span class="linenos">210</span></a><span class="sd">        plotPoints : bool</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos">211</span></a><span class="sd">            Whether to plot the point cloud.</span>
</span><span id="L-212"><a href="#L-212"><span class="linenos">212</span></a>
</span><span id="L-213"><a href="#L-213"><span class="linenos">213</span></a><span class="sd">        plotSkeleton : bool</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos">214</span></a><span class="sd">            Whether to plot the derived skeleton nodes and edges.</span>
</span><span id="L-215"><a href="#L-215"><span class="linenos">215</span></a>
</span><span id="L-216"><a href="#L-216"><span class="linenos">216</span></a><span class="sd">        backend : {&#39;mpl&#39;, &#39;o3d&#39;}</span>
</span><span id="L-217"><a href="#L-217"><span class="linenos">217</span></a><span class="sd">            Which plotting library to use: matplotlib (`&#39;mpl&#39;`) or</span>
</span><span id="L-218"><a href="#L-218"><span class="linenos">218</span></a><span class="sd">            Open3D (`&#39;o3d&#39;`).</span>
</span><span id="L-219"><a href="#L-219"><span class="linenos">219</span></a>
</span><span id="L-220"><a href="#L-220"><span class="linenos">220</span></a><span class="sd">            Open3D is recommended for larger point clouds, as it renders</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos">221</span></a><span class="sd">            much faster than matplotlib.</span>
</span><span id="L-222"><a href="#L-222"><span class="linenos">222</span></a>
</span><span id="L-223"><a href="#L-223"><span class="linenos">223</span></a><span class="sd">        ax : matplotlib.pyplot.axis, optional</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos">224</span></a><span class="sd">            The axis on which to plot the requested information, if</span>
</span><span id="L-225"><a href="#L-225"><span class="linenos">225</span></a><span class="sd">            using the matplotlib backend. If not provided, a new axis</span>
</span><span id="L-226"><a href="#L-226"><span class="linenos">226</span></a><span class="sd">            will be created.</span>
</span><span id="L-227"><a href="#L-227"><span class="linenos">227</span></a>
</span><span id="L-228"><a href="#L-228"><span class="linenos">228</span></a><span class="sd">        kwargs : kwargs</span>
</span><span id="L-229"><a href="#L-229"><span class="linenos">229</span></a><span class="sd">            Other keyword arguments specific to a given skeletonization</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos">230</span></a><span class="sd">            subclass. See individual documentation on</span>
</span><span id="L-231"><a href="#L-231"><span class="linenos">231</span></a><span class="sd">            `_o3d_extra_plot_geometries()` or `_mpl_extra_plot_geometries()`</span>
</span><span id="L-232"><a href="#L-232"><span class="linenos">232</span></a><span class="sd">            for each subclass for more information.</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos">233</span></a>
</span><span id="L-234"><a href="#L-234"><span class="linenos">234</span></a><span class="sd">        Returns</span>
</span><span id="L-235"><a href="#L-235"><span class="linenos">235</span></a><span class="sd">        -------</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos">236</span></a><span class="sd">        fig : matplotlib.pyplot.figure</span>
</span><span id="L-237"><a href="#L-237"><span class="linenos">237</span></a><span class="sd">            Figure object, if using matplotlib backend.</span>
</span><span id="L-238"><a href="#L-238"><span class="linenos">238</span></a>
</span><span id="L-239"><a href="#L-239"><span class="linenos">239</span></a><span class="sd">        If using open3d, nothing will be returned.</span>
</span><span id="L-240"><a href="#L-240"><span class="linenos">240</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos">241</span></a>        <span class="c1"># 2D plotting always uses matplotlib</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos">242</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dim</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos">243</span></a>
</span><span id="L-244"><a href="#L-244"><span class="linenos">244</span></a>            <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-245"><a href="#L-245"><span class="linenos">245</span></a>                <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
</span><span id="L-246"><a href="#L-246"><span class="linenos">246</span></a>                <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">()</span>
</span><span id="L-247"><a href="#L-247"><span class="linenos">247</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos">248</span></a>                <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos">249</span></a>
</span><span id="L-250"><a href="#L-250"><span class="linenos">250</span></a>            <span class="k">if</span> <span class="n">plotSkeleton</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">skeletonPoints</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-251"><a href="#L-251"><span class="linenos">251</span></a>                <span class="n">plotSpatialGraph</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">skeletonPoints</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">skeletonAdjMat</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">scatterKwargs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="s1">&#39;tab:blue&#39;</span><span class="p">,</span> <span class="s2">&quot;alpha&quot;</span><span class="p">:</span> <span class="mf">0.6</span><span class="p">})</span>
</span><span id="L-252"><a href="#L-252"><span class="linenos">252</span></a>
</span><span id="L-253"><a href="#L-253"><span class="linenos">253</span></a>            <span class="k">if</span> <span class="n">plotPoints</span><span class="p">:</span>
</span><span id="L-254"><a href="#L-254"><span class="linenos">254</span></a>                <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;tab:purple&#39;</span><span class="p">)</span>
</span><span id="L-255"><a href="#L-255"><span class="linenos">255</span></a>
</span><span id="L-256"><a href="#L-256"><span class="linenos">256</span></a>            <span class="c1"># Plot extra stuff if necessary</span>
</span><span id="L-257"><a href="#L-257"><span class="linenos">257</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_mpl_extra_plot_geometries</span><span class="p">(</span><span class="n">plotPoints</span><span class="p">,</span> <span class="n">plotSkeleton</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="L-258"><a href="#L-258"><span class="linenos">258</span></a>
</span><span id="L-259"><a href="#L-259"><span class="linenos">259</span></a>            <span class="k">return</span> <span class="n">fig</span>
</span><span id="L-260"><a href="#L-260"><span class="linenos">260</span></a>
</span><span id="L-261"><a href="#L-261"><span class="linenos">261</span></a>        <span class="c1"># For 3D we can choose between mpl and o3d</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos">262</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">dim</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos">263</span></a>
</span><span id="L-264"><a href="#L-264"><span class="linenos">264</span></a>            <span class="k">if</span> <span class="n">backend</span> <span class="o">==</span> <span class="s1">&#39;mpl&#39;</span><span class="p">:</span>
</span><span id="L-265"><a href="#L-265"><span class="linenos">265</span></a>                <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos">266</span></a>                    <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
</span><span id="L-267"><a href="#L-267"><span class="linenos">267</span></a>                    <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="s1">&#39;3d&#39;</span><span class="p">)</span>
</span><span id="L-268"><a href="#L-268"><span class="linenos">268</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-269"><a href="#L-269"><span class="linenos">269</span></a>                    <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span>
</span><span id="L-270"><a href="#L-270"><span class="linenos">270</span></a>
</span><span id="L-271"><a href="#L-271"><span class="linenos">271</span></a>                <span class="k">if</span> <span class="n">plotSkeleton</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">skeletonPoints</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos">272</span></a>                    <span class="n">plotSpatialGraph</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">skeletonPoints</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">skeletonAdjMat</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">scatterKwargs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="s1">&#39;tab:blue&#39;</span><span class="p">,</span> <span class="s2">&quot;alpha&quot;</span><span class="p">:</span> <span class="mf">0.8</span><span class="p">})</span>
</span><span id="L-273"><a href="#L-273"><span class="linenos">273</span></a>
</span><span id="L-274"><a href="#L-274"><span class="linenos">274</span></a>                <span class="k">if</span> <span class="n">plotPoints</span><span class="p">:</span>
</span><span id="L-275"><a href="#L-275"><span class="linenos">275</span></a>                    <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;tab:purple&#39;</span><span class="p">)</span>
</span><span id="L-276"><a href="#L-276"><span class="linenos">276</span></a>
</span><span id="L-277"><a href="#L-277"><span class="linenos">277</span></a>                <span class="c1"># Plot extra stuff if necessary</span>
</span><span id="L-278"><a href="#L-278"><span class="linenos">278</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_mpl_extra_plot_geometries</span><span class="p">(</span><span class="n">plotPoints</span><span class="p">,</span> <span class="n">plotSkeleton</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="L-279"><a href="#L-279"><span class="linenos">279</span></a>
</span><span id="L-280"><a href="#L-280"><span class="linenos">280</span></a>                <span class="k">return</span> <span class="n">fig</span>
</span><span id="L-281"><a href="#L-281"><span class="linenos">281</span></a>
</span><span id="L-282"><a href="#L-282"><span class="linenos">282</span></a>            <span class="k">elif</span> <span class="n">backend</span> <span class="o">==</span> <span class="s1">&#39;o3d&#39;</span><span class="p">:</span>
</span><span id="L-283"><a href="#L-283"><span class="linenos">283</span></a>                <span class="n">geometry</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-284"><a href="#L-284"><span class="linenos">284</span></a>
</span><span id="L-285"><a href="#L-285"><span class="linenos">285</span></a>                <span class="k">if</span> <span class="n">plotSkeleton</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">skeletonPoints</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-286"><a href="#L-286"><span class="linenos">286</span></a>                    <span class="n">skelPointCloud</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">()</span>
</span><span id="L-287"><a href="#L-287"><span class="linenos">287</span></a>                    <span class="n">skelPointCloud</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">utility</span><span class="o">.</span><span class="n">Vector3dVector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">skeletonPoints</span><span class="p">)</span>
</span><span id="L-288"><a href="#L-288"><span class="linenos">288</span></a>                    <span class="n">skelPointCloud</span><span class="o">.</span><span class="n">paint_uniform_color</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">31</span><span class="p">,</span> <span class="mi">119</span><span class="p">,</span> <span class="mi">180</span><span class="p">])</span><span class="o">/</span><span class="mf">255.</span><span class="p">)</span> <span class="c1"># Tab:blue color</span>
</span><span id="L-289"><a href="#L-289"><span class="linenos">289</span></a>                    <span class="n">geometry</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">skelPointCloud</span><span class="p">)</span>
</span><span id="L-290"><a href="#L-290"><span class="linenos">290</span></a>
</span><span id="L-291"><a href="#L-291"><span class="linenos">291</span></a>                    <span class="c1"># TODO: Allow support for weighted edges (maybe use color?)</span>
</span><span id="L-292"><a href="#L-292"><span class="linenos">292</span></a>                    <span class="n">skelEdges</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">LineSet</span><span class="p">()</span>
</span><span id="L-293"><a href="#L-293"><span class="linenos">293</span></a>                    <span class="n">skelEdges</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">utility</span><span class="o">.</span><span class="n">Vector3dVector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">skeletonPoints</span><span class="p">)</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos">294</span></a>
</span><span id="L-295"><a href="#L-295"><span class="linenos">295</span></a>                    <span class="c1"># Find all indices in the adjacency matrix that are greater than 0</span>
</span><span id="L-296"><a href="#L-296"><span class="linenos">296</span></a>                    <span class="c1"># Code for numpy</span>
</span><span id="L-297"><a href="#L-297"><span class="linenos">297</span></a>                    <span class="n">pairConnections</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">skeletonAdjMat</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
</span><span id="L-298"><a href="#L-298"><span class="linenos">298</span></a>                    <span class="c1"># Code for sparse</span>
</span><span id="L-299"><a href="#L-299"><span class="linenos">299</span></a>                    <span class="c1">#pairConnections = self.skeletonAdjMat.coords.T</span>
</span><span id="L-300"><a href="#L-300"><span class="linenos">300</span></a>                    <span class="c1"># Sort them, so that we can remove duplicates</span>
</span><span id="L-301"><a href="#L-301"><span class="linenos">301</span></a>                    <span class="n">pairConnections</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">pairConnections</span><span class="p">]</span>
</span><span id="L-302"><a href="#L-302"><span class="linenos">302</span></a>                    <span class="c1"># And remove duplicates</span>
</span><span id="L-303"><a href="#L-303"><span class="linenos">303</span></a>                    <span class="n">pairConnections</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">pairConnections</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span><span id="L-304"><a href="#L-304"><span class="linenos">304</span></a>
</span><span id="L-305"><a href="#L-305"><span class="linenos">305</span></a>                    <span class="n">skelEdges</span><span class="o">.</span><span class="n">lines</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">utility</span><span class="o">.</span><span class="n">Vector2iVector</span><span class="p">(</span><span class="n">pairConnections</span><span class="p">)</span>
</span><span id="L-306"><a href="#L-306"><span class="linenos">306</span></a>
</span><span id="L-307"><a href="#L-307"><span class="linenos">307</span></a>                    <span class="n">geometry</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">skelEdges</span><span class="p">)</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos">308</span></a>
</span><span id="L-309"><a href="#L-309"><span class="linenos">309</span></a>                <span class="k">if</span> <span class="n">plotPoints</span><span class="p">:</span>
</span><span id="L-310"><a href="#L-310"><span class="linenos">310</span></a>                    <span class="n">pointCloud</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">()</span>
</span><span id="L-311"><a href="#L-311"><span class="linenos">311</span></a>                    <span class="n">pointCloud</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">utility</span><span class="o">.</span><span class="n">Vector3dVector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="p">)</span>
</span><span id="L-312"><a href="#L-312"><span class="linenos">312</span></a>                    <span class="n">pointCloud</span><span class="o">.</span><span class="n">paint_uniform_color</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">148</span><span class="p">,</span> <span class="mi">103</span><span class="p">,</span> <span class="mi">189</span><span class="p">])</span><span class="o">/</span><span class="mf">255.</span><span class="p">)</span> <span class="c1"># Tab:purple color</span>
</span><span id="L-313"><a href="#L-313"><span class="linenos">313</span></a>                    <span class="n">geometry</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pointCloud</span><span class="p">)</span>
</span><span id="L-314"><a href="#L-314"><span class="linenos">314</span></a>
</span><span id="L-315"><a href="#L-315"><span class="linenos">315</span></a>                <span class="c1"># If any of the implementations of this base class want to</span>
</span><span id="L-316"><a href="#L-316"><span class="linenos">316</span></a>                <span class="c1"># add extra elements to plot, we have support for that.</span>
</span><span id="L-317"><a href="#L-317"><span class="linenos">317</span></a>                <span class="c1"># For example, if an octree algorithm wants to plot the</span>
</span><span id="L-318"><a href="#L-318"><span class="linenos">318</span></a>                <span class="c1"># boxes into which points are divided</span>
</span><span id="L-319"><a href="#L-319"><span class="linenos">319</span></a>                <span class="n">geometry</span> <span class="o">=</span> <span class="n">geometry</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_o3d_extra_plot_geometries</span><span class="p">(</span><span class="n">plotPoints</span><span class="p">,</span> <span class="n">plotSkeleton</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="L-320"><a href="#L-320"><span class="linenos">320</span></a>
</span><span id="L-321"><a href="#L-321"><span class="linenos">321</span></a>                <span class="n">o3d</span><span class="o">.</span><span class="n">visualization</span><span class="o">.</span><span class="n">draw_geometries</span><span class="p">(</span><span class="n">geometry</span><span class="p">)</span>
</span><span id="L-322"><a href="#L-322"><span class="linenos">322</span></a>
</span><span id="L-323"><a href="#L-323"><span class="linenos">323</span></a>
</span><span id="L-324"><a href="#L-324"><span class="linenos">324</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-325"><a href="#L-325"><span class="linenos">325</span></a>                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Unrecognized backend (</span><span class="si">{</span><span class="n">backend</span><span class="si">}</span><span class="s1">), please use either </span><span class="se">\&#39;</span><span class="s1">mpl</span><span class="se">\&#39;</span><span class="s1"> or </span><span class="se">\&#39;</span><span class="s1">o3d</span><span class="se">\&#39;</span><span class="s1">.&#39;</span><span class="p">)</span>
</span><span id="L-326"><a href="#L-326"><span class="linenos">326</span></a>
</span><span id="L-327"><a href="#L-327"><span class="linenos">327</span></a>
</span><span id="L-328"><a href="#L-328"><span class="linenos">328</span></a>    <span class="k">def</span> <span class="nf">_o3d_extra_plot_geometries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plotPoints</span><span class="p">,</span> <span class="n">plotSkeleton</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="L-329"><a href="#L-329"><span class="linenos">329</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-330"><a href="#L-330"><span class="linenos">330</span></a><span class="sd">        Extra geometries to be plotted by the plot() function.</span>
</span><span id="L-331"><a href="#L-331"><span class="linenos">331</span></a>
</span><span id="L-332"><a href="#L-332"><span class="linenos">332</span></a><span class="sd">        To be implemented in the inheriting class if desired.</span>
</span><span id="L-333"><a href="#L-333"><span class="linenos">333</span></a><span class="sd">        In this case, should return a list of Open3D geometries.</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos">334</span></a>
</span><span id="L-335"><a href="#L-335"><span class="linenos">335</span></a><span class="sd">        Returns</span>
</span><span id="L-336"><a href="#L-336"><span class="linenos">336</span></a><span class="sd">        -------</span>
</span><span id="L-337"><a href="#L-337"><span class="linenos">337</span></a><span class="sd">        list(open3d.geometry)</span>
</span><span id="L-338"><a href="#L-338"><span class="linenos">338</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-339"><a href="#L-339"><span class="linenos">339</span></a>
</span><span id="L-340"><a href="#L-340"><span class="linenos">340</span></a>        <span class="k">return</span> <span class="p">[]</span>
</span><span id="L-341"><a href="#L-341"><span class="linenos">341</span></a>
</span><span id="L-342"><a href="#L-342"><span class="linenos">342</span></a>
</span><span id="L-343"><a href="#L-343"><span class="linenos">343</span></a>    <span class="k">def</span> <span class="nf">_mpl_extra_plot_geometries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plotPoints</span><span class="p">,</span> <span class="n">plotSkeleton</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="L-344"><a href="#L-344"><span class="linenos">344</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-345"><a href="#L-345"><span class="linenos">345</span></a><span class="sd">        Extra geometries to be plotted by the plot() function.</span>
</span><span id="L-346"><a href="#L-346"><span class="linenos">346</span></a>
</span><span id="L-347"><a href="#L-347"><span class="linenos">347</span></a><span class="sd">        To be implemented in the inheriting class if desired.</span>
</span><span id="L-348"><a href="#L-348"><span class="linenos">348</span></a><span class="sd">        In this case, use the given axis `ax` to plot desired quantities.</span>
</span><span id="L-349"><a href="#L-349"><span class="linenos">349</span></a>
</span><span id="L-350"><a href="#L-350"><span class="linenos">350</span></a><span class="sd">        Returns</span>
</span><span id="L-351"><a href="#L-351"><span class="linenos">351</span></a><span class="sd">        -------</span>
</span><span id="L-352"><a href="#L-352"><span class="linenos">352</span></a><span class="sd">        None</span>
</span><span id="L-353"><a href="#L-353"><span class="linenos">353</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-354"><a href="#L-354"><span class="linenos">354</span></a>
</span><span id="L-355"><a href="#L-355"><span class="linenos">355</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-356"><a href="#L-356"><span class="linenos">356</span></a>
</span><span id="L-357"><a href="#L-357"><span class="linenos">357</span></a>
</span><span id="L-358"><a href="#L-358"><span class="linenos">358</span></a>    <span class="k">def</span> <span class="nf">animate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="L-359"><a href="#L-359"><span class="linenos">359</span></a>                <span class="n">outputFile</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-360"><a href="#L-360"><span class="linenos">360</span></a>                <span class="n">plotPoints</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="L-361"><a href="#L-361"><span class="linenos">361</span></a>                <span class="n">plotSkeleton</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="L-362"><a href="#L-362"><span class="linenos">362</span></a>                <span class="n">rotationSpeed</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
</span><span id="L-363"><a href="#L-363"><span class="linenos">363</span></a>                <span class="n">maxFrames</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-364"><a href="#L-364"><span class="linenos">364</span></a>                <span class="n">fps</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">pointSize</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span>
</span><span id="L-365"><a href="#L-365"><span class="linenos">365</span></a>                <span class="n">lineWidth</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
</span><span id="L-366"><a href="#L-366"><span class="linenos">366</span></a>                <span class="n">zoom</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>
</span><span id="L-367"><a href="#L-367"><span class="linenos">367</span></a>                <span class="n">initialRotation</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">520</span><span class="p">),</span>
</span><span id="L-368"><a href="#L-368"><span class="linenos">368</span></a>                <span class="n">backgroundColor</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
</span><span id="L-369"><a href="#L-369"><span class="linenos">369</span></a>                <span class="n">crop</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="L-370"><a href="#L-370"><span class="linenos">370</span></a>                <span class="n">cropPadding</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
</span><span id="L-371"><a href="#L-371"><span class="linenos">371</span></a>                <span class="n">outputFormat</span><span class="o">=</span><span class="s1">&#39;gif&#39;</span><span class="p">,</span>
</span><span id="L-372"><a href="#L-372"><span class="linenos">372</span></a>                <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="L-373"><a href="#L-373"><span class="linenos">373</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-374"><a href="#L-374"><span class="linenos">374</span></a><span class="sd">        Create an animation of the point cloud and/or skeleton rotating.</span>
</span><span id="L-375"><a href="#L-375"><span class="linenos">375</span></a>
</span><span id="L-376"><a href="#L-376"><span class="linenos">376</span></a><span class="sd">        Uses Open3D as the graphical framework.</span>
</span><span id="L-377"><a href="#L-377"><span class="linenos">377</span></a>
</span><span id="L-378"><a href="#L-378"><span class="linenos">378</span></a><span class="sd">        Parameters</span>
</span><span id="L-379"><a href="#L-379"><span class="linenos">379</span></a><span class="sd">        ----------</span>
</span><span id="L-380"><a href="#L-380"><span class="linenos">380</span></a><span class="sd">        outputFile : str, optional</span>
</span><span id="L-381"><a href="#L-381"><span class="linenos">381</span></a><span class="sd">            The name of the animation file that will be saved. If it includes</span>
</span><span id="L-382"><a href="#L-382"><span class="linenos">382</span></a><span class="sd">            an (acceptable) extension, the output type will be automatically</span>
</span><span id="L-383"><a href="#L-383"><span class="linenos">383</span></a><span class="sd">            chosen; otherwise, the output format will be set by the</span>
</span><span id="L-384"><a href="#L-384"><span class="linenos">384</span></a><span class="sd">            kwarg `outputFormat`.</span>
</span><span id="L-385"><a href="#L-385"><span class="linenos">385</span></a>
</span><span id="L-386"><a href="#L-386"><span class="linenos">386</span></a><span class="sd">            If `None`, no file will be saved, the animation will just be</span>
</span><span id="L-387"><a href="#L-387"><span class="linenos">387</span></a><span class="sd">            played.</span>
</span><span id="L-388"><a href="#L-388"><span class="linenos">388</span></a>
</span><span id="L-389"><a href="#L-389"><span class="linenos">389</span></a><span class="sd">        plotPoints : bool</span>
</span><span id="L-390"><a href="#L-390"><span class="linenos">390</span></a><span class="sd">            Whether to plot the point cloud.</span>
</span><span id="L-391"><a href="#L-391"><span class="linenos">391</span></a>
</span><span id="L-392"><a href="#L-392"><span class="linenos">392</span></a><span class="sd">        plotSkeleton : bool</span>
</span><span id="L-393"><a href="#L-393"><span class="linenos">393</span></a><span class="sd">            Whether to plot the derived skeleton nodes and edges.</span>
</span><span id="L-394"><a href="#L-394"><span class="linenos">394</span></a>
</span><span id="L-395"><a href="#L-395"><span class="linenos">395</span></a><span class="sd">        rotationSpeed : int</span>
</span><span id="L-396"><a href="#L-396"><span class="linenos">396</span></a><span class="sd">            The speed of the rotation during the animation.</span>
</span><span id="L-397"><a href="#L-397"><span class="linenos">397</span></a>
</span><span id="L-398"><a href="#L-398"><span class="linenos">398</span></a><span class="sd">        maxFrames : int, optional</span>
</span><span id="L-399"><a href="#L-399"><span class="linenos">399</span></a><span class="sd">            The total number of frames to save; if `None`, no limit will</span>
</span><span id="L-400"><a href="#L-400"><span class="linenos">400</span></a><span class="sd">            be applied.</span>
</span><span id="L-401"><a href="#L-401"><span class="linenos">401</span></a>
</span><span id="L-402"><a href="#L-402"><span class="linenos">402</span></a><span class="sd">            Note that I can&#39;t figure out how to exit a window automatically,</span>
</span><span id="L-403"><a href="#L-403"><span class="linenos">403</span></a><span class="sd">            so the window itself will continue existing until the user manually</span>
</span><span id="L-404"><a href="#L-404"><span class="linenos">404</span></a><span class="sd">            presses &#39;q&#39;, but no more than `maxFrames` will actually be saved.</span>
</span><span id="L-405"><a href="#L-405"><span class="linenos">405</span></a>
</span><span id="L-406"><a href="#L-406"><span class="linenos">406</span></a><span class="sd">        fps : int</span>
</span><span id="L-407"><a href="#L-407"><span class="linenos">407</span></a><span class="sd">            The frames per second of the output animation.</span>
</span><span id="L-408"><a href="#L-408"><span class="linenos">408</span></a>
</span><span id="L-409"><a href="#L-409"><span class="linenos">409</span></a><span class="sd">        pointSize : float</span>
</span><span id="L-410"><a href="#L-410"><span class="linenos">410</span></a><span class="sd">            The size of points for point clouds.</span>
</span><span id="L-411"><a href="#L-411"><span class="linenos">411</span></a>
</span><span id="L-412"><a href="#L-412"><span class="linenos">412</span></a><span class="sd">        lineWidth : float</span>
</span><span id="L-413"><a href="#L-413"><span class="linenos">413</span></a><span class="sd">            The width of lines for line sets (WIP).</span>
</span><span id="L-414"><a href="#L-414"><span class="linenos">414</span></a>
</span><span id="L-415"><a href="#L-415"><span class="linenos">415</span></a><span class="sd">        zoom : float</span>
</span><span id="L-416"><a href="#L-416"><span class="linenos">416</span></a><span class="sd">            The zoom setting for the view.</span>
</span><span id="L-417"><a href="#L-417"><span class="linenos">417</span></a>
</span><span id="L-418"><a href="#L-418"><span class="linenos">418</span></a><span class="sd">        initialRotation : (theta, phi)</span>
</span><span id="L-419"><a href="#L-419"><span class="linenos">419</span></a><span class="sd">            Initial rotation angles. This is based off of</span>
</span><span id="L-420"><a href="#L-420"><span class="linenos">420</span></a><span class="sd">            `open3d.visualization.ViewControl.rotate` method, which</span>
</span><span id="L-421"><a href="#L-421"><span class="linenos">421</span></a><span class="sd">            takes the rotation values in pixels your cursor has</span>
</span><span id="L-422"><a href="#L-422"><span class="linenos">422</span></a><span class="sd">            moved across the screen... not ideal.</span>
</span><span id="L-423"><a href="#L-423"><span class="linenos">423</span></a>
</span><span id="L-424"><a href="#L-424"><span class="linenos">424</span></a><span class="sd">            Roughly 520 pixels gives you a 90 degree rotation.</span>
</span><span id="L-425"><a href="#L-425"><span class="linenos">425</span></a>
</span><span id="L-426"><a href="#L-426"><span class="linenos">426</span></a><span class="sd">        backgroundColor : [float, float, float]</span>
</span><span id="L-427"><a href="#L-427"><span class="linenos">427</span></a><span class="sd">            The background color for the animation.</span>
</span><span id="L-428"><a href="#L-428"><span class="linenos">428</span></a>
</span><span id="L-429"><a href="#L-429"><span class="linenos">429</span></a><span class="sd">        crop : bool, optional</span>
</span><span id="L-430"><a href="#L-430"><span class="linenos">430</span></a><span class="sd">            Whether to crop the animation to a minimal window size (plus</span>
</span><span id="L-431"><a href="#L-431"><span class="linenos">431</span></a><span class="sd">            padding) that only includes pixels that actually change</span>
</span><span id="L-432"><a href="#L-432"><span class="linenos">432</span></a><span class="sd">            during the animation.</span>
</span><span id="L-433"><a href="#L-433"><span class="linenos">433</span></a>
</span><span id="L-434"><a href="#L-434"><span class="linenos">434</span></a><span class="sd">        cropPadding : int</span>
</span><span id="L-435"><a href="#L-435"><span class="linenos">435</span></a><span class="sd">            The amount of padding to add around the animation if</span>
</span><span id="L-436"><a href="#L-436"><span class="linenos">436</span></a><span class="sd">            `crop=True`.</span>
</span><span id="L-437"><a href="#L-437"><span class="linenos">437</span></a>
</span><span id="L-438"><a href="#L-438"><span class="linenos">438</span></a><span class="sd">        outputFormat : &#39;gif&#39; or &#39;mp4&#39;</span>
</span><span id="L-439"><a href="#L-439"><span class="linenos">439</span></a><span class="sd">            The output format for the animation. Overridden if an extension is</span>
</span><span id="L-440"><a href="#L-440"><span class="linenos">440</span></a><span class="sd">            directly included in the file name (`outputFile`).</span>
</span><span id="L-441"><a href="#L-441"><span class="linenos">441</span></a><span class="sd">            </span>
</span><span id="L-442"><a href="#L-442"><span class="linenos">442</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-443"><a href="#L-443"><span class="linenos">443</span></a>
</span><span id="L-444"><a href="#L-444"><span class="linenos">444</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dim</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="L-445"><a href="#L-445"><span class="linenos">445</span></a>            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Animation not supported for 2D point clouds&#39;</span><span class="p">)</span>
</span><span id="L-446"><a href="#L-446"><span class="linenos">446</span></a>
</span><span id="L-447"><a href="#L-447"><span class="linenos">447</span></a>        <span class="c1"># Import these here since they arent needed in the rest of this</span>
</span><span id="L-448"><a href="#L-448"><span class="linenos">448</span></a>        <span class="c1"># file and this is sortof a debug method</span>
</span><span id="L-449"><a href="#L-449"><span class="linenos">449</span></a>        <span class="kn">import</span> <span class="nn">cv2</span>
</span><span id="L-450"><a href="#L-450"><span class="linenos">450</span></a>        <span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
</span><span id="L-451"><a href="#L-451"><span class="linenos">451</span></a>
</span><span id="L-452"><a href="#L-452"><span class="linenos">452</span></a>        <span class="c1">#############################################</span>
</span><span id="L-453"><a href="#L-453"><span class="linenos">453</span></a>        <span class="c1"># Create our geometries</span>
</span><span id="L-454"><a href="#L-454"><span class="linenos">454</span></a>        <span class="c1">#############################################</span>
</span><span id="L-455"><a href="#L-455"><span class="linenos">455</span></a>        <span class="n">geometry</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-456"><a href="#L-456"><span class="linenos">456</span></a>
</span><span id="L-457"><a href="#L-457"><span class="linenos">457</span></a>        <span class="k">if</span> <span class="n">plotSkeleton</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">skeletonPoints</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-458"><a href="#L-458"><span class="linenos">458</span></a>            <span class="n">skelPointCloud</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">()</span>
</span><span id="L-459"><a href="#L-459"><span class="linenos">459</span></a>            <span class="n">skelPointCloud</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">utility</span><span class="o">.</span><span class="n">Vector3dVector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">skeletonPoints</span><span class="p">)</span>
</span><span id="L-460"><a href="#L-460"><span class="linenos">460</span></a>            <span class="n">skelPointCloud</span><span class="o">.</span><span class="n">paint_uniform_color</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">31</span><span class="p">,</span> <span class="mi">119</span><span class="p">,</span> <span class="mi">180</span><span class="p">])</span><span class="o">/</span><span class="mf">255.</span><span class="p">)</span> <span class="c1"># Tab:blue color</span>
</span><span id="L-461"><a href="#L-461"><span class="linenos">461</span></a>            <span class="n">geometry</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">skelPointCloud</span><span class="p">)</span>
</span><span id="L-462"><a href="#L-462"><span class="linenos">462</span></a>
</span><span id="L-463"><a href="#L-463"><span class="linenos">463</span></a>            <span class="c1"># TODO: Allow support for weighted edges (maybe use color?)</span>
</span><span id="L-464"><a href="#L-464"><span class="linenos">464</span></a>            <span class="n">skelEdges</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">LineSet</span><span class="p">()</span>
</span><span id="L-465"><a href="#L-465"><span class="linenos">465</span></a>            <span class="n">skelEdges</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">utility</span><span class="o">.</span><span class="n">Vector3dVector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">skeletonPoints</span><span class="p">)</span>
</span><span id="L-466"><a href="#L-466"><span class="linenos">466</span></a>
</span><span id="L-467"><a href="#L-467"><span class="linenos">467</span></a>            <span class="c1"># Find all indices in the adjacency matrix that are greater than 0</span>
</span><span id="L-468"><a href="#L-468"><span class="linenos">468</span></a>            <span class="c1"># Code for numpy</span>
</span><span id="L-469"><a href="#L-469"><span class="linenos">469</span></a>            <span class="n">pairConnections</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">skeletonAdjMat</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
</span><span id="L-470"><a href="#L-470"><span class="linenos">470</span></a>            <span class="c1"># Code for sparse</span>
</span><span id="L-471"><a href="#L-471"><span class="linenos">471</span></a>            <span class="c1">#pairConnections = self.skeletonAdjMat.coords.T</span>
</span><span id="L-472"><a href="#L-472"><span class="linenos">472</span></a>            <span class="c1"># Sort them, so that we can remove duplicates</span>
</span><span id="L-473"><a href="#L-473"><span class="linenos">473</span></a>            <span class="n">pairConnections</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">pairConnections</span><span class="p">]</span>
</span><span id="L-474"><a href="#L-474"><span class="linenos">474</span></a>            <span class="c1"># And remove duplicates</span>
</span><span id="L-475"><a href="#L-475"><span class="linenos">475</span></a>            <span class="n">pairConnections</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">pairConnections</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span><span id="L-476"><a href="#L-476"><span class="linenos">476</span></a>
</span><span id="L-477"><a href="#L-477"><span class="linenos">477</span></a>            <span class="n">skelEdges</span><span class="o">.</span><span class="n">lines</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">utility</span><span class="o">.</span><span class="n">Vector2iVector</span><span class="p">(</span><span class="n">pairConnections</span><span class="p">)</span>
</span><span id="L-478"><a href="#L-478"><span class="linenos">478</span></a>
</span><span id="L-479"><a href="#L-479"><span class="linenos">479</span></a>            <span class="n">geometry</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">skelEdges</span><span class="p">)</span>
</span><span id="L-480"><a href="#L-480"><span class="linenos">480</span></a>
</span><span id="L-481"><a href="#L-481"><span class="linenos">481</span></a>        <span class="k">if</span> <span class="n">plotPoints</span><span class="p">:</span>
</span><span id="L-482"><a href="#L-482"><span class="linenos">482</span></a>            <span class="n">pointCloud</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">()</span>
</span><span id="L-483"><a href="#L-483"><span class="linenos">483</span></a>            <span class="n">pointCloud</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">utility</span><span class="o">.</span><span class="n">Vector3dVector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="p">)</span>
</span><span id="L-484"><a href="#L-484"><span class="linenos">484</span></a>            <span class="n">pointCloud</span><span class="o">.</span><span class="n">paint_uniform_color</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">148</span><span class="p">,</span> <span class="mi">103</span><span class="p">,</span> <span class="mi">189</span><span class="p">])</span><span class="o">/</span><span class="mf">255.</span><span class="p">)</span> <span class="c1"># Tab:purple color</span>
</span><span id="L-485"><a href="#L-485"><span class="linenos">485</span></a>            <span class="n">geometry</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pointCloud</span><span class="p">)</span>
</span><span id="L-486"><a href="#L-486"><span class="linenos">486</span></a>
</span><span id="L-487"><a href="#L-487"><span class="linenos">487</span></a>        <span class="c1"># If any of the implementations of this base class want to</span>
</span><span id="L-488"><a href="#L-488"><span class="linenos">488</span></a>        <span class="c1"># add extra elements to plot, we have support for that.</span>
</span><span id="L-489"><a href="#L-489"><span class="linenos">489</span></a>        <span class="c1"># For example, if an octree algorithm wants to plot the</span>
</span><span id="L-490"><a href="#L-490"><span class="linenos">490</span></a>        <span class="c1"># boxes into which points are divided</span>
</span><span id="L-491"><a href="#L-491"><span class="linenos">491</span></a>        <span class="n">geometry</span> <span class="o">=</span> <span class="n">geometry</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_o3d_extra_plot_geometries</span><span class="p">(</span><span class="n">plotPoints</span><span class="p">,</span> <span class="n">plotSkeleton</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="L-492"><a href="#L-492"><span class="linenos">492</span></a>
</span><span id="L-493"><a href="#L-493"><span class="linenos">493</span></a>        <span class="c1"># Correct for rotation</span>
</span><span id="L-494"><a href="#L-494"><span class="linenos">494</span></a>        <span class="c1"># TODO: Find a better way to do this (can I rotate the view?)</span>
</span><span id="L-495"><a href="#L-495"><span class="linenos">495</span></a>        <span class="c1">#for i in range(len(geometry)):</span>
</span><span id="L-496"><a href="#L-496"><span class="linenos">496</span></a>        <span class="c1">#    geometry[i].points = o3d.utility.Vector3dVector(np.asarray(geometry[i].points)[[0,2,1]])</span>
</span><span id="L-497"><a href="#L-497"><span class="linenos">497</span></a>
</span><span id="L-498"><a href="#L-498"><span class="linenos">498</span></a>        <span class="c1">#############################################</span>
</span><span id="L-499"><a href="#L-499"><span class="linenos">499</span></a>        <span class="c1"># Setup the animation</span>
</span><span id="L-500"><a href="#L-500"><span class="linenos">500</span></a>        <span class="c1">#############################################</span>
</span><span id="L-501"><a href="#L-501"><span class="linenos">501</span></a>        <span class="n">ALLOWED_FORMATS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;gif&#39;</span><span class="p">,</span> <span class="s1">&#39;mp4&#39;</span><span class="p">]</span>
</span><span id="L-502"><a href="#L-502"><span class="linenos">502</span></a>
</span><span id="L-503"><a href="#L-503"><span class="linenos">503</span></a>        <span class="k">if</span> <span class="n">outputFile</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-504"><a href="#L-504"><span class="linenos">504</span></a>            <span class="c1"># Try to infer the output format from the file name</span>
</span><span id="L-505"><a href="#L-505"><span class="linenos">505</span></a>            <span class="n">potentialExtension</span> <span class="o">=</span> <span class="n">outputFile</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span><span id="L-506"><a href="#L-506"><span class="linenos">506</span></a>            <span class="k">if</span> <span class="n">potentialExtension</span> <span class="ow">in</span> <span class="n">ALLOWED_FORMATS</span><span class="p">:</span>
</span><span id="L-507"><a href="#L-507"><span class="linenos">507</span></a>                <span class="n">outputFormat</span> <span class="o">=</span> <span class="n">potentialExtension</span>
</span><span id="L-508"><a href="#L-508"><span class="linenos">508</span></a>                <span class="n">fullOutputPath</span> <span class="o">=</span> <span class="n">outputFile</span>
</span><span id="L-509"><a href="#L-509"><span class="linenos">509</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-510"><a href="#L-510"><span class="linenos">510</span></a>                <span class="c1"># Otherwise, we have to append whatever the provided extension is</span>
</span><span id="L-511"><a href="#L-511"><span class="linenos">511</span></a>                <span class="n">outputFormat</span> <span class="o">=</span> <span class="n">outputFormat</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span><span id="L-512"><a href="#L-512"><span class="linenos">512</span></a>
</span><span id="L-513"><a href="#L-513"><span class="linenos">513</span></a>                <span class="c1"># But first make sure the provided format is allowed</span>
</span><span id="L-514"><a href="#L-514"><span class="linenos">514</span></a>                <span class="k">if</span> <span class="n">outputFormat</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ALLOWED_FORMATS</span><span class="p">:</span>
</span><span id="L-515"><a href="#L-515"><span class="linenos">515</span></a>                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Invalid output format specified: </span><span class="si">{</span><span class="n">outputFormat</span><span class="si">}</span><span class="s1">; available options are </span><span class="si">{</span><span class="n">ALLOWED_FORMATS</span><span class="si">}</span><span class="s1">.&#39;</span><span class="p">)</span>
</span><span id="L-516"><a href="#L-516"><span class="linenos">516</span></a>
</span><span id="L-517"><a href="#L-517"><span class="linenos">517</span></a>                <span class="n">fullOutputPath</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">outputFile</span><span class="si">}</span><span class="s1">.</span><span class="si">{</span><span class="n">outputFormat</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="L-518"><a href="#L-518"><span class="linenos">518</span></a>
</span><span id="L-519"><a href="#L-519"><span class="linenos">519</span></a>        <span class="n">images</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-520"><a href="#L-520"><span class="linenos">520</span></a>        <span class="k">global</span> <span class="n">initialRotationApplied</span>
</span><span id="L-521"><a href="#L-521"><span class="linenos">521</span></a>        <span class="n">initialRotationApplied</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-522"><a href="#L-522"><span class="linenos">522</span></a>
</span><span id="L-523"><a href="#L-523"><span class="linenos">523</span></a>        <span class="k">def</span> <span class="nf">update_view</span><span class="p">(</span><span class="n">vis</span><span class="p">):</span>
</span><span id="L-524"><a href="#L-524"><span class="linenos">524</span></a>            <span class="k">global</span> <span class="n">initialRotationApplied</span>
</span><span id="L-525"><a href="#L-525"><span class="linenos">525</span></a>
</span><span id="L-526"><a href="#L-526"><span class="linenos">526</span></a>            <span class="n">opt</span> <span class="o">=</span> <span class="n">vis</span><span class="o">.</span><span class="n">get_render_option</span><span class="p">()</span>
</span><span id="L-527"><a href="#L-527"><span class="linenos">527</span></a>            <span class="n">opt</span><span class="o">.</span><span class="n">background_color</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">backgroundColor</span><span class="p">)</span>
</span><span id="L-528"><a href="#L-528"><span class="linenos">528</span></a>
</span><span id="L-529"><a href="#L-529"><span class="linenos">529</span></a>            <span class="n">vis</span><span class="o">.</span><span class="n">get_render_option</span><span class="p">()</span><span class="o">.</span><span class="n">point_size</span> <span class="o">=</span> <span class="n">pointSize</span>
</span><span id="L-530"><a href="#L-530"><span class="linenos">530</span></a>            <span class="n">vis</span><span class="o">.</span><span class="n">get_render_option</span><span class="p">()</span><span class="o">.</span><span class="n">line_width</span> <span class="o">=</span> <span class="n">lineWidth</span>
</span><span id="L-531"><a href="#L-531"><span class="linenos">531</span></a>
</span><span id="L-532"><a href="#L-532"><span class="linenos">532</span></a>            <span class="n">ctr</span> <span class="o">=</span> <span class="n">vis</span><span class="o">.</span><span class="n">get_view_control</span><span class="p">()</span>
</span><span id="L-533"><a href="#L-533"><span class="linenos">533</span></a>
</span><span id="L-534"><a href="#L-534"><span class="linenos">534</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">initialRotationApplied</span><span class="p">:</span>
</span><span id="L-535"><a href="#L-535"><span class="linenos">535</span></a>                <span class="n">ctr</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="o">*</span><span class="n">initialRotation</span><span class="p">)</span>
</span><span id="L-536"><a href="#L-536"><span class="linenos">536</span></a>                <span class="n">initialRotationApplied</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-537"><a href="#L-537"><span class="linenos">537</span></a>
</span><span id="L-538"><a href="#L-538"><span class="linenos">538</span></a>            <span class="n">ctr</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">rotationSpeed</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="L-539"><a href="#L-539"><span class="linenos">539</span></a>            <span class="n">ctr</span><span class="o">.</span><span class="n">set_zoom</span><span class="p">(</span><span class="n">zoom</span><span class="p">)</span>
</span><span id="L-540"><a href="#L-540"><span class="linenos">540</span></a>
</span><span id="L-541"><a href="#L-541"><span class="linenos">541</span></a>            <span class="k">if</span> <span class="n">outputFile</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="p">(</span><span class="n">maxFrames</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">images</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">maxFrames</span><span class="p">):</span>
</span><span id="L-542"><a href="#L-542"><span class="linenos">542</span></a>                <span class="n">image</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">vis</span><span class="o">.</span><span class="n">capture_screen_float_buffer</span><span class="p">(</span><span class="kc">False</span><span class="p">))</span><span class="o">*</span><span class="mi">255</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
</span><span id="L-543"><a href="#L-543"><span class="linenos">543</span></a>                <span class="n">images</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">image</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">))</span>
</span><span id="L-544"><a href="#L-544"><span class="linenos">544</span></a>            
</span><span id="L-545"><a href="#L-545"><span class="linenos">545</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-546"><a href="#L-546"><span class="linenos">546</span></a>
</span><span id="L-547"><a href="#L-547"><span class="linenos">547</span></a>        <span class="n">o3d</span><span class="o">.</span><span class="n">visualization</span><span class="o">.</span><span class="n">draw_geometries_with_animation_callback</span><span class="p">(</span><span class="n">geometry</span><span class="p">,</span>
</span><span id="L-548"><a href="#L-548"><span class="linenos">548</span></a>                                                                  <span class="n">update_view</span><span class="p">)</span>
</span><span id="L-549"><a href="#L-549"><span class="linenos">549</span></a>
</span><span id="L-550"><a href="#L-550"><span class="linenos">550</span></a>        <span class="k">if</span> <span class="n">outputFile</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-551"><a href="#L-551"><span class="linenos">551</span></a>            <span class="k">return</span>
</span><span id="L-552"><a href="#L-552"><span class="linenos">552</span></a>
</span><span id="L-553"><a href="#L-553"><span class="linenos">553</span></a>
</span><span id="L-554"><a href="#L-554"><span class="linenos">554</span></a>        <span class="k">if</span> <span class="n">crop</span><span class="p">:</span>
</span><span id="L-555"><a href="#L-555"><span class="linenos">555</span></a>            <span class="c1"># If we want to crop, we should see if there are any pixels that only</span>
</span><span id="L-556"><a href="#L-556"><span class="linenos">556</span></a>            <span class="c1"># ever take on the value of the background color</span>
</span><span id="L-557"><a href="#L-557"><span class="linenos">557</span></a>            <span class="n">usedPixels</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">images</span><span class="p">)</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">backgroundColor</span><span class="p">)</span><span class="o">*</span><span class="mi">255</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span><span id="L-558"><a href="#L-558"><span class="linenos">558</span></a>            <span class="n">usedPixels</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">usedPixels</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-559"><a href="#L-559"><span class="linenos">559</span></a>
</span><span id="L-560"><a href="#L-560"><span class="linenos">560</span></a>            <span class="n">usedIndices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">usedPixels</span> <span class="o">&gt;</span> <span class="mf">1e-8</span><span class="p">))</span>
</span><span id="L-561"><a href="#L-561"><span class="linenos">561</span></a>            <span class="n">cropBounds</span> <span class="o">=</span> <span class="p">[</span><span class="nb">max</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">usedIndices</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">-</span><span class="n">cropPadding</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
</span><span id="L-562"><a href="#L-562"><span class="linenos">562</span></a>                          <span class="nb">min</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">usedIndices</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="n">cropPadding</span><span class="p">,</span> <span class="n">images</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
</span><span id="L-563"><a href="#L-563"><span class="linenos">563</span></a>                          <span class="nb">max</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">usedIndices</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">-</span><span class="n">cropPadding</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
</span><span id="L-564"><a href="#L-564"><span class="linenos">564</span></a>                          <span class="nb">min</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">usedIndices</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">+</span><span class="n">cropPadding</span><span class="p">,</span> <span class="n">images</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])]</span>
</span><span id="L-565"><a href="#L-565"><span class="linenos">565</span></a>
</span><span id="L-566"><a href="#L-566"><span class="linenos">566</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-567"><a href="#L-567"><span class="linenos">567</span></a>            <span class="n">cropBounds</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">images</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="n">images</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
</span><span id="L-568"><a href="#L-568"><span class="linenos">568</span></a>
</span><span id="L-569"><a href="#L-569"><span class="linenos">569</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">images</span><span class="p">)):</span>
</span><span id="L-570"><a href="#L-570"><span class="linenos">570</span></a>            <span class="n">images</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">images</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">cropBounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span><span class="n">cropBounds</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">cropBounds</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span><span class="n">cropBounds</span><span class="p">[</span><span class="mi">3</span><span class="p">]]</span>
</span><span id="L-571"><a href="#L-571"><span class="linenos">571</span></a>
</span><span id="L-572"><a href="#L-572"><span class="linenos">572</span></a>        <span class="k">if</span> <span class="n">outputFormat</span> <span class="o">==</span> <span class="s1">&#39;mp4&#39;</span><span class="p">:</span>
</span><span id="L-573"><a href="#L-573"><span class="linenos">573</span></a>            <span class="n">fourcc</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">VideoWriter_fourcc</span><span class="p">(</span><span class="o">*</span><span class="s1">&#39;mp4v&#39;</span><span class="p">)</span>
</span><span id="L-574"><a href="#L-574"><span class="linenos">574</span></a>            <span class="n">video</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">VideoWriter</span><span class="p">(</span><span class="n">fullOutputPath</span><span class="p">,</span> <span class="n">fourcc</span><span class="p">,</span> <span class="n">fps</span><span class="p">,</span> <span class="p">(</span><span class="n">images</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">images</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
</span><span id="L-575"><a href="#L-575"><span class="linenos">575</span></a>
</span><span id="L-576"><a href="#L-576"><span class="linenos">576</span></a>            <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">images</span><span class="p">:</span>
</span><span id="L-577"><a href="#L-577"><span class="linenos">577</span></a>                <span class="n">video</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_RGB2BGR</span><span class="p">))</span>
</span><span id="L-578"><a href="#L-578"><span class="linenos">578</span></a>
</span><span id="L-579"><a href="#L-579"><span class="linenos">579</span></a>            <span class="n">video</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
</span><span id="L-580"><a href="#L-580"><span class="linenos">580</span></a>
</span><span id="L-581"><a href="#L-581"><span class="linenos">581</span></a>        <span class="k">if</span> <span class="n">outputFormat</span> <span class="o">==</span> <span class="s1">&#39;gif&#39;</span><span class="p">:</span>
</span><span id="L-582"><a href="#L-582"><span class="linenos">582</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">images</span><span class="p">)):</span>
</span><span id="L-583"><a href="#L-583"><span class="linenos">583</span></a>                <span class="n">images</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">fromarray</span><span class="p">(</span><span class="n">images</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</span><span id="L-584"><a href="#L-584"><span class="linenos">584</span></a>
</span><span id="L-585"><a href="#L-585"><span class="linenos">585</span></a>            <span class="n">images</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">fullOutputPath</span><span class="p">,</span> <span class="n">save_all</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">append_images</span><span class="o">=</span><span class="n">images</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">loop</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">fps</span><span class="o">*</span><span class="mf">1e3</span><span class="p">))</span>
</span></pre></div>


            </section>
                <section id="SkeletonBase">
                            <input id="SkeletonBase-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">SkeletonBase</span>:

                <label class="view-source-button" for="SkeletonBase-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SkeletonBase"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SkeletonBase-45"><a href="#SkeletonBase-45"><span class="linenos"> 45</span></a><span class="k">class</span> <span class="nc">SkeletonBase</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span id="SkeletonBase-46"><a href="#SkeletonBase-46"><span class="linenos"> 46</span></a>
</span><span id="SkeletonBase-47"><a href="#SkeletonBase-47"><span class="linenos"> 47</span></a>    <span class="c1">#############################</span>
</span><span id="SkeletonBase-48"><a href="#SkeletonBase-48"><span class="linenos"> 48</span></a>    <span class="c1">## Variables to be defined</span>
</span><span id="SkeletonBase-49"><a href="#SkeletonBase-49"><span class="linenos"> 49</span></a>    <span class="c1">#############################</span>
</span><span id="SkeletonBase-50"><a href="#SkeletonBase-50"><span class="linenos"> 50</span></a>    <span class="c1"># The following variables should be defined by the inheriting</span>
</span><span id="SkeletonBase-51"><a href="#SkeletonBase-51"><span class="linenos"> 51</span></a>    <span class="c1"># class for this base class to function properly.</span>
</span><span id="SkeletonBase-52"><a href="#SkeletonBase-52"><span class="linenos"> 52</span></a>
</span><span id="SkeletonBase-53"><a href="#SkeletonBase-53"><span class="linenos"> 53</span></a>    <span class="n">points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
</span><span id="SkeletonBase-54"><a href="#SkeletonBase-54"><span class="linenos"> 54</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SkeletonBase-55"><a href="#SkeletonBase-55"><span class="linenos"> 55</span></a><span class="sd">    numpy.ndarray[N,d]</span>
</span><span id="SkeletonBase-56"><a href="#SkeletonBase-56"><span class="linenos"> 56</span></a>
</span><span id="SkeletonBase-57"><a href="#SkeletonBase-57"><span class="linenos"> 57</span></a><span class="sd">    Set of points comprising the point cloud.</span>
</span><span id="SkeletonBase-58"><a href="#SkeletonBase-58"><span class="linenos"> 58</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="SkeletonBase-59"><a href="#SkeletonBase-59"><span class="linenos"> 59</span></a>    
</span><span id="SkeletonBase-60"><a href="#SkeletonBase-60"><span class="linenos"> 60</span></a>    <span class="n">skeletonPoints</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
</span><span id="SkeletonBase-61"><a href="#SkeletonBase-61"><span class="linenos"> 61</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SkeletonBase-62"><a href="#SkeletonBase-62"><span class="linenos"> 62</span></a><span class="sd">    numpy.ndarray[M,d]</span>
</span><span id="SkeletonBase-63"><a href="#SkeletonBase-63"><span class="linenos"> 63</span></a>
</span><span id="SkeletonBase-64"><a href="#SkeletonBase-64"><span class="linenos"> 64</span></a><span class="sd">    Set of points comprising the skeleton.</span>
</span><span id="SkeletonBase-65"><a href="#SkeletonBase-65"><span class="linenos"> 65</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="SkeletonBase-66"><a href="#SkeletonBase-66"><span class="linenos"> 66</span></a>    
</span><span id="SkeletonBase-67"><a href="#SkeletonBase-67"><span class="linenos"> 67</span></a>    <span class="c1"># Adjacency matrix noting which points of the</span>
</span><span id="SkeletonBase-68"><a href="#SkeletonBase-68"><span class="linenos"> 68</span></a>    <span class="c1"># skeleton are connected to which others</span>
</span><span id="SkeletonBase-69"><a href="#SkeletonBase-69"><span class="linenos"> 69</span></a>    <span class="c1"># sparse.COO[M,M]</span>
</span><span id="SkeletonBase-70"><a href="#SkeletonBase-70"><span class="linenos"> 70</span></a>    <span class="n">skeletonAdjMat</span> <span class="o">=</span> <span class="n">sparse</span><span class="o">.</span><span class="n">COO</span><span class="p">([],</span> <span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
</span><span id="SkeletonBase-71"><a href="#SkeletonBase-71"><span class="linenos"> 71</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SkeletonBase-72"><a href="#SkeletonBase-72"><span class="linenos"> 72</span></a><span class="sd">    sparse.COO[M,M]</span>
</span><span id="SkeletonBase-73"><a href="#SkeletonBase-73"><span class="linenos"> 73</span></a>
</span><span id="SkeletonBase-74"><a href="#SkeletonBase-74"><span class="linenos"> 74</span></a><span class="sd">    Adjacency matrix for the skeleton. Stored as a sparse matrix</span>
</span><span id="SkeletonBase-75"><a href="#SkeletonBase-75"><span class="linenos"> 75</span></a><span class="sd">    since there may be a potential very large amount of skeleton points.</span>
</span><span id="SkeletonBase-76"><a href="#SkeletonBase-76"><span class="linenos"> 76</span></a><span class="sd">    Can always be converted to a dense matrix with:</span>
</span><span id="SkeletonBase-77"><a href="#SkeletonBase-77"><span class="linenos"> 77</span></a>
</span><span id="SkeletonBase-78"><a href="#SkeletonBase-78"><span class="linenos"> 78</span></a><span class="sd">        skeletonAdjMat.todense()</span>
</span><span id="SkeletonBase-79"><a href="#SkeletonBase-79"><span class="linenos"> 79</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="SkeletonBase-80"><a href="#SkeletonBase-80"><span class="linenos"> 80</span></a>
</span><span id="SkeletonBase-81"><a href="#SkeletonBase-81"><span class="linenos"> 81</span></a>    <span class="n">skeletonGraph</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
</span><span id="SkeletonBase-82"><a href="#SkeletonBase-82"><span class="linenos"> 82</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SkeletonBase-83"><a href="#SkeletonBase-83"><span class="linenos"> 83</span></a><span class="sd">    networkx.Graph()</span>
</span><span id="SkeletonBase-84"><a href="#SkeletonBase-84"><span class="linenos"> 84</span></a>
</span><span id="SkeletonBase-85"><a href="#SkeletonBase-85"><span class="linenos"> 85</span></a><span class="sd">    Graph representation of the skeleton.</span>
</span><span id="SkeletonBase-86"><a href="#SkeletonBase-86"><span class="linenos"> 86</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="SkeletonBase-87"><a href="#SkeletonBase-87"><span class="linenos"> 87</span></a>
</span><span id="SkeletonBase-88"><a href="#SkeletonBase-88"><span class="linenos"> 88</span></a>    <span class="n">topologyPoints</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
</span><span id="SkeletonBase-89"><a href="#SkeletonBase-89"><span class="linenos"> 89</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SkeletonBase-90"><a href="#SkeletonBase-90"><span class="linenos"> 90</span></a><span class="sd">    numpy.ndarray[L,d]</span>
</span><span id="SkeletonBase-91"><a href="#SkeletonBase-91"><span class="linenos"> 91</span></a>
</span><span id="SkeletonBase-92"><a href="#SkeletonBase-92"><span class="linenos"> 92</span></a><span class="sd">    Points for the topological graph, ie. graph with all degree 2 vertices</span>
</span><span id="SkeletonBase-93"><a href="#SkeletonBase-93"><span class="linenos"> 93</span></a><span class="sd">    removed and their neighbors joined.</span>
</span><span id="SkeletonBase-94"><a href="#SkeletonBase-94"><span class="linenos"> 94</span></a>
</span><span id="SkeletonBase-95"><a href="#SkeletonBase-95"><span class="linenos"> 95</span></a><span class="sd">    Computed by this base class&#39;s function `generateTopology()`.</span>
</span><span id="SkeletonBase-96"><a href="#SkeletonBase-96"><span class="linenos"> 96</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="SkeletonBase-97"><a href="#SkeletonBase-97"><span class="linenos"> 97</span></a>
</span><span id="SkeletonBase-98"><a href="#SkeletonBase-98"><span class="linenos"> 98</span></a>    <span class="n">topologyAdjMat</span> <span class="o">=</span> <span class="n">sparse</span><span class="o">.</span><span class="n">COO</span><span class="p">([],</span> <span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
</span><span id="SkeletonBase-99"><a href="#SkeletonBase-99"><span class="linenos"> 99</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SkeletonBase-100"><a href="#SkeletonBase-100"><span class="linenos">100</span></a><span class="sd">    sparse.COO[M,M]</span>
</span><span id="SkeletonBase-101"><a href="#SkeletonBase-101"><span class="linenos">101</span></a>
</span><span id="SkeletonBase-102"><a href="#SkeletonBase-102"><span class="linenos">102</span></a><span class="sd">    Adjacency matrix for the topological graph. Stored as a sparse matrix.</span>
</span><span id="SkeletonBase-103"><a href="#SkeletonBase-103"><span class="linenos">103</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="SkeletonBase-104"><a href="#SkeletonBase-104"><span class="linenos">104</span></a>
</span><span id="SkeletonBase-105"><a href="#SkeletonBase-105"><span class="linenos">105</span></a>    <span class="n">topologyGraph</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
</span><span id="SkeletonBase-106"><a href="#SkeletonBase-106"><span class="linenos">106</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SkeletonBase-107"><a href="#SkeletonBase-107"><span class="linenos">107</span></a><span class="sd">    networkx.Graph()</span>
</span><span id="SkeletonBase-108"><a href="#SkeletonBase-108"><span class="linenos">108</span></a>
</span><span id="SkeletonBase-109"><a href="#SkeletonBase-109"><span class="linenos">109</span></a><span class="sd">    Graph representation of the topological graph.</span>
</span><span id="SkeletonBase-110"><a href="#SkeletonBase-110"><span class="linenos">110</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="SkeletonBase-111"><a href="#SkeletonBase-111"><span class="linenos">111</span></a>
</span><span id="SkeletonBase-112"><a href="#SkeletonBase-112"><span class="linenos">112</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="SkeletonBase-113"><a href="#SkeletonBase-113"><span class="linenos">113</span></a>                 <span class="n">points</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="SkeletonBase-114"><a href="#SkeletonBase-114"><span class="linenos">114</span></a>                 <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="SkeletonBase-115"><a href="#SkeletonBase-115"><span class="linenos">115</span></a>                 <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="SkeletonBase-116"><a href="#SkeletonBase-116"><span class="linenos">116</span></a><span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SkeletonBase-117"><a href="#SkeletonBase-117"><span class="linenos">117</span></a><span class="sd">        The base class for a skeletonization algorithm, which implements</span>
</span><span id="SkeletonBase-118"><a href="#SkeletonBase-118"><span class="linenos">118</span></a><span class="sd">        methods to plot the skeleton and generate images/movies.</span>
</span><span id="SkeletonBase-119"><a href="#SkeletonBase-119"><span class="linenos">119</span></a>
</span><span id="SkeletonBase-120"><a href="#SkeletonBase-120"><span class="linenos">120</span></a><span class="sd">        Parameters</span>
</span><span id="SkeletonBase-121"><a href="#SkeletonBase-121"><span class="linenos">121</span></a><span class="sd">        ----------</span>
</span><span id="SkeletonBase-122"><a href="#SkeletonBase-122"><span class="linenos">122</span></a><span class="sd">        points : numpy.ndarray[N,d]</span>
</span><span id="SkeletonBase-123"><a href="#SkeletonBase-123"><span class="linenos">123</span></a><span class="sd">            Point cloud.</span>
</span><span id="SkeletonBase-124"><a href="#SkeletonBase-124"><span class="linenos">124</span></a>
</span><span id="SkeletonBase-125"><a href="#SkeletonBase-125"><span class="linenos">125</span></a><span class="sd">        verbose : bool</span>
</span><span id="SkeletonBase-126"><a href="#SkeletonBase-126"><span class="linenos">126</span></a><span class="sd">            Whether or not to print information during generation.</span>
</span><span id="SkeletonBase-127"><a href="#SkeletonBase-127"><span class="linenos">127</span></a>
</span><span id="SkeletonBase-128"><a href="#SkeletonBase-128"><span class="linenos">128</span></a><span class="sd">        debug : bool</span>
</span><span id="SkeletonBase-129"><a href="#SkeletonBase-129"><span class="linenos">129</span></a><span class="sd">            Whether or not to plot debug figures during generation.</span>
</span><span id="SkeletonBase-130"><a href="#SkeletonBase-130"><span class="linenos">130</span></a>
</span><span id="SkeletonBase-131"><a href="#SkeletonBase-131"><span class="linenos">131</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SkeletonBase-132"><a href="#SkeletonBase-132"><span class="linenos">132</span></a>
</span><span id="SkeletonBase-133"><a href="#SkeletonBase-133"><span class="linenos">133</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">verbose</span>
</span><span id="SkeletonBase-134"><a href="#SkeletonBase-134"><span class="linenos">134</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">debug</span>
</span><span id="SkeletonBase-135"><a href="#SkeletonBase-135"><span class="linenos">135</span></a>
</span><span id="SkeletonBase-136"><a href="#SkeletonBase-136"><span class="linenos">136</span></a>        <span class="c1"># The only real benefit of giving the points to this</span>
</span><span id="SkeletonBase-137"><a href="#SkeletonBase-137"><span class="linenos">137</span></a>        <span class="c1"># template class is to note the dimension.</span>
</span><span id="SkeletonBase-138"><a href="#SkeletonBase-138"><span class="linenos">138</span></a>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="s1">&#39;__iter__&#39;</span><span class="p">):</span>
</span><span id="SkeletonBase-139"><a href="#SkeletonBase-139"><span class="linenos">139</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="n">points</span>
</span><span id="SkeletonBase-140"><a href="#SkeletonBase-140"><span class="linenos">140</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">dim</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="n">points</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="SkeletonBase-141"><a href="#SkeletonBase-141"><span class="linenos">141</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="SkeletonBase-142"><a href="#SkeletonBase-142"><span class="linenos">142</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="SkeletonBase-143"><a href="#SkeletonBase-143"><span class="linenos">143</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">dim</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="SkeletonBase-144"><a href="#SkeletonBase-144"><span class="linenos">144</span></a>
</span><span id="SkeletonBase-145"><a href="#SkeletonBase-145"><span class="linenos">145</span></a>        <span class="c1"># TODO: Update this</span>
</span><span id="SkeletonBase-146"><a href="#SkeletonBase-146"><span class="linenos">146</span></a>        <span class="c1">#if self.verbose:</span>
</span><span id="SkeletonBase-147"><a href="#SkeletonBase-147"><span class="linenos">147</span></a>        <span class="c1">#    logging.basicConfig(format=&#39;%(asctime)s - %(message)s&#39;, level=logging.DEBUG)</span>
</span><span id="SkeletonBase-148"><a href="#SkeletonBase-148"><span class="linenos">148</span></a>        <span class="c1">#else:</span>
</span><span id="SkeletonBase-149"><a href="#SkeletonBase-149"><span class="linenos">149</span></a>        <span class="c1">#    logging.basicConfig(format=&#39;%(asctime)s - %(message)s&#39;, level=logging.INFO)</span>
</span><span id="SkeletonBase-150"><a href="#SkeletonBase-150"><span class="linenos">150</span></a>
</span><span id="SkeletonBase-151"><a href="#SkeletonBase-151"><span class="linenos">151</span></a>
</span><span id="SkeletonBase-152"><a href="#SkeletonBase-152"><span class="linenos">152</span></a>
</span><span id="SkeletonBase-153"><a href="#SkeletonBase-153"><span class="linenos">153</span></a>    <span class="k">def</span> <span class="nf">generateTopology</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="SkeletonBase-154"><a href="#SkeletonBase-154"><span class="linenos">154</span></a>                         <span class="n">keepSpatialEmbedding</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="SkeletonBase-155"><a href="#SkeletonBase-155"><span class="linenos">155</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SkeletonBase-156"><a href="#SkeletonBase-156"><span class="linenos">156</span></a><span class="sd">        Create a copy of the skeleton graph with all vertices of</span>
</span><span id="SkeletonBase-157"><a href="#SkeletonBase-157"><span class="linenos">157</span></a><span class="sd">        degree 2 removed.</span>
</span><span id="SkeletonBase-158"><a href="#SkeletonBase-158"><span class="linenos">158</span></a>
</span><span id="SkeletonBase-159"><a href="#SkeletonBase-159"><span class="linenos">159</span></a><span class="sd">        The spatial embedding can be carried over as well, but likely</span>
</span><span id="SkeletonBase-160"><a href="#SkeletonBase-160"><span class="linenos">160</span></a><span class="sd">        doesn&#39;t mean very much anymore.</span>
</span><span id="SkeletonBase-161"><a href="#SkeletonBase-161"><span class="linenos">161</span></a>
</span><span id="SkeletonBase-162"><a href="#SkeletonBase-162"><span class="linenos">162</span></a><span class="sd">        Parameters</span>
</span><span id="SkeletonBase-163"><a href="#SkeletonBase-163"><span class="linenos">163</span></a><span class="sd">        ----------</span>
</span><span id="SkeletonBase-164"><a href="#SkeletonBase-164"><span class="linenos">164</span></a><span class="sd">        keepSpatialEmbedding : bool</span>
</span><span id="SkeletonBase-165"><a href="#SkeletonBase-165"><span class="linenos">165</span></a><span class="sd">            Whether to carry the spatial embedding from the skeleton</span>
</span><span id="SkeletonBase-166"><a href="#SkeletonBase-166"><span class="linenos">166</span></a><span class="sd">            over to the topology graph (True) or to leave the</span>
</span><span id="SkeletonBase-167"><a href="#SkeletonBase-167"><span class="linenos">167</span></a><span class="sd">            topology graph unembedded (False).</span>
</span><span id="SkeletonBase-168"><a href="#SkeletonBase-168"><span class="linenos">168</span></a>
</span><span id="SkeletonBase-169"><a href="#SkeletonBase-169"><span class="linenos">169</span></a><span class="sd">        Returns</span>
</span><span id="SkeletonBase-170"><a href="#SkeletonBase-170"><span class="linenos">170</span></a><span class="sd">        -------</span>
</span><span id="SkeletonBase-171"><a href="#SkeletonBase-171"><span class="linenos">171</span></a><span class="sd">        topology : networkx.Graph</span>
</span><span id="SkeletonBase-172"><a href="#SkeletonBase-172"><span class="linenos">172</span></a><span class="sd">            Graph representing topology of the skeleton.</span>
</span><span id="SkeletonBase-173"><a href="#SkeletonBase-173"><span class="linenos">173</span></a>
</span><span id="SkeletonBase-174"><a href="#SkeletonBase-174"><span class="linenos">174</span></a><span class="sd">            Also saved as self.topologyGraph</span>
</span><span id="SkeletonBase-175"><a href="#SkeletonBase-175"><span class="linenos">175</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SkeletonBase-176"><a href="#SkeletonBase-176"><span class="linenos">176</span></a>        <span class="c1"># TODO: Remove all degree 2 nodes and then make a networkx graph</span>
</span><span id="SkeletonBase-177"><a href="#SkeletonBase-177"><span class="linenos">177</span></a>        <span class="k">pass</span>
</span><span id="SkeletonBase-178"><a href="#SkeletonBase-178"><span class="linenos">178</span></a>
</span><span id="SkeletonBase-179"><a href="#SkeletonBase-179"><span class="linenos">179</span></a>
</span><span id="SkeletonBase-180"><a href="#SkeletonBase-180"><span class="linenos">180</span></a>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">output</span><span class="p">):</span>
</span><span id="SkeletonBase-181"><a href="#SkeletonBase-181"><span class="linenos">181</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SkeletonBase-182"><a href="#SkeletonBase-182"><span class="linenos">182</span></a><span class="sd">        Not implemented! </span>
</span><span id="SkeletonBase-183"><a href="#SkeletonBase-183"><span class="linenos">183</span></a>
</span><span id="SkeletonBase-184"><a href="#SkeletonBase-184"><span class="linenos">184</span></a><span class="sd">        Save the resulting skeleton in to a file. Can be written</span>
</span><span id="SkeletonBase-185"><a href="#SkeletonBase-185"><span class="linenos">185</span></a>
</span><span id="SkeletonBase-186"><a href="#SkeletonBase-186"><span class="linenos">186</span></a><span class="sd">        Parameters</span>
</span><span id="SkeletonBase-187"><a href="#SkeletonBase-187"><span class="linenos">187</span></a><span class="sd">        ----------</span>
</span><span id="SkeletonBase-188"><a href="#SkeletonBase-188"><span class="linenos">188</span></a><span class="sd">        output : str</span>
</span><span id="SkeletonBase-189"><a href="#SkeletonBase-189"><span class="linenos">189</span></a><span class="sd">            Output file path, including filename. If no</span>
</span><span id="SkeletonBase-190"><a href="#SkeletonBase-190"><span class="linenos">190</span></a><span class="sd">            extension is given, `.ply` will be used.</span>
</span><span id="SkeletonBase-191"><a href="#SkeletonBase-191"><span class="linenos">191</span></a>
</span><span id="SkeletonBase-192"><a href="#SkeletonBase-192"><span class="linenos">192</span></a><span class="sd">        Returns</span>
</span><span id="SkeletonBase-193"><a href="#SkeletonBase-193"><span class="linenos">193</span></a><span class="sd">        -------</span>
</span><span id="SkeletonBase-194"><a href="#SkeletonBase-194"><span class="linenos">194</span></a><span class="sd">        None</span>
</span><span id="SkeletonBase-195"><a href="#SkeletonBase-195"><span class="linenos">195</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SkeletonBase-196"><a href="#SkeletonBase-196"><span class="linenos">196</span></a>        <span class="c1"># TODO</span>
</span><span id="SkeletonBase-197"><a href="#SkeletonBase-197"><span class="linenos">197</span></a>        <span class="k">pass</span>
</span><span id="SkeletonBase-198"><a href="#SkeletonBase-198"><span class="linenos">198</span></a>
</span><span id="SkeletonBase-199"><a href="#SkeletonBase-199"><span class="linenos">199</span></a>
</span><span id="SkeletonBase-200"><a href="#SkeletonBase-200"><span class="linenos">200</span></a>    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="SkeletonBase-201"><a href="#SkeletonBase-201"><span class="linenos">201</span></a>             <span class="n">plotPoints</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="SkeletonBase-202"><a href="#SkeletonBase-202"><span class="linenos">202</span></a>             <span class="n">plotSkeleton</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="SkeletonBase-203"><a href="#SkeletonBase-203"><span class="linenos">203</span></a>             <span class="n">backend</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;mpl&#39;</span><span class="p">,</span>
</span><span id="SkeletonBase-204"><a href="#SkeletonBase-204"><span class="linenos">204</span></a>             <span class="n">ax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="SkeletonBase-205"><a href="#SkeletonBase-205"><span class="linenos">205</span></a>             <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="SkeletonBase-206"><a href="#SkeletonBase-206"><span class="linenos">206</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SkeletonBase-207"><a href="#SkeletonBase-207"><span class="linenos">207</span></a><span class="sd">        Plot the point cloud, skeleton, or other information.</span>
</span><span id="SkeletonBase-208"><a href="#SkeletonBase-208"><span class="linenos">208</span></a>
</span><span id="SkeletonBase-209"><a href="#SkeletonBase-209"><span class="linenos">209</span></a><span class="sd">        Parameters</span>
</span><span id="SkeletonBase-210"><a href="#SkeletonBase-210"><span class="linenos">210</span></a><span class="sd">        ----------</span>
</span><span id="SkeletonBase-211"><a href="#SkeletonBase-211"><span class="linenos">211</span></a><span class="sd">        plotPoints : bool</span>
</span><span id="SkeletonBase-212"><a href="#SkeletonBase-212"><span class="linenos">212</span></a><span class="sd">            Whether to plot the point cloud.</span>
</span><span id="SkeletonBase-213"><a href="#SkeletonBase-213"><span class="linenos">213</span></a>
</span><span id="SkeletonBase-214"><a href="#SkeletonBase-214"><span class="linenos">214</span></a><span class="sd">        plotSkeleton : bool</span>
</span><span id="SkeletonBase-215"><a href="#SkeletonBase-215"><span class="linenos">215</span></a><span class="sd">            Whether to plot the derived skeleton nodes and edges.</span>
</span><span id="SkeletonBase-216"><a href="#SkeletonBase-216"><span class="linenos">216</span></a>
</span><span id="SkeletonBase-217"><a href="#SkeletonBase-217"><span class="linenos">217</span></a><span class="sd">        backend : {&#39;mpl&#39;, &#39;o3d&#39;}</span>
</span><span id="SkeletonBase-218"><a href="#SkeletonBase-218"><span class="linenos">218</span></a><span class="sd">            Which plotting library to use: matplotlib (`&#39;mpl&#39;`) or</span>
</span><span id="SkeletonBase-219"><a href="#SkeletonBase-219"><span class="linenos">219</span></a><span class="sd">            Open3D (`&#39;o3d&#39;`).</span>
</span><span id="SkeletonBase-220"><a href="#SkeletonBase-220"><span class="linenos">220</span></a>
</span><span id="SkeletonBase-221"><a href="#SkeletonBase-221"><span class="linenos">221</span></a><span class="sd">            Open3D is recommended for larger point clouds, as it renders</span>
</span><span id="SkeletonBase-222"><a href="#SkeletonBase-222"><span class="linenos">222</span></a><span class="sd">            much faster than matplotlib.</span>
</span><span id="SkeletonBase-223"><a href="#SkeletonBase-223"><span class="linenos">223</span></a>
</span><span id="SkeletonBase-224"><a href="#SkeletonBase-224"><span class="linenos">224</span></a><span class="sd">        ax : matplotlib.pyplot.axis, optional</span>
</span><span id="SkeletonBase-225"><a href="#SkeletonBase-225"><span class="linenos">225</span></a><span class="sd">            The axis on which to plot the requested information, if</span>
</span><span id="SkeletonBase-226"><a href="#SkeletonBase-226"><span class="linenos">226</span></a><span class="sd">            using the matplotlib backend. If not provided, a new axis</span>
</span><span id="SkeletonBase-227"><a href="#SkeletonBase-227"><span class="linenos">227</span></a><span class="sd">            will be created.</span>
</span><span id="SkeletonBase-228"><a href="#SkeletonBase-228"><span class="linenos">228</span></a>
</span><span id="SkeletonBase-229"><a href="#SkeletonBase-229"><span class="linenos">229</span></a><span class="sd">        kwargs : kwargs</span>
</span><span id="SkeletonBase-230"><a href="#SkeletonBase-230"><span class="linenos">230</span></a><span class="sd">            Other keyword arguments specific to a given skeletonization</span>
</span><span id="SkeletonBase-231"><a href="#SkeletonBase-231"><span class="linenos">231</span></a><span class="sd">            subclass. See individual documentation on</span>
</span><span id="SkeletonBase-232"><a href="#SkeletonBase-232"><span class="linenos">232</span></a><span class="sd">            `_o3d_extra_plot_geometries()` or `_mpl_extra_plot_geometries()`</span>
</span><span id="SkeletonBase-233"><a href="#SkeletonBase-233"><span class="linenos">233</span></a><span class="sd">            for each subclass for more information.</span>
</span><span id="SkeletonBase-234"><a href="#SkeletonBase-234"><span class="linenos">234</span></a>
</span><span id="SkeletonBase-235"><a href="#SkeletonBase-235"><span class="linenos">235</span></a><span class="sd">        Returns</span>
</span><span id="SkeletonBase-236"><a href="#SkeletonBase-236"><span class="linenos">236</span></a><span class="sd">        -------</span>
</span><span id="SkeletonBase-237"><a href="#SkeletonBase-237"><span class="linenos">237</span></a><span class="sd">        fig : matplotlib.pyplot.figure</span>
</span><span id="SkeletonBase-238"><a href="#SkeletonBase-238"><span class="linenos">238</span></a><span class="sd">            Figure object, if using matplotlib backend.</span>
</span><span id="SkeletonBase-239"><a href="#SkeletonBase-239"><span class="linenos">239</span></a>
</span><span id="SkeletonBase-240"><a href="#SkeletonBase-240"><span class="linenos">240</span></a><span class="sd">        If using open3d, nothing will be returned.</span>
</span><span id="SkeletonBase-241"><a href="#SkeletonBase-241"><span class="linenos">241</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SkeletonBase-242"><a href="#SkeletonBase-242"><span class="linenos">242</span></a>        <span class="c1"># 2D plotting always uses matplotlib</span>
</span><span id="SkeletonBase-243"><a href="#SkeletonBase-243"><span class="linenos">243</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dim</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="SkeletonBase-244"><a href="#SkeletonBase-244"><span class="linenos">244</span></a>
</span><span id="SkeletonBase-245"><a href="#SkeletonBase-245"><span class="linenos">245</span></a>            <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SkeletonBase-246"><a href="#SkeletonBase-246"><span class="linenos">246</span></a>                <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
</span><span id="SkeletonBase-247"><a href="#SkeletonBase-247"><span class="linenos">247</span></a>                <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">()</span>
</span><span id="SkeletonBase-248"><a href="#SkeletonBase-248"><span class="linenos">248</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="SkeletonBase-249"><a href="#SkeletonBase-249"><span class="linenos">249</span></a>                <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span>
</span><span id="SkeletonBase-250"><a href="#SkeletonBase-250"><span class="linenos">250</span></a>
</span><span id="SkeletonBase-251"><a href="#SkeletonBase-251"><span class="linenos">251</span></a>            <span class="k">if</span> <span class="n">plotSkeleton</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">skeletonPoints</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="SkeletonBase-252"><a href="#SkeletonBase-252"><span class="linenos">252</span></a>                <span class="n">plotSpatialGraph</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">skeletonPoints</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">skeletonAdjMat</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">scatterKwargs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="s1">&#39;tab:blue&#39;</span><span class="p">,</span> <span class="s2">&quot;alpha&quot;</span><span class="p">:</span> <span class="mf">0.6</span><span class="p">})</span>
</span><span id="SkeletonBase-253"><a href="#SkeletonBase-253"><span class="linenos">253</span></a>
</span><span id="SkeletonBase-254"><a href="#SkeletonBase-254"><span class="linenos">254</span></a>            <span class="k">if</span> <span class="n">plotPoints</span><span class="p">:</span>
</span><span id="SkeletonBase-255"><a href="#SkeletonBase-255"><span class="linenos">255</span></a>                <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;tab:purple&#39;</span><span class="p">)</span>
</span><span id="SkeletonBase-256"><a href="#SkeletonBase-256"><span class="linenos">256</span></a>
</span><span id="SkeletonBase-257"><a href="#SkeletonBase-257"><span class="linenos">257</span></a>            <span class="c1"># Plot extra stuff if necessary</span>
</span><span id="SkeletonBase-258"><a href="#SkeletonBase-258"><span class="linenos">258</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_mpl_extra_plot_geometries</span><span class="p">(</span><span class="n">plotPoints</span><span class="p">,</span> <span class="n">plotSkeleton</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="SkeletonBase-259"><a href="#SkeletonBase-259"><span class="linenos">259</span></a>
</span><span id="SkeletonBase-260"><a href="#SkeletonBase-260"><span class="linenos">260</span></a>            <span class="k">return</span> <span class="n">fig</span>
</span><span id="SkeletonBase-261"><a href="#SkeletonBase-261"><span class="linenos">261</span></a>
</span><span id="SkeletonBase-262"><a href="#SkeletonBase-262"><span class="linenos">262</span></a>        <span class="c1"># For 3D we can choose between mpl and o3d</span>
</span><span id="SkeletonBase-263"><a href="#SkeletonBase-263"><span class="linenos">263</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">dim</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
</span><span id="SkeletonBase-264"><a href="#SkeletonBase-264"><span class="linenos">264</span></a>
</span><span id="SkeletonBase-265"><a href="#SkeletonBase-265"><span class="linenos">265</span></a>            <span class="k">if</span> <span class="n">backend</span> <span class="o">==</span> <span class="s1">&#39;mpl&#39;</span><span class="p">:</span>
</span><span id="SkeletonBase-266"><a href="#SkeletonBase-266"><span class="linenos">266</span></a>                <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SkeletonBase-267"><a href="#SkeletonBase-267"><span class="linenos">267</span></a>                    <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
</span><span id="SkeletonBase-268"><a href="#SkeletonBase-268"><span class="linenos">268</span></a>                    <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="s1">&#39;3d&#39;</span><span class="p">)</span>
</span><span id="SkeletonBase-269"><a href="#SkeletonBase-269"><span class="linenos">269</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="SkeletonBase-270"><a href="#SkeletonBase-270"><span class="linenos">270</span></a>                    <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span>
</span><span id="SkeletonBase-271"><a href="#SkeletonBase-271"><span class="linenos">271</span></a>
</span><span id="SkeletonBase-272"><a href="#SkeletonBase-272"><span class="linenos">272</span></a>                <span class="k">if</span> <span class="n">plotSkeleton</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">skeletonPoints</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="SkeletonBase-273"><a href="#SkeletonBase-273"><span class="linenos">273</span></a>                    <span class="n">plotSpatialGraph</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">skeletonPoints</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">skeletonAdjMat</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">scatterKwargs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="s1">&#39;tab:blue&#39;</span><span class="p">,</span> <span class="s2">&quot;alpha&quot;</span><span class="p">:</span> <span class="mf">0.8</span><span class="p">})</span>
</span><span id="SkeletonBase-274"><a href="#SkeletonBase-274"><span class="linenos">274</span></a>
</span><span id="SkeletonBase-275"><a href="#SkeletonBase-275"><span class="linenos">275</span></a>                <span class="k">if</span> <span class="n">plotPoints</span><span class="p">:</span>
</span><span id="SkeletonBase-276"><a href="#SkeletonBase-276"><span class="linenos">276</span></a>                    <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;tab:purple&#39;</span><span class="p">)</span>
</span><span id="SkeletonBase-277"><a href="#SkeletonBase-277"><span class="linenos">277</span></a>
</span><span id="SkeletonBase-278"><a href="#SkeletonBase-278"><span class="linenos">278</span></a>                <span class="c1"># Plot extra stuff if necessary</span>
</span><span id="SkeletonBase-279"><a href="#SkeletonBase-279"><span class="linenos">279</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_mpl_extra_plot_geometries</span><span class="p">(</span><span class="n">plotPoints</span><span class="p">,</span> <span class="n">plotSkeleton</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="SkeletonBase-280"><a href="#SkeletonBase-280"><span class="linenos">280</span></a>
</span><span id="SkeletonBase-281"><a href="#SkeletonBase-281"><span class="linenos">281</span></a>                <span class="k">return</span> <span class="n">fig</span>
</span><span id="SkeletonBase-282"><a href="#SkeletonBase-282"><span class="linenos">282</span></a>
</span><span id="SkeletonBase-283"><a href="#SkeletonBase-283"><span class="linenos">283</span></a>            <span class="k">elif</span> <span class="n">backend</span> <span class="o">==</span> <span class="s1">&#39;o3d&#39;</span><span class="p">:</span>
</span><span id="SkeletonBase-284"><a href="#SkeletonBase-284"><span class="linenos">284</span></a>                <span class="n">geometry</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="SkeletonBase-285"><a href="#SkeletonBase-285"><span class="linenos">285</span></a>
</span><span id="SkeletonBase-286"><a href="#SkeletonBase-286"><span class="linenos">286</span></a>                <span class="k">if</span> <span class="n">plotSkeleton</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">skeletonPoints</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="SkeletonBase-287"><a href="#SkeletonBase-287"><span class="linenos">287</span></a>                    <span class="n">skelPointCloud</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">()</span>
</span><span id="SkeletonBase-288"><a href="#SkeletonBase-288"><span class="linenos">288</span></a>                    <span class="n">skelPointCloud</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">utility</span><span class="o">.</span><span class="n">Vector3dVector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">skeletonPoints</span><span class="p">)</span>
</span><span id="SkeletonBase-289"><a href="#SkeletonBase-289"><span class="linenos">289</span></a>                    <span class="n">skelPointCloud</span><span class="o">.</span><span class="n">paint_uniform_color</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">31</span><span class="p">,</span> <span class="mi">119</span><span class="p">,</span> <span class="mi">180</span><span class="p">])</span><span class="o">/</span><span class="mf">255.</span><span class="p">)</span> <span class="c1"># Tab:blue color</span>
</span><span id="SkeletonBase-290"><a href="#SkeletonBase-290"><span class="linenos">290</span></a>                    <span class="n">geometry</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">skelPointCloud</span><span class="p">)</span>
</span><span id="SkeletonBase-291"><a href="#SkeletonBase-291"><span class="linenos">291</span></a>
</span><span id="SkeletonBase-292"><a href="#SkeletonBase-292"><span class="linenos">292</span></a>                    <span class="c1"># TODO: Allow support for weighted edges (maybe use color?)</span>
</span><span id="SkeletonBase-293"><a href="#SkeletonBase-293"><span class="linenos">293</span></a>                    <span class="n">skelEdges</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">LineSet</span><span class="p">()</span>
</span><span id="SkeletonBase-294"><a href="#SkeletonBase-294"><span class="linenos">294</span></a>                    <span class="n">skelEdges</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">utility</span><span class="o">.</span><span class="n">Vector3dVector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">skeletonPoints</span><span class="p">)</span>
</span><span id="SkeletonBase-295"><a href="#SkeletonBase-295"><span class="linenos">295</span></a>
</span><span id="SkeletonBase-296"><a href="#SkeletonBase-296"><span class="linenos">296</span></a>                    <span class="c1"># Find all indices in the adjacency matrix that are greater than 0</span>
</span><span id="SkeletonBase-297"><a href="#SkeletonBase-297"><span class="linenos">297</span></a>                    <span class="c1"># Code for numpy</span>
</span><span id="SkeletonBase-298"><a href="#SkeletonBase-298"><span class="linenos">298</span></a>                    <span class="n">pairConnections</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">skeletonAdjMat</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
</span><span id="SkeletonBase-299"><a href="#SkeletonBase-299"><span class="linenos">299</span></a>                    <span class="c1"># Code for sparse</span>
</span><span id="SkeletonBase-300"><a href="#SkeletonBase-300"><span class="linenos">300</span></a>                    <span class="c1">#pairConnections = self.skeletonAdjMat.coords.T</span>
</span><span id="SkeletonBase-301"><a href="#SkeletonBase-301"><span class="linenos">301</span></a>                    <span class="c1"># Sort them, so that we can remove duplicates</span>
</span><span id="SkeletonBase-302"><a href="#SkeletonBase-302"><span class="linenos">302</span></a>                    <span class="n">pairConnections</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">pairConnections</span><span class="p">]</span>
</span><span id="SkeletonBase-303"><a href="#SkeletonBase-303"><span class="linenos">303</span></a>                    <span class="c1"># And remove duplicates</span>
</span><span id="SkeletonBase-304"><a href="#SkeletonBase-304"><span class="linenos">304</span></a>                    <span class="n">pairConnections</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">pairConnections</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span><span id="SkeletonBase-305"><a href="#SkeletonBase-305"><span class="linenos">305</span></a>
</span><span id="SkeletonBase-306"><a href="#SkeletonBase-306"><span class="linenos">306</span></a>                    <span class="n">skelEdges</span><span class="o">.</span><span class="n">lines</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">utility</span><span class="o">.</span><span class="n">Vector2iVector</span><span class="p">(</span><span class="n">pairConnections</span><span class="p">)</span>
</span><span id="SkeletonBase-307"><a href="#SkeletonBase-307"><span class="linenos">307</span></a>
</span><span id="SkeletonBase-308"><a href="#SkeletonBase-308"><span class="linenos">308</span></a>                    <span class="n">geometry</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">skelEdges</span><span class="p">)</span>
</span><span id="SkeletonBase-309"><a href="#SkeletonBase-309"><span class="linenos">309</span></a>
</span><span id="SkeletonBase-310"><a href="#SkeletonBase-310"><span class="linenos">310</span></a>                <span class="k">if</span> <span class="n">plotPoints</span><span class="p">:</span>
</span><span id="SkeletonBase-311"><a href="#SkeletonBase-311"><span class="linenos">311</span></a>                    <span class="n">pointCloud</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">()</span>
</span><span id="SkeletonBase-312"><a href="#SkeletonBase-312"><span class="linenos">312</span></a>                    <span class="n">pointCloud</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">utility</span><span class="o">.</span><span class="n">Vector3dVector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="p">)</span>
</span><span id="SkeletonBase-313"><a href="#SkeletonBase-313"><span class="linenos">313</span></a>                    <span class="n">pointCloud</span><span class="o">.</span><span class="n">paint_uniform_color</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">148</span><span class="p">,</span> <span class="mi">103</span><span class="p">,</span> <span class="mi">189</span><span class="p">])</span><span class="o">/</span><span class="mf">255.</span><span class="p">)</span> <span class="c1"># Tab:purple color</span>
</span><span id="SkeletonBase-314"><a href="#SkeletonBase-314"><span class="linenos">314</span></a>                    <span class="n">geometry</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pointCloud</span><span class="p">)</span>
</span><span id="SkeletonBase-315"><a href="#SkeletonBase-315"><span class="linenos">315</span></a>
</span><span id="SkeletonBase-316"><a href="#SkeletonBase-316"><span class="linenos">316</span></a>                <span class="c1"># If any of the implementations of this base class want to</span>
</span><span id="SkeletonBase-317"><a href="#SkeletonBase-317"><span class="linenos">317</span></a>                <span class="c1"># add extra elements to plot, we have support for that.</span>
</span><span id="SkeletonBase-318"><a href="#SkeletonBase-318"><span class="linenos">318</span></a>                <span class="c1"># For example, if an octree algorithm wants to plot the</span>
</span><span id="SkeletonBase-319"><a href="#SkeletonBase-319"><span class="linenos">319</span></a>                <span class="c1"># boxes into which points are divided</span>
</span><span id="SkeletonBase-320"><a href="#SkeletonBase-320"><span class="linenos">320</span></a>                <span class="n">geometry</span> <span class="o">=</span> <span class="n">geometry</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_o3d_extra_plot_geometries</span><span class="p">(</span><span class="n">plotPoints</span><span class="p">,</span> <span class="n">plotSkeleton</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="SkeletonBase-321"><a href="#SkeletonBase-321"><span class="linenos">321</span></a>
</span><span id="SkeletonBase-322"><a href="#SkeletonBase-322"><span class="linenos">322</span></a>                <span class="n">o3d</span><span class="o">.</span><span class="n">visualization</span><span class="o">.</span><span class="n">draw_geometries</span><span class="p">(</span><span class="n">geometry</span><span class="p">)</span>
</span><span id="SkeletonBase-323"><a href="#SkeletonBase-323"><span class="linenos">323</span></a>
</span><span id="SkeletonBase-324"><a href="#SkeletonBase-324"><span class="linenos">324</span></a>
</span><span id="SkeletonBase-325"><a href="#SkeletonBase-325"><span class="linenos">325</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="SkeletonBase-326"><a href="#SkeletonBase-326"><span class="linenos">326</span></a>                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Unrecognized backend (</span><span class="si">{</span><span class="n">backend</span><span class="si">}</span><span class="s1">), please use either </span><span class="se">\&#39;</span><span class="s1">mpl</span><span class="se">\&#39;</span><span class="s1"> or </span><span class="se">\&#39;</span><span class="s1">o3d</span><span class="se">\&#39;</span><span class="s1">.&#39;</span><span class="p">)</span>
</span><span id="SkeletonBase-327"><a href="#SkeletonBase-327"><span class="linenos">327</span></a>
</span><span id="SkeletonBase-328"><a href="#SkeletonBase-328"><span class="linenos">328</span></a>
</span><span id="SkeletonBase-329"><a href="#SkeletonBase-329"><span class="linenos">329</span></a>    <span class="k">def</span> <span class="nf">_o3d_extra_plot_geometries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plotPoints</span><span class="p">,</span> <span class="n">plotSkeleton</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="SkeletonBase-330"><a href="#SkeletonBase-330"><span class="linenos">330</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SkeletonBase-331"><a href="#SkeletonBase-331"><span class="linenos">331</span></a><span class="sd">        Extra geometries to be plotted by the plot() function.</span>
</span><span id="SkeletonBase-332"><a href="#SkeletonBase-332"><span class="linenos">332</span></a>
</span><span id="SkeletonBase-333"><a href="#SkeletonBase-333"><span class="linenos">333</span></a><span class="sd">        To be implemented in the inheriting class if desired.</span>
</span><span id="SkeletonBase-334"><a href="#SkeletonBase-334"><span class="linenos">334</span></a><span class="sd">        In this case, should return a list of Open3D geometries.</span>
</span><span id="SkeletonBase-335"><a href="#SkeletonBase-335"><span class="linenos">335</span></a>
</span><span id="SkeletonBase-336"><a href="#SkeletonBase-336"><span class="linenos">336</span></a><span class="sd">        Returns</span>
</span><span id="SkeletonBase-337"><a href="#SkeletonBase-337"><span class="linenos">337</span></a><span class="sd">        -------</span>
</span><span id="SkeletonBase-338"><a href="#SkeletonBase-338"><span class="linenos">338</span></a><span class="sd">        list(open3d.geometry)</span>
</span><span id="SkeletonBase-339"><a href="#SkeletonBase-339"><span class="linenos">339</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SkeletonBase-340"><a href="#SkeletonBase-340"><span class="linenos">340</span></a>
</span><span id="SkeletonBase-341"><a href="#SkeletonBase-341"><span class="linenos">341</span></a>        <span class="k">return</span> <span class="p">[]</span>
</span><span id="SkeletonBase-342"><a href="#SkeletonBase-342"><span class="linenos">342</span></a>
</span><span id="SkeletonBase-343"><a href="#SkeletonBase-343"><span class="linenos">343</span></a>
</span><span id="SkeletonBase-344"><a href="#SkeletonBase-344"><span class="linenos">344</span></a>    <span class="k">def</span> <span class="nf">_mpl_extra_plot_geometries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plotPoints</span><span class="p">,</span> <span class="n">plotSkeleton</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="SkeletonBase-345"><a href="#SkeletonBase-345"><span class="linenos">345</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SkeletonBase-346"><a href="#SkeletonBase-346"><span class="linenos">346</span></a><span class="sd">        Extra geometries to be plotted by the plot() function.</span>
</span><span id="SkeletonBase-347"><a href="#SkeletonBase-347"><span class="linenos">347</span></a>
</span><span id="SkeletonBase-348"><a href="#SkeletonBase-348"><span class="linenos">348</span></a><span class="sd">        To be implemented in the inheriting class if desired.</span>
</span><span id="SkeletonBase-349"><a href="#SkeletonBase-349"><span class="linenos">349</span></a><span class="sd">        In this case, use the given axis `ax` to plot desired quantities.</span>
</span><span id="SkeletonBase-350"><a href="#SkeletonBase-350"><span class="linenos">350</span></a>
</span><span id="SkeletonBase-351"><a href="#SkeletonBase-351"><span class="linenos">351</span></a><span class="sd">        Returns</span>
</span><span id="SkeletonBase-352"><a href="#SkeletonBase-352"><span class="linenos">352</span></a><span class="sd">        -------</span>
</span><span id="SkeletonBase-353"><a href="#SkeletonBase-353"><span class="linenos">353</span></a><span class="sd">        None</span>
</span><span id="SkeletonBase-354"><a href="#SkeletonBase-354"><span class="linenos">354</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SkeletonBase-355"><a href="#SkeletonBase-355"><span class="linenos">355</span></a>
</span><span id="SkeletonBase-356"><a href="#SkeletonBase-356"><span class="linenos">356</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="SkeletonBase-357"><a href="#SkeletonBase-357"><span class="linenos">357</span></a>
</span><span id="SkeletonBase-358"><a href="#SkeletonBase-358"><span class="linenos">358</span></a>
</span><span id="SkeletonBase-359"><a href="#SkeletonBase-359"><span class="linenos">359</span></a>    <span class="k">def</span> <span class="nf">animate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="SkeletonBase-360"><a href="#SkeletonBase-360"><span class="linenos">360</span></a>                <span class="n">outputFile</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="SkeletonBase-361"><a href="#SkeletonBase-361"><span class="linenos">361</span></a>                <span class="n">plotPoints</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="SkeletonBase-362"><a href="#SkeletonBase-362"><span class="linenos">362</span></a>                <span class="n">plotSkeleton</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="SkeletonBase-363"><a href="#SkeletonBase-363"><span class="linenos">363</span></a>                <span class="n">rotationSpeed</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
</span><span id="SkeletonBase-364"><a href="#SkeletonBase-364"><span class="linenos">364</span></a>                <span class="n">maxFrames</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="SkeletonBase-365"><a href="#SkeletonBase-365"><span class="linenos">365</span></a>                <span class="n">fps</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">pointSize</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span>
</span><span id="SkeletonBase-366"><a href="#SkeletonBase-366"><span class="linenos">366</span></a>                <span class="n">lineWidth</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
</span><span id="SkeletonBase-367"><a href="#SkeletonBase-367"><span class="linenos">367</span></a>                <span class="n">zoom</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>
</span><span id="SkeletonBase-368"><a href="#SkeletonBase-368"><span class="linenos">368</span></a>                <span class="n">initialRotation</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">520</span><span class="p">),</span>
</span><span id="SkeletonBase-369"><a href="#SkeletonBase-369"><span class="linenos">369</span></a>                <span class="n">backgroundColor</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
</span><span id="SkeletonBase-370"><a href="#SkeletonBase-370"><span class="linenos">370</span></a>                <span class="n">crop</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="SkeletonBase-371"><a href="#SkeletonBase-371"><span class="linenos">371</span></a>                <span class="n">cropPadding</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
</span><span id="SkeletonBase-372"><a href="#SkeletonBase-372"><span class="linenos">372</span></a>                <span class="n">outputFormat</span><span class="o">=</span><span class="s1">&#39;gif&#39;</span><span class="p">,</span>
</span><span id="SkeletonBase-373"><a href="#SkeletonBase-373"><span class="linenos">373</span></a>                <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="SkeletonBase-374"><a href="#SkeletonBase-374"><span class="linenos">374</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SkeletonBase-375"><a href="#SkeletonBase-375"><span class="linenos">375</span></a><span class="sd">        Create an animation of the point cloud and/or skeleton rotating.</span>
</span><span id="SkeletonBase-376"><a href="#SkeletonBase-376"><span class="linenos">376</span></a>
</span><span id="SkeletonBase-377"><a href="#SkeletonBase-377"><span class="linenos">377</span></a><span class="sd">        Uses Open3D as the graphical framework.</span>
</span><span id="SkeletonBase-378"><a href="#SkeletonBase-378"><span class="linenos">378</span></a>
</span><span id="SkeletonBase-379"><a href="#SkeletonBase-379"><span class="linenos">379</span></a><span class="sd">        Parameters</span>
</span><span id="SkeletonBase-380"><a href="#SkeletonBase-380"><span class="linenos">380</span></a><span class="sd">        ----------</span>
</span><span id="SkeletonBase-381"><a href="#SkeletonBase-381"><span class="linenos">381</span></a><span class="sd">        outputFile : str, optional</span>
</span><span id="SkeletonBase-382"><a href="#SkeletonBase-382"><span class="linenos">382</span></a><span class="sd">            The name of the animation file that will be saved. If it includes</span>
</span><span id="SkeletonBase-383"><a href="#SkeletonBase-383"><span class="linenos">383</span></a><span class="sd">            an (acceptable) extension, the output type will be automatically</span>
</span><span id="SkeletonBase-384"><a href="#SkeletonBase-384"><span class="linenos">384</span></a><span class="sd">            chosen; otherwise, the output format will be set by the</span>
</span><span id="SkeletonBase-385"><a href="#SkeletonBase-385"><span class="linenos">385</span></a><span class="sd">            kwarg `outputFormat`.</span>
</span><span id="SkeletonBase-386"><a href="#SkeletonBase-386"><span class="linenos">386</span></a>
</span><span id="SkeletonBase-387"><a href="#SkeletonBase-387"><span class="linenos">387</span></a><span class="sd">            If `None`, no file will be saved, the animation will just be</span>
</span><span id="SkeletonBase-388"><a href="#SkeletonBase-388"><span class="linenos">388</span></a><span class="sd">            played.</span>
</span><span id="SkeletonBase-389"><a href="#SkeletonBase-389"><span class="linenos">389</span></a>
</span><span id="SkeletonBase-390"><a href="#SkeletonBase-390"><span class="linenos">390</span></a><span class="sd">        plotPoints : bool</span>
</span><span id="SkeletonBase-391"><a href="#SkeletonBase-391"><span class="linenos">391</span></a><span class="sd">            Whether to plot the point cloud.</span>
</span><span id="SkeletonBase-392"><a href="#SkeletonBase-392"><span class="linenos">392</span></a>
</span><span id="SkeletonBase-393"><a href="#SkeletonBase-393"><span class="linenos">393</span></a><span class="sd">        plotSkeleton : bool</span>
</span><span id="SkeletonBase-394"><a href="#SkeletonBase-394"><span class="linenos">394</span></a><span class="sd">            Whether to plot the derived skeleton nodes and edges.</span>
</span><span id="SkeletonBase-395"><a href="#SkeletonBase-395"><span class="linenos">395</span></a>
</span><span id="SkeletonBase-396"><a href="#SkeletonBase-396"><span class="linenos">396</span></a><span class="sd">        rotationSpeed : int</span>
</span><span id="SkeletonBase-397"><a href="#SkeletonBase-397"><span class="linenos">397</span></a><span class="sd">            The speed of the rotation during the animation.</span>
</span><span id="SkeletonBase-398"><a href="#SkeletonBase-398"><span class="linenos">398</span></a>
</span><span id="SkeletonBase-399"><a href="#SkeletonBase-399"><span class="linenos">399</span></a><span class="sd">        maxFrames : int, optional</span>
</span><span id="SkeletonBase-400"><a href="#SkeletonBase-400"><span class="linenos">400</span></a><span class="sd">            The total number of frames to save; if `None`, no limit will</span>
</span><span id="SkeletonBase-401"><a href="#SkeletonBase-401"><span class="linenos">401</span></a><span class="sd">            be applied.</span>
</span><span id="SkeletonBase-402"><a href="#SkeletonBase-402"><span class="linenos">402</span></a>
</span><span id="SkeletonBase-403"><a href="#SkeletonBase-403"><span class="linenos">403</span></a><span class="sd">            Note that I can&#39;t figure out how to exit a window automatically,</span>
</span><span id="SkeletonBase-404"><a href="#SkeletonBase-404"><span class="linenos">404</span></a><span class="sd">            so the window itself will continue existing until the user manually</span>
</span><span id="SkeletonBase-405"><a href="#SkeletonBase-405"><span class="linenos">405</span></a><span class="sd">            presses &#39;q&#39;, but no more than `maxFrames` will actually be saved.</span>
</span><span id="SkeletonBase-406"><a href="#SkeletonBase-406"><span class="linenos">406</span></a>
</span><span id="SkeletonBase-407"><a href="#SkeletonBase-407"><span class="linenos">407</span></a><span class="sd">        fps : int</span>
</span><span id="SkeletonBase-408"><a href="#SkeletonBase-408"><span class="linenos">408</span></a><span class="sd">            The frames per second of the output animation.</span>
</span><span id="SkeletonBase-409"><a href="#SkeletonBase-409"><span class="linenos">409</span></a>
</span><span id="SkeletonBase-410"><a href="#SkeletonBase-410"><span class="linenos">410</span></a><span class="sd">        pointSize : float</span>
</span><span id="SkeletonBase-411"><a href="#SkeletonBase-411"><span class="linenos">411</span></a><span class="sd">            The size of points for point clouds.</span>
</span><span id="SkeletonBase-412"><a href="#SkeletonBase-412"><span class="linenos">412</span></a>
</span><span id="SkeletonBase-413"><a href="#SkeletonBase-413"><span class="linenos">413</span></a><span class="sd">        lineWidth : float</span>
</span><span id="SkeletonBase-414"><a href="#SkeletonBase-414"><span class="linenos">414</span></a><span class="sd">            The width of lines for line sets (WIP).</span>
</span><span id="SkeletonBase-415"><a href="#SkeletonBase-415"><span class="linenos">415</span></a>
</span><span id="SkeletonBase-416"><a href="#SkeletonBase-416"><span class="linenos">416</span></a><span class="sd">        zoom : float</span>
</span><span id="SkeletonBase-417"><a href="#SkeletonBase-417"><span class="linenos">417</span></a><span class="sd">            The zoom setting for the view.</span>
</span><span id="SkeletonBase-418"><a href="#SkeletonBase-418"><span class="linenos">418</span></a>
</span><span id="SkeletonBase-419"><a href="#SkeletonBase-419"><span class="linenos">419</span></a><span class="sd">        initialRotation : (theta, phi)</span>
</span><span id="SkeletonBase-420"><a href="#SkeletonBase-420"><span class="linenos">420</span></a><span class="sd">            Initial rotation angles. This is based off of</span>
</span><span id="SkeletonBase-421"><a href="#SkeletonBase-421"><span class="linenos">421</span></a><span class="sd">            `open3d.visualization.ViewControl.rotate` method, which</span>
</span><span id="SkeletonBase-422"><a href="#SkeletonBase-422"><span class="linenos">422</span></a><span class="sd">            takes the rotation values in pixels your cursor has</span>
</span><span id="SkeletonBase-423"><a href="#SkeletonBase-423"><span class="linenos">423</span></a><span class="sd">            moved across the screen... not ideal.</span>
</span><span id="SkeletonBase-424"><a href="#SkeletonBase-424"><span class="linenos">424</span></a>
</span><span id="SkeletonBase-425"><a href="#SkeletonBase-425"><span class="linenos">425</span></a><span class="sd">            Roughly 520 pixels gives you a 90 degree rotation.</span>
</span><span id="SkeletonBase-426"><a href="#SkeletonBase-426"><span class="linenos">426</span></a>
</span><span id="SkeletonBase-427"><a href="#SkeletonBase-427"><span class="linenos">427</span></a><span class="sd">        backgroundColor : [float, float, float]</span>
</span><span id="SkeletonBase-428"><a href="#SkeletonBase-428"><span class="linenos">428</span></a><span class="sd">            The background color for the animation.</span>
</span><span id="SkeletonBase-429"><a href="#SkeletonBase-429"><span class="linenos">429</span></a>
</span><span id="SkeletonBase-430"><a href="#SkeletonBase-430"><span class="linenos">430</span></a><span class="sd">        crop : bool, optional</span>
</span><span id="SkeletonBase-431"><a href="#SkeletonBase-431"><span class="linenos">431</span></a><span class="sd">            Whether to crop the animation to a minimal window size (plus</span>
</span><span id="SkeletonBase-432"><a href="#SkeletonBase-432"><span class="linenos">432</span></a><span class="sd">            padding) that only includes pixels that actually change</span>
</span><span id="SkeletonBase-433"><a href="#SkeletonBase-433"><span class="linenos">433</span></a><span class="sd">            during the animation.</span>
</span><span id="SkeletonBase-434"><a href="#SkeletonBase-434"><span class="linenos">434</span></a>
</span><span id="SkeletonBase-435"><a href="#SkeletonBase-435"><span class="linenos">435</span></a><span class="sd">        cropPadding : int</span>
</span><span id="SkeletonBase-436"><a href="#SkeletonBase-436"><span class="linenos">436</span></a><span class="sd">            The amount of padding to add around the animation if</span>
</span><span id="SkeletonBase-437"><a href="#SkeletonBase-437"><span class="linenos">437</span></a><span class="sd">            `crop=True`.</span>
</span><span id="SkeletonBase-438"><a href="#SkeletonBase-438"><span class="linenos">438</span></a>
</span><span id="SkeletonBase-439"><a href="#SkeletonBase-439"><span class="linenos">439</span></a><span class="sd">        outputFormat : &#39;gif&#39; or &#39;mp4&#39;</span>
</span><span id="SkeletonBase-440"><a href="#SkeletonBase-440"><span class="linenos">440</span></a><span class="sd">            The output format for the animation. Overridden if an extension is</span>
</span><span id="SkeletonBase-441"><a href="#SkeletonBase-441"><span class="linenos">441</span></a><span class="sd">            directly included in the file name (`outputFile`).</span>
</span><span id="SkeletonBase-442"><a href="#SkeletonBase-442"><span class="linenos">442</span></a><span class="sd">            </span>
</span><span id="SkeletonBase-443"><a href="#SkeletonBase-443"><span class="linenos">443</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SkeletonBase-444"><a href="#SkeletonBase-444"><span class="linenos">444</span></a>
</span><span id="SkeletonBase-445"><a href="#SkeletonBase-445"><span class="linenos">445</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dim</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="SkeletonBase-446"><a href="#SkeletonBase-446"><span class="linenos">446</span></a>            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Animation not supported for 2D point clouds&#39;</span><span class="p">)</span>
</span><span id="SkeletonBase-447"><a href="#SkeletonBase-447"><span class="linenos">447</span></a>
</span><span id="SkeletonBase-448"><a href="#SkeletonBase-448"><span class="linenos">448</span></a>        <span class="c1"># Import these here since they arent needed in the rest of this</span>
</span><span id="SkeletonBase-449"><a href="#SkeletonBase-449"><span class="linenos">449</span></a>        <span class="c1"># file and this is sortof a debug method</span>
</span><span id="SkeletonBase-450"><a href="#SkeletonBase-450"><span class="linenos">450</span></a>        <span class="kn">import</span> <span class="nn">cv2</span>
</span><span id="SkeletonBase-451"><a href="#SkeletonBase-451"><span class="linenos">451</span></a>        <span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
</span><span id="SkeletonBase-452"><a href="#SkeletonBase-452"><span class="linenos">452</span></a>
</span><span id="SkeletonBase-453"><a href="#SkeletonBase-453"><span class="linenos">453</span></a>        <span class="c1">#############################################</span>
</span><span id="SkeletonBase-454"><a href="#SkeletonBase-454"><span class="linenos">454</span></a>        <span class="c1"># Create our geometries</span>
</span><span id="SkeletonBase-455"><a href="#SkeletonBase-455"><span class="linenos">455</span></a>        <span class="c1">#############################################</span>
</span><span id="SkeletonBase-456"><a href="#SkeletonBase-456"><span class="linenos">456</span></a>        <span class="n">geometry</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="SkeletonBase-457"><a href="#SkeletonBase-457"><span class="linenos">457</span></a>
</span><span id="SkeletonBase-458"><a href="#SkeletonBase-458"><span class="linenos">458</span></a>        <span class="k">if</span> <span class="n">plotSkeleton</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">skeletonPoints</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="SkeletonBase-459"><a href="#SkeletonBase-459"><span class="linenos">459</span></a>            <span class="n">skelPointCloud</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">()</span>
</span><span id="SkeletonBase-460"><a href="#SkeletonBase-460"><span class="linenos">460</span></a>            <span class="n">skelPointCloud</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">utility</span><span class="o">.</span><span class="n">Vector3dVector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">skeletonPoints</span><span class="p">)</span>
</span><span id="SkeletonBase-461"><a href="#SkeletonBase-461"><span class="linenos">461</span></a>            <span class="n">skelPointCloud</span><span class="o">.</span><span class="n">paint_uniform_color</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">31</span><span class="p">,</span> <span class="mi">119</span><span class="p">,</span> <span class="mi">180</span><span class="p">])</span><span class="o">/</span><span class="mf">255.</span><span class="p">)</span> <span class="c1"># Tab:blue color</span>
</span><span id="SkeletonBase-462"><a href="#SkeletonBase-462"><span class="linenos">462</span></a>            <span class="n">geometry</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">skelPointCloud</span><span class="p">)</span>
</span><span id="SkeletonBase-463"><a href="#SkeletonBase-463"><span class="linenos">463</span></a>
</span><span id="SkeletonBase-464"><a href="#SkeletonBase-464"><span class="linenos">464</span></a>            <span class="c1"># TODO: Allow support for weighted edges (maybe use color?)</span>
</span><span id="SkeletonBase-465"><a href="#SkeletonBase-465"><span class="linenos">465</span></a>            <span class="n">skelEdges</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">LineSet</span><span class="p">()</span>
</span><span id="SkeletonBase-466"><a href="#SkeletonBase-466"><span class="linenos">466</span></a>            <span class="n">skelEdges</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">utility</span><span class="o">.</span><span class="n">Vector3dVector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">skeletonPoints</span><span class="p">)</span>
</span><span id="SkeletonBase-467"><a href="#SkeletonBase-467"><span class="linenos">467</span></a>
</span><span id="SkeletonBase-468"><a href="#SkeletonBase-468"><span class="linenos">468</span></a>            <span class="c1"># Find all indices in the adjacency matrix that are greater than 0</span>
</span><span id="SkeletonBase-469"><a href="#SkeletonBase-469"><span class="linenos">469</span></a>            <span class="c1"># Code for numpy</span>
</span><span id="SkeletonBase-470"><a href="#SkeletonBase-470"><span class="linenos">470</span></a>            <span class="n">pairConnections</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">skeletonAdjMat</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
</span><span id="SkeletonBase-471"><a href="#SkeletonBase-471"><span class="linenos">471</span></a>            <span class="c1"># Code for sparse</span>
</span><span id="SkeletonBase-472"><a href="#SkeletonBase-472"><span class="linenos">472</span></a>            <span class="c1">#pairConnections = self.skeletonAdjMat.coords.T</span>
</span><span id="SkeletonBase-473"><a href="#SkeletonBase-473"><span class="linenos">473</span></a>            <span class="c1"># Sort them, so that we can remove duplicates</span>
</span><span id="SkeletonBase-474"><a href="#SkeletonBase-474"><span class="linenos">474</span></a>            <span class="n">pairConnections</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">pairConnections</span><span class="p">]</span>
</span><span id="SkeletonBase-475"><a href="#SkeletonBase-475"><span class="linenos">475</span></a>            <span class="c1"># And remove duplicates</span>
</span><span id="SkeletonBase-476"><a href="#SkeletonBase-476"><span class="linenos">476</span></a>            <span class="n">pairConnections</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">pairConnections</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span><span id="SkeletonBase-477"><a href="#SkeletonBase-477"><span class="linenos">477</span></a>
</span><span id="SkeletonBase-478"><a href="#SkeletonBase-478"><span class="linenos">478</span></a>            <span class="n">skelEdges</span><span class="o">.</span><span class="n">lines</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">utility</span><span class="o">.</span><span class="n">Vector2iVector</span><span class="p">(</span><span class="n">pairConnections</span><span class="p">)</span>
</span><span id="SkeletonBase-479"><a href="#SkeletonBase-479"><span class="linenos">479</span></a>
</span><span id="SkeletonBase-480"><a href="#SkeletonBase-480"><span class="linenos">480</span></a>            <span class="n">geometry</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">skelEdges</span><span class="p">)</span>
</span><span id="SkeletonBase-481"><a href="#SkeletonBase-481"><span class="linenos">481</span></a>
</span><span id="SkeletonBase-482"><a href="#SkeletonBase-482"><span class="linenos">482</span></a>        <span class="k">if</span> <span class="n">plotPoints</span><span class="p">:</span>
</span><span id="SkeletonBase-483"><a href="#SkeletonBase-483"><span class="linenos">483</span></a>            <span class="n">pointCloud</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">()</span>
</span><span id="SkeletonBase-484"><a href="#SkeletonBase-484"><span class="linenos">484</span></a>            <span class="n">pointCloud</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">utility</span><span class="o">.</span><span class="n">Vector3dVector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="p">)</span>
</span><span id="SkeletonBase-485"><a href="#SkeletonBase-485"><span class="linenos">485</span></a>            <span class="n">pointCloud</span><span class="o">.</span><span class="n">paint_uniform_color</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">148</span><span class="p">,</span> <span class="mi">103</span><span class="p">,</span> <span class="mi">189</span><span class="p">])</span><span class="o">/</span><span class="mf">255.</span><span class="p">)</span> <span class="c1"># Tab:purple color</span>
</span><span id="SkeletonBase-486"><a href="#SkeletonBase-486"><span class="linenos">486</span></a>            <span class="n">geometry</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pointCloud</span><span class="p">)</span>
</span><span id="SkeletonBase-487"><a href="#SkeletonBase-487"><span class="linenos">487</span></a>
</span><span id="SkeletonBase-488"><a href="#SkeletonBase-488"><span class="linenos">488</span></a>        <span class="c1"># If any of the implementations of this base class want to</span>
</span><span id="SkeletonBase-489"><a href="#SkeletonBase-489"><span class="linenos">489</span></a>        <span class="c1"># add extra elements to plot, we have support for that.</span>
</span><span id="SkeletonBase-490"><a href="#SkeletonBase-490"><span class="linenos">490</span></a>        <span class="c1"># For example, if an octree algorithm wants to plot the</span>
</span><span id="SkeletonBase-491"><a href="#SkeletonBase-491"><span class="linenos">491</span></a>        <span class="c1"># boxes into which points are divided</span>
</span><span id="SkeletonBase-492"><a href="#SkeletonBase-492"><span class="linenos">492</span></a>        <span class="n">geometry</span> <span class="o">=</span> <span class="n">geometry</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_o3d_extra_plot_geometries</span><span class="p">(</span><span class="n">plotPoints</span><span class="p">,</span> <span class="n">plotSkeleton</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="SkeletonBase-493"><a href="#SkeletonBase-493"><span class="linenos">493</span></a>
</span><span id="SkeletonBase-494"><a href="#SkeletonBase-494"><span class="linenos">494</span></a>        <span class="c1"># Correct for rotation</span>
</span><span id="SkeletonBase-495"><a href="#SkeletonBase-495"><span class="linenos">495</span></a>        <span class="c1"># TODO: Find a better way to do this (can I rotate the view?)</span>
</span><span id="SkeletonBase-496"><a href="#SkeletonBase-496"><span class="linenos">496</span></a>        <span class="c1">#for i in range(len(geometry)):</span>
</span><span id="SkeletonBase-497"><a href="#SkeletonBase-497"><span class="linenos">497</span></a>        <span class="c1">#    geometry[i].points = o3d.utility.Vector3dVector(np.asarray(geometry[i].points)[[0,2,1]])</span>
</span><span id="SkeletonBase-498"><a href="#SkeletonBase-498"><span class="linenos">498</span></a>
</span><span id="SkeletonBase-499"><a href="#SkeletonBase-499"><span class="linenos">499</span></a>        <span class="c1">#############################################</span>
</span><span id="SkeletonBase-500"><a href="#SkeletonBase-500"><span class="linenos">500</span></a>        <span class="c1"># Setup the animation</span>
</span><span id="SkeletonBase-501"><a href="#SkeletonBase-501"><span class="linenos">501</span></a>        <span class="c1">#############################################</span>
</span><span id="SkeletonBase-502"><a href="#SkeletonBase-502"><span class="linenos">502</span></a>        <span class="n">ALLOWED_FORMATS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;gif&#39;</span><span class="p">,</span> <span class="s1">&#39;mp4&#39;</span><span class="p">]</span>
</span><span id="SkeletonBase-503"><a href="#SkeletonBase-503"><span class="linenos">503</span></a>
</span><span id="SkeletonBase-504"><a href="#SkeletonBase-504"><span class="linenos">504</span></a>        <span class="k">if</span> <span class="n">outputFile</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SkeletonBase-505"><a href="#SkeletonBase-505"><span class="linenos">505</span></a>            <span class="c1"># Try to infer the output format from the file name</span>
</span><span id="SkeletonBase-506"><a href="#SkeletonBase-506"><span class="linenos">506</span></a>            <span class="n">potentialExtension</span> <span class="o">=</span> <span class="n">outputFile</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span><span id="SkeletonBase-507"><a href="#SkeletonBase-507"><span class="linenos">507</span></a>            <span class="k">if</span> <span class="n">potentialExtension</span> <span class="ow">in</span> <span class="n">ALLOWED_FORMATS</span><span class="p">:</span>
</span><span id="SkeletonBase-508"><a href="#SkeletonBase-508"><span class="linenos">508</span></a>                <span class="n">outputFormat</span> <span class="o">=</span> <span class="n">potentialExtension</span>
</span><span id="SkeletonBase-509"><a href="#SkeletonBase-509"><span class="linenos">509</span></a>                <span class="n">fullOutputPath</span> <span class="o">=</span> <span class="n">outputFile</span>
</span><span id="SkeletonBase-510"><a href="#SkeletonBase-510"><span class="linenos">510</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="SkeletonBase-511"><a href="#SkeletonBase-511"><span class="linenos">511</span></a>                <span class="c1"># Otherwise, we have to append whatever the provided extension is</span>
</span><span id="SkeletonBase-512"><a href="#SkeletonBase-512"><span class="linenos">512</span></a>                <span class="n">outputFormat</span> <span class="o">=</span> <span class="n">outputFormat</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span><span id="SkeletonBase-513"><a href="#SkeletonBase-513"><span class="linenos">513</span></a>
</span><span id="SkeletonBase-514"><a href="#SkeletonBase-514"><span class="linenos">514</span></a>                <span class="c1"># But first make sure the provided format is allowed</span>
</span><span id="SkeletonBase-515"><a href="#SkeletonBase-515"><span class="linenos">515</span></a>                <span class="k">if</span> <span class="n">outputFormat</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ALLOWED_FORMATS</span><span class="p">:</span>
</span><span id="SkeletonBase-516"><a href="#SkeletonBase-516"><span class="linenos">516</span></a>                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Invalid output format specified: </span><span class="si">{</span><span class="n">outputFormat</span><span class="si">}</span><span class="s1">; available options are </span><span class="si">{</span><span class="n">ALLOWED_FORMATS</span><span class="si">}</span><span class="s1">.&#39;</span><span class="p">)</span>
</span><span id="SkeletonBase-517"><a href="#SkeletonBase-517"><span class="linenos">517</span></a>
</span><span id="SkeletonBase-518"><a href="#SkeletonBase-518"><span class="linenos">518</span></a>                <span class="n">fullOutputPath</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">outputFile</span><span class="si">}</span><span class="s1">.</span><span class="si">{</span><span class="n">outputFormat</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="SkeletonBase-519"><a href="#SkeletonBase-519"><span class="linenos">519</span></a>
</span><span id="SkeletonBase-520"><a href="#SkeletonBase-520"><span class="linenos">520</span></a>        <span class="n">images</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="SkeletonBase-521"><a href="#SkeletonBase-521"><span class="linenos">521</span></a>        <span class="k">global</span> <span class="n">initialRotationApplied</span>
</span><span id="SkeletonBase-522"><a href="#SkeletonBase-522"><span class="linenos">522</span></a>        <span class="n">initialRotationApplied</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="SkeletonBase-523"><a href="#SkeletonBase-523"><span class="linenos">523</span></a>
</span><span id="SkeletonBase-524"><a href="#SkeletonBase-524"><span class="linenos">524</span></a>        <span class="k">def</span> <span class="nf">update_view</span><span class="p">(</span><span class="n">vis</span><span class="p">):</span>
</span><span id="SkeletonBase-525"><a href="#SkeletonBase-525"><span class="linenos">525</span></a>            <span class="k">global</span> <span class="n">initialRotationApplied</span>
</span><span id="SkeletonBase-526"><a href="#SkeletonBase-526"><span class="linenos">526</span></a>
</span><span id="SkeletonBase-527"><a href="#SkeletonBase-527"><span class="linenos">527</span></a>            <span class="n">opt</span> <span class="o">=</span> <span class="n">vis</span><span class="o">.</span><span class="n">get_render_option</span><span class="p">()</span>
</span><span id="SkeletonBase-528"><a href="#SkeletonBase-528"><span class="linenos">528</span></a>            <span class="n">opt</span><span class="o">.</span><span class="n">background_color</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">backgroundColor</span><span class="p">)</span>
</span><span id="SkeletonBase-529"><a href="#SkeletonBase-529"><span class="linenos">529</span></a>
</span><span id="SkeletonBase-530"><a href="#SkeletonBase-530"><span class="linenos">530</span></a>            <span class="n">vis</span><span class="o">.</span><span class="n">get_render_option</span><span class="p">()</span><span class="o">.</span><span class="n">point_size</span> <span class="o">=</span> <span class="n">pointSize</span>
</span><span id="SkeletonBase-531"><a href="#SkeletonBase-531"><span class="linenos">531</span></a>            <span class="n">vis</span><span class="o">.</span><span class="n">get_render_option</span><span class="p">()</span><span class="o">.</span><span class="n">line_width</span> <span class="o">=</span> <span class="n">lineWidth</span>
</span><span id="SkeletonBase-532"><a href="#SkeletonBase-532"><span class="linenos">532</span></a>
</span><span id="SkeletonBase-533"><a href="#SkeletonBase-533"><span class="linenos">533</span></a>            <span class="n">ctr</span> <span class="o">=</span> <span class="n">vis</span><span class="o">.</span><span class="n">get_view_control</span><span class="p">()</span>
</span><span id="SkeletonBase-534"><a href="#SkeletonBase-534"><span class="linenos">534</span></a>
</span><span id="SkeletonBase-535"><a href="#SkeletonBase-535"><span class="linenos">535</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">initialRotationApplied</span><span class="p">:</span>
</span><span id="SkeletonBase-536"><a href="#SkeletonBase-536"><span class="linenos">536</span></a>                <span class="n">ctr</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="o">*</span><span class="n">initialRotation</span><span class="p">)</span>
</span><span id="SkeletonBase-537"><a href="#SkeletonBase-537"><span class="linenos">537</span></a>                <span class="n">initialRotationApplied</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="SkeletonBase-538"><a href="#SkeletonBase-538"><span class="linenos">538</span></a>
</span><span id="SkeletonBase-539"><a href="#SkeletonBase-539"><span class="linenos">539</span></a>            <span class="n">ctr</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">rotationSpeed</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="SkeletonBase-540"><a href="#SkeletonBase-540"><span class="linenos">540</span></a>            <span class="n">ctr</span><span class="o">.</span><span class="n">set_zoom</span><span class="p">(</span><span class="n">zoom</span><span class="p">)</span>
</span><span id="SkeletonBase-541"><a href="#SkeletonBase-541"><span class="linenos">541</span></a>
</span><span id="SkeletonBase-542"><a href="#SkeletonBase-542"><span class="linenos">542</span></a>            <span class="k">if</span> <span class="n">outputFile</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="p">(</span><span class="n">maxFrames</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">images</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">maxFrames</span><span class="p">):</span>
</span><span id="SkeletonBase-543"><a href="#SkeletonBase-543"><span class="linenos">543</span></a>                <span class="n">image</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">vis</span><span class="o">.</span><span class="n">capture_screen_float_buffer</span><span class="p">(</span><span class="kc">False</span><span class="p">))</span><span class="o">*</span><span class="mi">255</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
</span><span id="SkeletonBase-544"><a href="#SkeletonBase-544"><span class="linenos">544</span></a>                <span class="n">images</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">image</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">))</span>
</span><span id="SkeletonBase-545"><a href="#SkeletonBase-545"><span class="linenos">545</span></a>            
</span><span id="SkeletonBase-546"><a href="#SkeletonBase-546"><span class="linenos">546</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="SkeletonBase-547"><a href="#SkeletonBase-547"><span class="linenos">547</span></a>
</span><span id="SkeletonBase-548"><a href="#SkeletonBase-548"><span class="linenos">548</span></a>        <span class="n">o3d</span><span class="o">.</span><span class="n">visualization</span><span class="o">.</span><span class="n">draw_geometries_with_animation_callback</span><span class="p">(</span><span class="n">geometry</span><span class="p">,</span>
</span><span id="SkeletonBase-549"><a href="#SkeletonBase-549"><span class="linenos">549</span></a>                                                                  <span class="n">update_view</span><span class="p">)</span>
</span><span id="SkeletonBase-550"><a href="#SkeletonBase-550"><span class="linenos">550</span></a>
</span><span id="SkeletonBase-551"><a href="#SkeletonBase-551"><span class="linenos">551</span></a>        <span class="k">if</span> <span class="n">outputFile</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SkeletonBase-552"><a href="#SkeletonBase-552"><span class="linenos">552</span></a>            <span class="k">return</span>
</span><span id="SkeletonBase-553"><a href="#SkeletonBase-553"><span class="linenos">553</span></a>
</span><span id="SkeletonBase-554"><a href="#SkeletonBase-554"><span class="linenos">554</span></a>
</span><span id="SkeletonBase-555"><a href="#SkeletonBase-555"><span class="linenos">555</span></a>        <span class="k">if</span> <span class="n">crop</span><span class="p">:</span>
</span><span id="SkeletonBase-556"><a href="#SkeletonBase-556"><span class="linenos">556</span></a>            <span class="c1"># If we want to crop, we should see if there are any pixels that only</span>
</span><span id="SkeletonBase-557"><a href="#SkeletonBase-557"><span class="linenos">557</span></a>            <span class="c1"># ever take on the value of the background color</span>
</span><span id="SkeletonBase-558"><a href="#SkeletonBase-558"><span class="linenos">558</span></a>            <span class="n">usedPixels</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">images</span><span class="p">)</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">backgroundColor</span><span class="p">)</span><span class="o">*</span><span class="mi">255</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span><span id="SkeletonBase-559"><a href="#SkeletonBase-559"><span class="linenos">559</span></a>            <span class="n">usedPixels</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">usedPixels</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
</span><span id="SkeletonBase-560"><a href="#SkeletonBase-560"><span class="linenos">560</span></a>
</span><span id="SkeletonBase-561"><a href="#SkeletonBase-561"><span class="linenos">561</span></a>            <span class="n">usedIndices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">usedPixels</span> <span class="o">&gt;</span> <span class="mf">1e-8</span><span class="p">))</span>
</span><span id="SkeletonBase-562"><a href="#SkeletonBase-562"><span class="linenos">562</span></a>            <span class="n">cropBounds</span> <span class="o">=</span> <span class="p">[</span><span class="nb">max</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">usedIndices</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">-</span><span class="n">cropPadding</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
</span><span id="SkeletonBase-563"><a href="#SkeletonBase-563"><span class="linenos">563</span></a>                          <span class="nb">min</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">usedIndices</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="n">cropPadding</span><span class="p">,</span> <span class="n">images</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
</span><span id="SkeletonBase-564"><a href="#SkeletonBase-564"><span class="linenos">564</span></a>                          <span class="nb">max</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">usedIndices</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">-</span><span class="n">cropPadding</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
</span><span id="SkeletonBase-565"><a href="#SkeletonBase-565"><span class="linenos">565</span></a>                          <span class="nb">min</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">usedIndices</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">+</span><span class="n">cropPadding</span><span class="p">,</span> <span class="n">images</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])]</span>
</span><span id="SkeletonBase-566"><a href="#SkeletonBase-566"><span class="linenos">566</span></a>
</span><span id="SkeletonBase-567"><a href="#SkeletonBase-567"><span class="linenos">567</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="SkeletonBase-568"><a href="#SkeletonBase-568"><span class="linenos">568</span></a>            <span class="n">cropBounds</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">images</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="n">images</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
</span><span id="SkeletonBase-569"><a href="#SkeletonBase-569"><span class="linenos">569</span></a>
</span><span id="SkeletonBase-570"><a href="#SkeletonBase-570"><span class="linenos">570</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">images</span><span class="p">)):</span>
</span><span id="SkeletonBase-571"><a href="#SkeletonBase-571"><span class="linenos">571</span></a>            <span class="n">images</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">images</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">cropBounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span><span class="n">cropBounds</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">cropBounds</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span><span class="n">cropBounds</span><span class="p">[</span><span class="mi">3</span><span class="p">]]</span>
</span><span id="SkeletonBase-572"><a href="#SkeletonBase-572"><span class="linenos">572</span></a>
</span><span id="SkeletonBase-573"><a href="#SkeletonBase-573"><span class="linenos">573</span></a>        <span class="k">if</span> <span class="n">outputFormat</span> <span class="o">==</span> <span class="s1">&#39;mp4&#39;</span><span class="p">:</span>
</span><span id="SkeletonBase-574"><a href="#SkeletonBase-574"><span class="linenos">574</span></a>            <span class="n">fourcc</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">VideoWriter_fourcc</span><span class="p">(</span><span class="o">*</span><span class="s1">&#39;mp4v&#39;</span><span class="p">)</span>
</span><span id="SkeletonBase-575"><a href="#SkeletonBase-575"><span class="linenos">575</span></a>            <span class="n">video</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">VideoWriter</span><span class="p">(</span><span class="n">fullOutputPath</span><span class="p">,</span> <span class="n">fourcc</span><span class="p">,</span> <span class="n">fps</span><span class="p">,</span> <span class="p">(</span><span class="n">images</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">images</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
</span><span id="SkeletonBase-576"><a href="#SkeletonBase-576"><span class="linenos">576</span></a>
</span><span id="SkeletonBase-577"><a href="#SkeletonBase-577"><span class="linenos">577</span></a>            <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">images</span><span class="p">:</span>
</span><span id="SkeletonBase-578"><a href="#SkeletonBase-578"><span class="linenos">578</span></a>                <span class="n">video</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_RGB2BGR</span><span class="p">))</span>
</span><span id="SkeletonBase-579"><a href="#SkeletonBase-579"><span class="linenos">579</span></a>
</span><span id="SkeletonBase-580"><a href="#SkeletonBase-580"><span class="linenos">580</span></a>            <span class="n">video</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
</span><span id="SkeletonBase-581"><a href="#SkeletonBase-581"><span class="linenos">581</span></a>
</span><span id="SkeletonBase-582"><a href="#SkeletonBase-582"><span class="linenos">582</span></a>        <span class="k">if</span> <span class="n">outputFormat</span> <span class="o">==</span> <span class="s1">&#39;gif&#39;</span><span class="p">:</span>
</span><span id="SkeletonBase-583"><a href="#SkeletonBase-583"><span class="linenos">583</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">images</span><span class="p">)):</span>
</span><span id="SkeletonBase-584"><a href="#SkeletonBase-584"><span class="linenos">584</span></a>                <span class="n">images</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">fromarray</span><span class="p">(</span><span class="n">images</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</span><span id="SkeletonBase-585"><a href="#SkeletonBase-585"><span class="linenos">585</span></a>
</span><span id="SkeletonBase-586"><a href="#SkeletonBase-586"><span class="linenos">586</span></a>            <span class="n">images</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">fullOutputPath</span><span class="p">,</span> <span class="n">save_all</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">append_images</span><span class="o">=</span><span class="n">images</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">loop</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">fps</span><span class="o">*</span><span class="mf">1e3</span><span class="p">))</span>
</span></pre></div>


    

                            <div id="SkeletonBase.__init__" class="classattr">
                                        <input id="SkeletonBase.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">SkeletonBase</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">points</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span>)</span>

                <label class="view-source-button" for="SkeletonBase.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SkeletonBase.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SkeletonBase.__init__-112"><a href="#SkeletonBase.__init__-112"><span class="linenos">112</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="SkeletonBase.__init__-113"><a href="#SkeletonBase.__init__-113"><span class="linenos">113</span></a>                 <span class="n">points</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="SkeletonBase.__init__-114"><a href="#SkeletonBase.__init__-114"><span class="linenos">114</span></a>                 <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="SkeletonBase.__init__-115"><a href="#SkeletonBase.__init__-115"><span class="linenos">115</span></a>                 <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="SkeletonBase.__init__-116"><a href="#SkeletonBase.__init__-116"><span class="linenos">116</span></a><span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SkeletonBase.__init__-117"><a href="#SkeletonBase.__init__-117"><span class="linenos">117</span></a><span class="sd">        The base class for a skeletonization algorithm, which implements</span>
</span><span id="SkeletonBase.__init__-118"><a href="#SkeletonBase.__init__-118"><span class="linenos">118</span></a><span class="sd">        methods to plot the skeleton and generate images/movies.</span>
</span><span id="SkeletonBase.__init__-119"><a href="#SkeletonBase.__init__-119"><span class="linenos">119</span></a>
</span><span id="SkeletonBase.__init__-120"><a href="#SkeletonBase.__init__-120"><span class="linenos">120</span></a><span class="sd">        Parameters</span>
</span><span id="SkeletonBase.__init__-121"><a href="#SkeletonBase.__init__-121"><span class="linenos">121</span></a><span class="sd">        ----------</span>
</span><span id="SkeletonBase.__init__-122"><a href="#SkeletonBase.__init__-122"><span class="linenos">122</span></a><span class="sd">        points : numpy.ndarray[N,d]</span>
</span><span id="SkeletonBase.__init__-123"><a href="#SkeletonBase.__init__-123"><span class="linenos">123</span></a><span class="sd">            Point cloud.</span>
</span><span id="SkeletonBase.__init__-124"><a href="#SkeletonBase.__init__-124"><span class="linenos">124</span></a>
</span><span id="SkeletonBase.__init__-125"><a href="#SkeletonBase.__init__-125"><span class="linenos">125</span></a><span class="sd">        verbose : bool</span>
</span><span id="SkeletonBase.__init__-126"><a href="#SkeletonBase.__init__-126"><span class="linenos">126</span></a><span class="sd">            Whether or not to print information during generation.</span>
</span><span id="SkeletonBase.__init__-127"><a href="#SkeletonBase.__init__-127"><span class="linenos">127</span></a>
</span><span id="SkeletonBase.__init__-128"><a href="#SkeletonBase.__init__-128"><span class="linenos">128</span></a><span class="sd">        debug : bool</span>
</span><span id="SkeletonBase.__init__-129"><a href="#SkeletonBase.__init__-129"><span class="linenos">129</span></a><span class="sd">            Whether or not to plot debug figures during generation.</span>
</span><span id="SkeletonBase.__init__-130"><a href="#SkeletonBase.__init__-130"><span class="linenos">130</span></a>
</span><span id="SkeletonBase.__init__-131"><a href="#SkeletonBase.__init__-131"><span class="linenos">131</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SkeletonBase.__init__-132"><a href="#SkeletonBase.__init__-132"><span class="linenos">132</span></a>
</span><span id="SkeletonBase.__init__-133"><a href="#SkeletonBase.__init__-133"><span class="linenos">133</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">verbose</span>
</span><span id="SkeletonBase.__init__-134"><a href="#SkeletonBase.__init__-134"><span class="linenos">134</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">debug</span>
</span><span id="SkeletonBase.__init__-135"><a href="#SkeletonBase.__init__-135"><span class="linenos">135</span></a>
</span><span id="SkeletonBase.__init__-136"><a href="#SkeletonBase.__init__-136"><span class="linenos">136</span></a>        <span class="c1"># The only real benefit of giving the points to this</span>
</span><span id="SkeletonBase.__init__-137"><a href="#SkeletonBase.__init__-137"><span class="linenos">137</span></a>        <span class="c1"># template class is to note the dimension.</span>
</span><span id="SkeletonBase.__init__-138"><a href="#SkeletonBase.__init__-138"><span class="linenos">138</span></a>        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="s1">&#39;__iter__&#39;</span><span class="p">):</span>
</span><span id="SkeletonBase.__init__-139"><a href="#SkeletonBase.__init__-139"><span class="linenos">139</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="n">points</span>
</span><span id="SkeletonBase.__init__-140"><a href="#SkeletonBase.__init__-140"><span class="linenos">140</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">dim</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">shape</span><span class="p">(</span><span class="n">points</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="SkeletonBase.__init__-141"><a href="#SkeletonBase.__init__-141"><span class="linenos">141</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="SkeletonBase.__init__-142"><a href="#SkeletonBase.__init__-142"><span class="linenos">142</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="SkeletonBase.__init__-143"><a href="#SkeletonBase.__init__-143"><span class="linenos">143</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">dim</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="SkeletonBase.__init__-144"><a href="#SkeletonBase.__init__-144"><span class="linenos">144</span></a>
</span><span id="SkeletonBase.__init__-145"><a href="#SkeletonBase.__init__-145"><span class="linenos">145</span></a>        <span class="c1"># TODO: Update this</span>
</span><span id="SkeletonBase.__init__-146"><a href="#SkeletonBase.__init__-146"><span class="linenos">146</span></a>        <span class="c1">#if self.verbose:</span>
</span><span id="SkeletonBase.__init__-147"><a href="#SkeletonBase.__init__-147"><span class="linenos">147</span></a>        <span class="c1">#    logging.basicConfig(format=&#39;%(asctime)s - %(message)s&#39;, level=logging.DEBUG)</span>
</span><span id="SkeletonBase.__init__-148"><a href="#SkeletonBase.__init__-148"><span class="linenos">148</span></a>        <span class="c1">#else:</span>
</span><span id="SkeletonBase.__init__-149"><a href="#SkeletonBase.__init__-149"><span class="linenos">149</span></a>        <span class="c1">#    logging.basicConfig(format=&#39;%(asctime)s - %(message)s&#39;, level=logging.INFO)</span>
</span></pre></div>


            <div class="docstring"><p>The base class for a skeletonization algorithm, which implements
methods to plot the skeleton and generate images/movies.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>points</strong> (numpy.ndarray[N,d]):
Point cloud.</li>
<li><strong>verbose</strong> (bool):
Whether or not to print information during generation.</li>
<li><strong>debug</strong> (bool):
Whether or not to plot debug figures during generation.</li>
</ul>
</div>


                            </div>
                            <div id="SkeletonBase.points" class="classattr">
                                <div class="attr variable">
            <span class="name">points</span>        =
<span class="default_value">array([], shape=(0, 0), dtype=float64)</span>

        
    </div>
    <a class="headerlink" href="#SkeletonBase.points"></a>
    
            <div class="docstring"><p>numpy.ndarray[N,d]</p>

<p>Set of points comprising the point cloud.</p>
</div>


                            </div>
                            <div id="SkeletonBase.skeletonPoints" class="classattr">
                                <div class="attr variable">
            <span class="name">skeletonPoints</span>        =
<span class="default_value">array([], shape=(0, 0), dtype=float64)</span>

        
    </div>
    <a class="headerlink" href="#SkeletonBase.skeletonPoints"></a>
    
            <div class="docstring"><p>numpy.ndarray[M,d]</p>

<p>Set of points comprising the skeleton.</p>
</div>


                            </div>
                            <div id="SkeletonBase.skeletonAdjMat" class="classattr">
                                <div class="attr variable">
            <span class="name">skeletonAdjMat</span>        =
<span class="default_value">&lt;COO: shape=(0, 0), dtype=float64, nnz=0, fill_value=0.0&gt;</span>

        
    </div>
    <a class="headerlink" href="#SkeletonBase.skeletonAdjMat"></a>
    
            <div class="docstring"><p>sparse.COO[M,M]</p>

<p>Adjacency matrix for the skeleton. Stored as a sparse matrix
since there may be a potential very large amount of skeleton points.
Can always be converted to a dense matrix with:</p>

<pre><code>skeletonAdjMat.todense()
</code></pre>
</div>


                            </div>
                            <div id="SkeletonBase.skeletonGraph" class="classattr">
                                <div class="attr variable">
            <span class="name">skeletonGraph</span>        =
<span class="default_value">&lt;networkx.classes.graph.Graph object&gt;</span>

        
    </div>
    <a class="headerlink" href="#SkeletonBase.skeletonGraph"></a>
    
            <div class="docstring"><p>networkx.Graph()</p>

<p>Graph representation of the skeleton.</p>
</div>


                            </div>
                            <div id="SkeletonBase.topologyPoints" class="classattr">
                                <div class="attr variable">
            <span class="name">topologyPoints</span>        =
<span class="default_value">array([], shape=(0, 0), dtype=float64)</span>

        
    </div>
    <a class="headerlink" href="#SkeletonBase.topologyPoints"></a>
    
            <div class="docstring"><p>numpy.ndarray[L,d]</p>

<p>Points for the topological graph, ie. graph with all degree 2 vertices
removed and their neighbors joined.</p>

<p>Computed by this base class's function <code><a href="#SkeletonBase.generateTopology">generateTopology()</a></code>.</p>
</div>


                            </div>
                            <div id="SkeletonBase.topologyAdjMat" class="classattr">
                                <div class="attr variable">
            <span class="name">topologyAdjMat</span>        =
<span class="default_value">&lt;COO: shape=(0, 0), dtype=float64, nnz=0, fill_value=0.0&gt;</span>

        
    </div>
    <a class="headerlink" href="#SkeletonBase.topologyAdjMat"></a>
    
            <div class="docstring"><p>sparse.COO[M,M]</p>

<p>Adjacency matrix for the topological graph. Stored as a sparse matrix.</p>
</div>


                            </div>
                            <div id="SkeletonBase.topologyGraph" class="classattr">
                                <div class="attr variable">
            <span class="name">topologyGraph</span>        =
<span class="default_value">&lt;networkx.classes.graph.Graph object&gt;</span>

        
    </div>
    <a class="headerlink" href="#SkeletonBase.topologyGraph"></a>
    
            <div class="docstring"><p>networkx.Graph()</p>

<p>Graph representation of the topological graph.</p>
</div>


                            </div>
                            <div id="SkeletonBase.verbose" class="classattr">
                                <div class="attr variable">
            <span class="name">verbose</span><span class="annotation">: bool</span>

        
    </div>
    <a class="headerlink" href="#SkeletonBase.verbose"></a>
    
    

                            </div>
                            <div id="SkeletonBase.debug" class="classattr">
                                <div class="attr variable">
            <span class="name">debug</span><span class="annotation">: bool</span>

        
    </div>
    <a class="headerlink" href="#SkeletonBase.debug"></a>
    
    

                            </div>
                            <div id="SkeletonBase.generateTopology" class="classattr">
                                        <input id="SkeletonBase.generateTopology-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">generateTopology</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">keepSpatialEmbedding</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="SkeletonBase.generateTopology-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SkeletonBase.generateTopology"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SkeletonBase.generateTopology-153"><a href="#SkeletonBase.generateTopology-153"><span class="linenos">153</span></a>    <span class="k">def</span> <span class="nf">generateTopology</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="SkeletonBase.generateTopology-154"><a href="#SkeletonBase.generateTopology-154"><span class="linenos">154</span></a>                         <span class="n">keepSpatialEmbedding</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="SkeletonBase.generateTopology-155"><a href="#SkeletonBase.generateTopology-155"><span class="linenos">155</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SkeletonBase.generateTopology-156"><a href="#SkeletonBase.generateTopology-156"><span class="linenos">156</span></a><span class="sd">        Create a copy of the skeleton graph with all vertices of</span>
</span><span id="SkeletonBase.generateTopology-157"><a href="#SkeletonBase.generateTopology-157"><span class="linenos">157</span></a><span class="sd">        degree 2 removed.</span>
</span><span id="SkeletonBase.generateTopology-158"><a href="#SkeletonBase.generateTopology-158"><span class="linenos">158</span></a>
</span><span id="SkeletonBase.generateTopology-159"><a href="#SkeletonBase.generateTopology-159"><span class="linenos">159</span></a><span class="sd">        The spatial embedding can be carried over as well, but likely</span>
</span><span id="SkeletonBase.generateTopology-160"><a href="#SkeletonBase.generateTopology-160"><span class="linenos">160</span></a><span class="sd">        doesn&#39;t mean very much anymore.</span>
</span><span id="SkeletonBase.generateTopology-161"><a href="#SkeletonBase.generateTopology-161"><span class="linenos">161</span></a>
</span><span id="SkeletonBase.generateTopology-162"><a href="#SkeletonBase.generateTopology-162"><span class="linenos">162</span></a><span class="sd">        Parameters</span>
</span><span id="SkeletonBase.generateTopology-163"><a href="#SkeletonBase.generateTopology-163"><span class="linenos">163</span></a><span class="sd">        ----------</span>
</span><span id="SkeletonBase.generateTopology-164"><a href="#SkeletonBase.generateTopology-164"><span class="linenos">164</span></a><span class="sd">        keepSpatialEmbedding : bool</span>
</span><span id="SkeletonBase.generateTopology-165"><a href="#SkeletonBase.generateTopology-165"><span class="linenos">165</span></a><span class="sd">            Whether to carry the spatial embedding from the skeleton</span>
</span><span id="SkeletonBase.generateTopology-166"><a href="#SkeletonBase.generateTopology-166"><span class="linenos">166</span></a><span class="sd">            over to the topology graph (True) or to leave the</span>
</span><span id="SkeletonBase.generateTopology-167"><a href="#SkeletonBase.generateTopology-167"><span class="linenos">167</span></a><span class="sd">            topology graph unembedded (False).</span>
</span><span id="SkeletonBase.generateTopology-168"><a href="#SkeletonBase.generateTopology-168"><span class="linenos">168</span></a>
</span><span id="SkeletonBase.generateTopology-169"><a href="#SkeletonBase.generateTopology-169"><span class="linenos">169</span></a><span class="sd">        Returns</span>
</span><span id="SkeletonBase.generateTopology-170"><a href="#SkeletonBase.generateTopology-170"><span class="linenos">170</span></a><span class="sd">        -------</span>
</span><span id="SkeletonBase.generateTopology-171"><a href="#SkeletonBase.generateTopology-171"><span class="linenos">171</span></a><span class="sd">        topology : networkx.Graph</span>
</span><span id="SkeletonBase.generateTopology-172"><a href="#SkeletonBase.generateTopology-172"><span class="linenos">172</span></a><span class="sd">            Graph representing topology of the skeleton.</span>
</span><span id="SkeletonBase.generateTopology-173"><a href="#SkeletonBase.generateTopology-173"><span class="linenos">173</span></a>
</span><span id="SkeletonBase.generateTopology-174"><a href="#SkeletonBase.generateTopology-174"><span class="linenos">174</span></a><span class="sd">            Also saved as self.topologyGraph</span>
</span><span id="SkeletonBase.generateTopology-175"><a href="#SkeletonBase.generateTopology-175"><span class="linenos">175</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SkeletonBase.generateTopology-176"><a href="#SkeletonBase.generateTopology-176"><span class="linenos">176</span></a>        <span class="c1"># TODO: Remove all degree 2 nodes and then make a networkx graph</span>
</span><span id="SkeletonBase.generateTopology-177"><a href="#SkeletonBase.generateTopology-177"><span class="linenos">177</span></a>        <span class="k">pass</span>
</span></pre></div>


            <div class="docstring"><p>Create a copy of the skeleton graph with all vertices of
degree 2 removed.</p>

<p>The spatial embedding can be carried over as well, but likely
doesn't mean very much anymore.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>keepSpatialEmbedding</strong> (bool):
Whether to carry the spatial embedding from the skeleton
over to the topology graph (True) or to leave the
topology graph unembedded (False).</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><p><strong>topology</strong> (networkx.Graph):
Graph representing topology of the skeleton.</p>

<p>Also saved as self.topologyGraph</p></li>
</ul>
</div>


                            </div>
                            <div id="SkeletonBase.save" class="classattr">
                                        <input id="SkeletonBase.save-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">save</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">output</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="SkeletonBase.save-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SkeletonBase.save"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SkeletonBase.save-180"><a href="#SkeletonBase.save-180"><span class="linenos">180</span></a>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">output</span><span class="p">):</span>
</span><span id="SkeletonBase.save-181"><a href="#SkeletonBase.save-181"><span class="linenos">181</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SkeletonBase.save-182"><a href="#SkeletonBase.save-182"><span class="linenos">182</span></a><span class="sd">        Not implemented! </span>
</span><span id="SkeletonBase.save-183"><a href="#SkeletonBase.save-183"><span class="linenos">183</span></a>
</span><span id="SkeletonBase.save-184"><a href="#SkeletonBase.save-184"><span class="linenos">184</span></a><span class="sd">        Save the resulting skeleton in to a file. Can be written</span>
</span><span id="SkeletonBase.save-185"><a href="#SkeletonBase.save-185"><span class="linenos">185</span></a>
</span><span id="SkeletonBase.save-186"><a href="#SkeletonBase.save-186"><span class="linenos">186</span></a><span class="sd">        Parameters</span>
</span><span id="SkeletonBase.save-187"><a href="#SkeletonBase.save-187"><span class="linenos">187</span></a><span class="sd">        ----------</span>
</span><span id="SkeletonBase.save-188"><a href="#SkeletonBase.save-188"><span class="linenos">188</span></a><span class="sd">        output : str</span>
</span><span id="SkeletonBase.save-189"><a href="#SkeletonBase.save-189"><span class="linenos">189</span></a><span class="sd">            Output file path, including filename. If no</span>
</span><span id="SkeletonBase.save-190"><a href="#SkeletonBase.save-190"><span class="linenos">190</span></a><span class="sd">            extension is given, `.ply` will be used.</span>
</span><span id="SkeletonBase.save-191"><a href="#SkeletonBase.save-191"><span class="linenos">191</span></a>
</span><span id="SkeletonBase.save-192"><a href="#SkeletonBase.save-192"><span class="linenos">192</span></a><span class="sd">        Returns</span>
</span><span id="SkeletonBase.save-193"><a href="#SkeletonBase.save-193"><span class="linenos">193</span></a><span class="sd">        -------</span>
</span><span id="SkeletonBase.save-194"><a href="#SkeletonBase.save-194"><span class="linenos">194</span></a><span class="sd">        None</span>
</span><span id="SkeletonBase.save-195"><a href="#SkeletonBase.save-195"><span class="linenos">195</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SkeletonBase.save-196"><a href="#SkeletonBase.save-196"><span class="linenos">196</span></a>        <span class="c1"># TODO</span>
</span><span id="SkeletonBase.save-197"><a href="#SkeletonBase.save-197"><span class="linenos">197</span></a>        <span class="k">pass</span>
</span></pre></div>


            <div class="docstring"><p>Not implemented! </p>

<p>Save the resulting skeleton in to a file. Can be written</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>output</strong> (str):
Output file path, including filename. If no
extension is given, <code>.ply</code> will be used.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>None</strong></li>
</ul>
</div>


                            </div>
                            <div id="SkeletonBase.plot" class="classattr">
                                        <input id="SkeletonBase.plot-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">plot</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">plotPoints</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>,</span><span class="param">	<span class="n">plotSkeleton</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>,</span><span class="param">	<span class="n">backend</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;mpl&#39;</span>,</span><span class="param">	<span class="n">ax</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="SkeletonBase.plot-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SkeletonBase.plot"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SkeletonBase.plot-200"><a href="#SkeletonBase.plot-200"><span class="linenos">200</span></a>    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="SkeletonBase.plot-201"><a href="#SkeletonBase.plot-201"><span class="linenos">201</span></a>             <span class="n">plotPoints</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="SkeletonBase.plot-202"><a href="#SkeletonBase.plot-202"><span class="linenos">202</span></a>             <span class="n">plotSkeleton</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="SkeletonBase.plot-203"><a href="#SkeletonBase.plot-203"><span class="linenos">203</span></a>             <span class="n">backend</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;mpl&#39;</span><span class="p">,</span>
</span><span id="SkeletonBase.plot-204"><a href="#SkeletonBase.plot-204"><span class="linenos">204</span></a>             <span class="n">ax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="SkeletonBase.plot-205"><a href="#SkeletonBase.plot-205"><span class="linenos">205</span></a>             <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="SkeletonBase.plot-206"><a href="#SkeletonBase.plot-206"><span class="linenos">206</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SkeletonBase.plot-207"><a href="#SkeletonBase.plot-207"><span class="linenos">207</span></a><span class="sd">        Plot the point cloud, skeleton, or other information.</span>
</span><span id="SkeletonBase.plot-208"><a href="#SkeletonBase.plot-208"><span class="linenos">208</span></a>
</span><span id="SkeletonBase.plot-209"><a href="#SkeletonBase.plot-209"><span class="linenos">209</span></a><span class="sd">        Parameters</span>
</span><span id="SkeletonBase.plot-210"><a href="#SkeletonBase.plot-210"><span class="linenos">210</span></a><span class="sd">        ----------</span>
</span><span id="SkeletonBase.plot-211"><a href="#SkeletonBase.plot-211"><span class="linenos">211</span></a><span class="sd">        plotPoints : bool</span>
</span><span id="SkeletonBase.plot-212"><a href="#SkeletonBase.plot-212"><span class="linenos">212</span></a><span class="sd">            Whether to plot the point cloud.</span>
</span><span id="SkeletonBase.plot-213"><a href="#SkeletonBase.plot-213"><span class="linenos">213</span></a>
</span><span id="SkeletonBase.plot-214"><a href="#SkeletonBase.plot-214"><span class="linenos">214</span></a><span class="sd">        plotSkeleton : bool</span>
</span><span id="SkeletonBase.plot-215"><a href="#SkeletonBase.plot-215"><span class="linenos">215</span></a><span class="sd">            Whether to plot the derived skeleton nodes and edges.</span>
</span><span id="SkeletonBase.plot-216"><a href="#SkeletonBase.plot-216"><span class="linenos">216</span></a>
</span><span id="SkeletonBase.plot-217"><a href="#SkeletonBase.plot-217"><span class="linenos">217</span></a><span class="sd">        backend : {&#39;mpl&#39;, &#39;o3d&#39;}</span>
</span><span id="SkeletonBase.plot-218"><a href="#SkeletonBase.plot-218"><span class="linenos">218</span></a><span class="sd">            Which plotting library to use: matplotlib (`&#39;mpl&#39;`) or</span>
</span><span id="SkeletonBase.plot-219"><a href="#SkeletonBase.plot-219"><span class="linenos">219</span></a><span class="sd">            Open3D (`&#39;o3d&#39;`).</span>
</span><span id="SkeletonBase.plot-220"><a href="#SkeletonBase.plot-220"><span class="linenos">220</span></a>
</span><span id="SkeletonBase.plot-221"><a href="#SkeletonBase.plot-221"><span class="linenos">221</span></a><span class="sd">            Open3D is recommended for larger point clouds, as it renders</span>
</span><span id="SkeletonBase.plot-222"><a href="#SkeletonBase.plot-222"><span class="linenos">222</span></a><span class="sd">            much faster than matplotlib.</span>
</span><span id="SkeletonBase.plot-223"><a href="#SkeletonBase.plot-223"><span class="linenos">223</span></a>
</span><span id="SkeletonBase.plot-224"><a href="#SkeletonBase.plot-224"><span class="linenos">224</span></a><span class="sd">        ax : matplotlib.pyplot.axis, optional</span>
</span><span id="SkeletonBase.plot-225"><a href="#SkeletonBase.plot-225"><span class="linenos">225</span></a><span class="sd">            The axis on which to plot the requested information, if</span>
</span><span id="SkeletonBase.plot-226"><a href="#SkeletonBase.plot-226"><span class="linenos">226</span></a><span class="sd">            using the matplotlib backend. If not provided, a new axis</span>
</span><span id="SkeletonBase.plot-227"><a href="#SkeletonBase.plot-227"><span class="linenos">227</span></a><span class="sd">            will be created.</span>
</span><span id="SkeletonBase.plot-228"><a href="#SkeletonBase.plot-228"><span class="linenos">228</span></a>
</span><span id="SkeletonBase.plot-229"><a href="#SkeletonBase.plot-229"><span class="linenos">229</span></a><span class="sd">        kwargs : kwargs</span>
</span><span id="SkeletonBase.plot-230"><a href="#SkeletonBase.plot-230"><span class="linenos">230</span></a><span class="sd">            Other keyword arguments specific to a given skeletonization</span>
</span><span id="SkeletonBase.plot-231"><a href="#SkeletonBase.plot-231"><span class="linenos">231</span></a><span class="sd">            subclass. See individual documentation on</span>
</span><span id="SkeletonBase.plot-232"><a href="#SkeletonBase.plot-232"><span class="linenos">232</span></a><span class="sd">            `_o3d_extra_plot_geometries()` or `_mpl_extra_plot_geometries()`</span>
</span><span id="SkeletonBase.plot-233"><a href="#SkeletonBase.plot-233"><span class="linenos">233</span></a><span class="sd">            for each subclass for more information.</span>
</span><span id="SkeletonBase.plot-234"><a href="#SkeletonBase.plot-234"><span class="linenos">234</span></a>
</span><span id="SkeletonBase.plot-235"><a href="#SkeletonBase.plot-235"><span class="linenos">235</span></a><span class="sd">        Returns</span>
</span><span id="SkeletonBase.plot-236"><a href="#SkeletonBase.plot-236"><span class="linenos">236</span></a><span class="sd">        -------</span>
</span><span id="SkeletonBase.plot-237"><a href="#SkeletonBase.plot-237"><span class="linenos">237</span></a><span class="sd">        fig : matplotlib.pyplot.figure</span>
</span><span id="SkeletonBase.plot-238"><a href="#SkeletonBase.plot-238"><span class="linenos">238</span></a><span class="sd">            Figure object, if using matplotlib backend.</span>
</span><span id="SkeletonBase.plot-239"><a href="#SkeletonBase.plot-239"><span class="linenos">239</span></a>
</span><span id="SkeletonBase.plot-240"><a href="#SkeletonBase.plot-240"><span class="linenos">240</span></a><span class="sd">        If using open3d, nothing will be returned.</span>
</span><span id="SkeletonBase.plot-241"><a href="#SkeletonBase.plot-241"><span class="linenos">241</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SkeletonBase.plot-242"><a href="#SkeletonBase.plot-242"><span class="linenos">242</span></a>        <span class="c1"># 2D plotting always uses matplotlib</span>
</span><span id="SkeletonBase.plot-243"><a href="#SkeletonBase.plot-243"><span class="linenos">243</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dim</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="SkeletonBase.plot-244"><a href="#SkeletonBase.plot-244"><span class="linenos">244</span></a>
</span><span id="SkeletonBase.plot-245"><a href="#SkeletonBase.plot-245"><span class="linenos">245</span></a>            <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SkeletonBase.plot-246"><a href="#SkeletonBase.plot-246"><span class="linenos">246</span></a>                <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
</span><span id="SkeletonBase.plot-247"><a href="#SkeletonBase.plot-247"><span class="linenos">247</span></a>                <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">()</span>
</span><span id="SkeletonBase.plot-248"><a href="#SkeletonBase.plot-248"><span class="linenos">248</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="SkeletonBase.plot-249"><a href="#SkeletonBase.plot-249"><span class="linenos">249</span></a>                <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span>
</span><span id="SkeletonBase.plot-250"><a href="#SkeletonBase.plot-250"><span class="linenos">250</span></a>
</span><span id="SkeletonBase.plot-251"><a href="#SkeletonBase.plot-251"><span class="linenos">251</span></a>            <span class="k">if</span> <span class="n">plotSkeleton</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">skeletonPoints</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="SkeletonBase.plot-252"><a href="#SkeletonBase.plot-252"><span class="linenos">252</span></a>                <span class="n">plotSpatialGraph</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">skeletonPoints</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">skeletonAdjMat</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">scatterKwargs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="s1">&#39;tab:blue&#39;</span><span class="p">,</span> <span class="s2">&quot;alpha&quot;</span><span class="p">:</span> <span class="mf">0.6</span><span class="p">})</span>
</span><span id="SkeletonBase.plot-253"><a href="#SkeletonBase.plot-253"><span class="linenos">253</span></a>
</span><span id="SkeletonBase.plot-254"><a href="#SkeletonBase.plot-254"><span class="linenos">254</span></a>            <span class="k">if</span> <span class="n">plotPoints</span><span class="p">:</span>
</span><span id="SkeletonBase.plot-255"><a href="#SkeletonBase.plot-255"><span class="linenos">255</span></a>                <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;tab:purple&#39;</span><span class="p">)</span>
</span><span id="SkeletonBase.plot-256"><a href="#SkeletonBase.plot-256"><span class="linenos">256</span></a>
</span><span id="SkeletonBase.plot-257"><a href="#SkeletonBase.plot-257"><span class="linenos">257</span></a>            <span class="c1"># Plot extra stuff if necessary</span>
</span><span id="SkeletonBase.plot-258"><a href="#SkeletonBase.plot-258"><span class="linenos">258</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_mpl_extra_plot_geometries</span><span class="p">(</span><span class="n">plotPoints</span><span class="p">,</span> <span class="n">plotSkeleton</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="SkeletonBase.plot-259"><a href="#SkeletonBase.plot-259"><span class="linenos">259</span></a>
</span><span id="SkeletonBase.plot-260"><a href="#SkeletonBase.plot-260"><span class="linenos">260</span></a>            <span class="k">return</span> <span class="n">fig</span>
</span><span id="SkeletonBase.plot-261"><a href="#SkeletonBase.plot-261"><span class="linenos">261</span></a>
</span><span id="SkeletonBase.plot-262"><a href="#SkeletonBase.plot-262"><span class="linenos">262</span></a>        <span class="c1"># For 3D we can choose between mpl and o3d</span>
</span><span id="SkeletonBase.plot-263"><a href="#SkeletonBase.plot-263"><span class="linenos">263</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">dim</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
</span><span id="SkeletonBase.plot-264"><a href="#SkeletonBase.plot-264"><span class="linenos">264</span></a>
</span><span id="SkeletonBase.plot-265"><a href="#SkeletonBase.plot-265"><span class="linenos">265</span></a>            <span class="k">if</span> <span class="n">backend</span> <span class="o">==</span> <span class="s1">&#39;mpl&#39;</span><span class="p">:</span>
</span><span id="SkeletonBase.plot-266"><a href="#SkeletonBase.plot-266"><span class="linenos">266</span></a>                <span class="k">if</span> <span class="n">ax</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SkeletonBase.plot-267"><a href="#SkeletonBase.plot-267"><span class="linenos">267</span></a>                    <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
</span><span id="SkeletonBase.plot-268"><a href="#SkeletonBase.plot-268"><span class="linenos">268</span></a>                    <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="s1">&#39;3d&#39;</span><span class="p">)</span>
</span><span id="SkeletonBase.plot-269"><a href="#SkeletonBase.plot-269"><span class="linenos">269</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="SkeletonBase.plot-270"><a href="#SkeletonBase.plot-270"><span class="linenos">270</span></a>                    <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span>
</span><span id="SkeletonBase.plot-271"><a href="#SkeletonBase.plot-271"><span class="linenos">271</span></a>
</span><span id="SkeletonBase.plot-272"><a href="#SkeletonBase.plot-272"><span class="linenos">272</span></a>                <span class="k">if</span> <span class="n">plotSkeleton</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">skeletonPoints</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="SkeletonBase.plot-273"><a href="#SkeletonBase.plot-273"><span class="linenos">273</span></a>                    <span class="n">plotSpatialGraph</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">skeletonPoints</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">skeletonAdjMat</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">scatterKwargs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="s1">&#39;tab:blue&#39;</span><span class="p">,</span> <span class="s2">&quot;alpha&quot;</span><span class="p">:</span> <span class="mf">0.8</span><span class="p">})</span>
</span><span id="SkeletonBase.plot-274"><a href="#SkeletonBase.plot-274"><span class="linenos">274</span></a>
</span><span id="SkeletonBase.plot-275"><a href="#SkeletonBase.plot-275"><span class="linenos">275</span></a>                <span class="k">if</span> <span class="n">plotPoints</span><span class="p">:</span>
</span><span id="SkeletonBase.plot-276"><a href="#SkeletonBase.plot-276"><span class="linenos">276</span></a>                    <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;tab:purple&#39;</span><span class="p">)</span>
</span><span id="SkeletonBase.plot-277"><a href="#SkeletonBase.plot-277"><span class="linenos">277</span></a>
</span><span id="SkeletonBase.plot-278"><a href="#SkeletonBase.plot-278"><span class="linenos">278</span></a>                <span class="c1"># Plot extra stuff if necessary</span>
</span><span id="SkeletonBase.plot-279"><a href="#SkeletonBase.plot-279"><span class="linenos">279</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_mpl_extra_plot_geometries</span><span class="p">(</span><span class="n">plotPoints</span><span class="p">,</span> <span class="n">plotSkeleton</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="SkeletonBase.plot-280"><a href="#SkeletonBase.plot-280"><span class="linenos">280</span></a>
</span><span id="SkeletonBase.plot-281"><a href="#SkeletonBase.plot-281"><span class="linenos">281</span></a>                <span class="k">return</span> <span class="n">fig</span>
</span><span id="SkeletonBase.plot-282"><a href="#SkeletonBase.plot-282"><span class="linenos">282</span></a>
</span><span id="SkeletonBase.plot-283"><a href="#SkeletonBase.plot-283"><span class="linenos">283</span></a>            <span class="k">elif</span> <span class="n">backend</span> <span class="o">==</span> <span class="s1">&#39;o3d&#39;</span><span class="p">:</span>
</span><span id="SkeletonBase.plot-284"><a href="#SkeletonBase.plot-284"><span class="linenos">284</span></a>                <span class="n">geometry</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="SkeletonBase.plot-285"><a href="#SkeletonBase.plot-285"><span class="linenos">285</span></a>
</span><span id="SkeletonBase.plot-286"><a href="#SkeletonBase.plot-286"><span class="linenos">286</span></a>                <span class="k">if</span> <span class="n">plotSkeleton</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">skeletonPoints</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="SkeletonBase.plot-287"><a href="#SkeletonBase.plot-287"><span class="linenos">287</span></a>                    <span class="n">skelPointCloud</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">()</span>
</span><span id="SkeletonBase.plot-288"><a href="#SkeletonBase.plot-288"><span class="linenos">288</span></a>                    <span class="n">skelPointCloud</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">utility</span><span class="o">.</span><span class="n">Vector3dVector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">skeletonPoints</span><span class="p">)</span>
</span><span id="SkeletonBase.plot-289"><a href="#SkeletonBase.plot-289"><span class="linenos">289</span></a>                    <span class="n">skelPointCloud</span><span class="o">.</span><span class="n">paint_uniform_color</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">31</span><span class="p">,</span> <span class="mi">119</span><span class="p">,</span> <span class="mi">180</span><span class="p">])</span><span class="o">/</span><span class="mf">255.</span><span class="p">)</span> <span class="c1"># Tab:blue color</span>
</span><span id="SkeletonBase.plot-290"><a href="#SkeletonBase.plot-290"><span class="linenos">290</span></a>                    <span class="n">geometry</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">skelPointCloud</span><span class="p">)</span>
</span><span id="SkeletonBase.plot-291"><a href="#SkeletonBase.plot-291"><span class="linenos">291</span></a>
</span><span id="SkeletonBase.plot-292"><a href="#SkeletonBase.plot-292"><span class="linenos">292</span></a>                    <span class="c1"># TODO: Allow support for weighted edges (maybe use color?)</span>
</span><span id="SkeletonBase.plot-293"><a href="#SkeletonBase.plot-293"><span class="linenos">293</span></a>                    <span class="n">skelEdges</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">LineSet</span><span class="p">()</span>
</span><span id="SkeletonBase.plot-294"><a href="#SkeletonBase.plot-294"><span class="linenos">294</span></a>                    <span class="n">skelEdges</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">utility</span><span class="o">.</span><span class="n">Vector3dVector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">skeletonPoints</span><span class="p">)</span>
</span><span id="SkeletonBase.plot-295"><a href="#SkeletonBase.plot-295"><span class="linenos">295</span></a>
</span><span id="SkeletonBase.plot-296"><a href="#SkeletonBase.plot-296"><span class="linenos">296</span></a>                    <span class="c1"># Find all indices in the adjacency matrix that are greater than 0</span>
</span><span id="SkeletonBase.plot-297"><a href="#SkeletonBase.plot-297"><span class="linenos">297</span></a>                    <span class="c1"># Code for numpy</span>
</span><span id="SkeletonBase.plot-298"><a href="#SkeletonBase.plot-298"><span class="linenos">298</span></a>                    <span class="n">pairConnections</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">skeletonAdjMat</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
</span><span id="SkeletonBase.plot-299"><a href="#SkeletonBase.plot-299"><span class="linenos">299</span></a>                    <span class="c1"># Code for sparse</span>
</span><span id="SkeletonBase.plot-300"><a href="#SkeletonBase.plot-300"><span class="linenos">300</span></a>                    <span class="c1">#pairConnections = self.skeletonAdjMat.coords.T</span>
</span><span id="SkeletonBase.plot-301"><a href="#SkeletonBase.plot-301"><span class="linenos">301</span></a>                    <span class="c1"># Sort them, so that we can remove duplicates</span>
</span><span id="SkeletonBase.plot-302"><a href="#SkeletonBase.plot-302"><span class="linenos">302</span></a>                    <span class="n">pairConnections</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">pairConnections</span><span class="p">]</span>
</span><span id="SkeletonBase.plot-303"><a href="#SkeletonBase.plot-303"><span class="linenos">303</span></a>                    <span class="c1"># And remove duplicates</span>
</span><span id="SkeletonBase.plot-304"><a href="#SkeletonBase.plot-304"><span class="linenos">304</span></a>                    <span class="n">pairConnections</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">pairConnections</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span><span id="SkeletonBase.plot-305"><a href="#SkeletonBase.plot-305"><span class="linenos">305</span></a>
</span><span id="SkeletonBase.plot-306"><a href="#SkeletonBase.plot-306"><span class="linenos">306</span></a>                    <span class="n">skelEdges</span><span class="o">.</span><span class="n">lines</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">utility</span><span class="o">.</span><span class="n">Vector2iVector</span><span class="p">(</span><span class="n">pairConnections</span><span class="p">)</span>
</span><span id="SkeletonBase.plot-307"><a href="#SkeletonBase.plot-307"><span class="linenos">307</span></a>
</span><span id="SkeletonBase.plot-308"><a href="#SkeletonBase.plot-308"><span class="linenos">308</span></a>                    <span class="n">geometry</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">skelEdges</span><span class="p">)</span>
</span><span id="SkeletonBase.plot-309"><a href="#SkeletonBase.plot-309"><span class="linenos">309</span></a>
</span><span id="SkeletonBase.plot-310"><a href="#SkeletonBase.plot-310"><span class="linenos">310</span></a>                <span class="k">if</span> <span class="n">plotPoints</span><span class="p">:</span>
</span><span id="SkeletonBase.plot-311"><a href="#SkeletonBase.plot-311"><span class="linenos">311</span></a>                    <span class="n">pointCloud</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">()</span>
</span><span id="SkeletonBase.plot-312"><a href="#SkeletonBase.plot-312"><span class="linenos">312</span></a>                    <span class="n">pointCloud</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">utility</span><span class="o">.</span><span class="n">Vector3dVector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="p">)</span>
</span><span id="SkeletonBase.plot-313"><a href="#SkeletonBase.plot-313"><span class="linenos">313</span></a>                    <span class="n">pointCloud</span><span class="o">.</span><span class="n">paint_uniform_color</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">148</span><span class="p">,</span> <span class="mi">103</span><span class="p">,</span> <span class="mi">189</span><span class="p">])</span><span class="o">/</span><span class="mf">255.</span><span class="p">)</span> <span class="c1"># Tab:purple color</span>
</span><span id="SkeletonBase.plot-314"><a href="#SkeletonBase.plot-314"><span class="linenos">314</span></a>                    <span class="n">geometry</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pointCloud</span><span class="p">)</span>
</span><span id="SkeletonBase.plot-315"><a href="#SkeletonBase.plot-315"><span class="linenos">315</span></a>
</span><span id="SkeletonBase.plot-316"><a href="#SkeletonBase.plot-316"><span class="linenos">316</span></a>                <span class="c1"># If any of the implementations of this base class want to</span>
</span><span id="SkeletonBase.plot-317"><a href="#SkeletonBase.plot-317"><span class="linenos">317</span></a>                <span class="c1"># add extra elements to plot, we have support for that.</span>
</span><span id="SkeletonBase.plot-318"><a href="#SkeletonBase.plot-318"><span class="linenos">318</span></a>                <span class="c1"># For example, if an octree algorithm wants to plot the</span>
</span><span id="SkeletonBase.plot-319"><a href="#SkeletonBase.plot-319"><span class="linenos">319</span></a>                <span class="c1"># boxes into which points are divided</span>
</span><span id="SkeletonBase.plot-320"><a href="#SkeletonBase.plot-320"><span class="linenos">320</span></a>                <span class="n">geometry</span> <span class="o">=</span> <span class="n">geometry</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_o3d_extra_plot_geometries</span><span class="p">(</span><span class="n">plotPoints</span><span class="p">,</span> <span class="n">plotSkeleton</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="SkeletonBase.plot-321"><a href="#SkeletonBase.plot-321"><span class="linenos">321</span></a>
</span><span id="SkeletonBase.plot-322"><a href="#SkeletonBase.plot-322"><span class="linenos">322</span></a>                <span class="n">o3d</span><span class="o">.</span><span class="n">visualization</span><span class="o">.</span><span class="n">draw_geometries</span><span class="p">(</span><span class="n">geometry</span><span class="p">)</span>
</span><span id="SkeletonBase.plot-323"><a href="#SkeletonBase.plot-323"><span class="linenos">323</span></a>
</span><span id="SkeletonBase.plot-324"><a href="#SkeletonBase.plot-324"><span class="linenos">324</span></a>
</span><span id="SkeletonBase.plot-325"><a href="#SkeletonBase.plot-325"><span class="linenos">325</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="SkeletonBase.plot-326"><a href="#SkeletonBase.plot-326"><span class="linenos">326</span></a>                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Unrecognized backend (</span><span class="si">{</span><span class="n">backend</span><span class="si">}</span><span class="s1">), please use either </span><span class="se">\&#39;</span><span class="s1">mpl</span><span class="se">\&#39;</span><span class="s1"> or </span><span class="se">\&#39;</span><span class="s1">o3d</span><span class="se">\&#39;</span><span class="s1">.&#39;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Plot the point cloud, skeleton, or other information.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>plotPoints</strong> (bool):
Whether to plot the point cloud.</li>
<li><strong>plotSkeleton</strong> (bool):
Whether to plot the derived skeleton nodes and edges.</li>
<li><p><strong>backend</strong> ({'mpl', 'o3d'}):
Which plotting library to use: matplotlib (<code>'mpl'</code>) or
Open3D (<code>'o3d'</code>).</p>

<p>Open3D is recommended for larger point clouds, as it renders
much faster than matplotlib.</p></li>
<li><strong>ax</strong> (matplotlib.pyplot.axis, optional):
The axis on which to plot the requested information, if
using the matplotlib backend. If not provided, a new axis
will be created.</li>
<li><strong>kwargs</strong> (kwargs):
Other keyword arguments specific to a given skeletonization
subclass. See individual documentation on
<code>_o3d_extra_plot_geometries()</code> or <code>_mpl_extra_plot_geometries()</code>
for each subclass for more information.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>fig</strong> (matplotlib.pyplot.figure):
Figure object, if using matplotlib backend.</li>
<li><strong>If using open3d, nothing will be returned.</strong></li>
</ul>
</div>


                            </div>
                            <div id="SkeletonBase.animate" class="classattr">
                                        <input id="SkeletonBase.animate-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">animate</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">outputFile</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">plotPoints</span><span class="o">=</span><span class="kc">True</span>,</span><span class="param">	<span class="n">plotSkeleton</span><span class="o">=</span><span class="kc">True</span>,</span><span class="param">	<span class="n">rotationSpeed</span><span class="o">=</span><span class="mi">5</span>,</span><span class="param">	<span class="n">maxFrames</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">fps</span><span class="o">=</span><span class="mi">30</span>,</span><span class="param">	<span class="n">pointSize</span><span class="o">=</span><span class="mi">7</span>,</span><span class="param">	<span class="n">lineWidth</span><span class="o">=</span><span class="mi">5</span>,</span><span class="param">	<span class="n">zoom</span><span class="o">=</span><span class="mf">0.8</span>,</span><span class="param">	<span class="n">initialRotation</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">520</span><span class="p">)</span>,</span><span class="param">	<span class="n">backgroundColor</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>,</span><span class="param">	<span class="n">crop</span><span class="o">=</span><span class="kc">False</span>,</span><span class="param">	<span class="n">cropPadding</span><span class="o">=</span><span class="mi">10</span>,</span><span class="param">	<span class="n">outputFormat</span><span class="o">=</span><span class="s1">&#39;gif&#39;</span>,</span><span class="param">	<span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="SkeletonBase.animate-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#SkeletonBase.animate"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="SkeletonBase.animate-359"><a href="#SkeletonBase.animate-359"><span class="linenos">359</span></a>    <span class="k">def</span> <span class="nf">animate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="SkeletonBase.animate-360"><a href="#SkeletonBase.animate-360"><span class="linenos">360</span></a>                <span class="n">outputFile</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="SkeletonBase.animate-361"><a href="#SkeletonBase.animate-361"><span class="linenos">361</span></a>                <span class="n">plotPoints</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="SkeletonBase.animate-362"><a href="#SkeletonBase.animate-362"><span class="linenos">362</span></a>                <span class="n">plotSkeleton</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="SkeletonBase.animate-363"><a href="#SkeletonBase.animate-363"><span class="linenos">363</span></a>                <span class="n">rotationSpeed</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
</span><span id="SkeletonBase.animate-364"><a href="#SkeletonBase.animate-364"><span class="linenos">364</span></a>                <span class="n">maxFrames</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="SkeletonBase.animate-365"><a href="#SkeletonBase.animate-365"><span class="linenos">365</span></a>                <span class="n">fps</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">pointSize</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span>
</span><span id="SkeletonBase.animate-366"><a href="#SkeletonBase.animate-366"><span class="linenos">366</span></a>                <span class="n">lineWidth</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
</span><span id="SkeletonBase.animate-367"><a href="#SkeletonBase.animate-367"><span class="linenos">367</span></a>                <span class="n">zoom</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span>
</span><span id="SkeletonBase.animate-368"><a href="#SkeletonBase.animate-368"><span class="linenos">368</span></a>                <span class="n">initialRotation</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">520</span><span class="p">),</span>
</span><span id="SkeletonBase.animate-369"><a href="#SkeletonBase.animate-369"><span class="linenos">369</span></a>                <span class="n">backgroundColor</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span>
</span><span id="SkeletonBase.animate-370"><a href="#SkeletonBase.animate-370"><span class="linenos">370</span></a>                <span class="n">crop</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="SkeletonBase.animate-371"><a href="#SkeletonBase.animate-371"><span class="linenos">371</span></a>                <span class="n">cropPadding</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
</span><span id="SkeletonBase.animate-372"><a href="#SkeletonBase.animate-372"><span class="linenos">372</span></a>                <span class="n">outputFormat</span><span class="o">=</span><span class="s1">&#39;gif&#39;</span><span class="p">,</span>
</span><span id="SkeletonBase.animate-373"><a href="#SkeletonBase.animate-373"><span class="linenos">373</span></a>                <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="SkeletonBase.animate-374"><a href="#SkeletonBase.animate-374"><span class="linenos">374</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="SkeletonBase.animate-375"><a href="#SkeletonBase.animate-375"><span class="linenos">375</span></a><span class="sd">        Create an animation of the point cloud and/or skeleton rotating.</span>
</span><span id="SkeletonBase.animate-376"><a href="#SkeletonBase.animate-376"><span class="linenos">376</span></a>
</span><span id="SkeletonBase.animate-377"><a href="#SkeletonBase.animate-377"><span class="linenos">377</span></a><span class="sd">        Uses Open3D as the graphical framework.</span>
</span><span id="SkeletonBase.animate-378"><a href="#SkeletonBase.animate-378"><span class="linenos">378</span></a>
</span><span id="SkeletonBase.animate-379"><a href="#SkeletonBase.animate-379"><span class="linenos">379</span></a><span class="sd">        Parameters</span>
</span><span id="SkeletonBase.animate-380"><a href="#SkeletonBase.animate-380"><span class="linenos">380</span></a><span class="sd">        ----------</span>
</span><span id="SkeletonBase.animate-381"><a href="#SkeletonBase.animate-381"><span class="linenos">381</span></a><span class="sd">        outputFile : str, optional</span>
</span><span id="SkeletonBase.animate-382"><a href="#SkeletonBase.animate-382"><span class="linenos">382</span></a><span class="sd">            The name of the animation file that will be saved. If it includes</span>
</span><span id="SkeletonBase.animate-383"><a href="#SkeletonBase.animate-383"><span class="linenos">383</span></a><span class="sd">            an (acceptable) extension, the output type will be automatically</span>
</span><span id="SkeletonBase.animate-384"><a href="#SkeletonBase.animate-384"><span class="linenos">384</span></a><span class="sd">            chosen; otherwise, the output format will be set by the</span>
</span><span id="SkeletonBase.animate-385"><a href="#SkeletonBase.animate-385"><span class="linenos">385</span></a><span class="sd">            kwarg `outputFormat`.</span>
</span><span id="SkeletonBase.animate-386"><a href="#SkeletonBase.animate-386"><span class="linenos">386</span></a>
</span><span id="SkeletonBase.animate-387"><a href="#SkeletonBase.animate-387"><span class="linenos">387</span></a><span class="sd">            If `None`, no file will be saved, the animation will just be</span>
</span><span id="SkeletonBase.animate-388"><a href="#SkeletonBase.animate-388"><span class="linenos">388</span></a><span class="sd">            played.</span>
</span><span id="SkeletonBase.animate-389"><a href="#SkeletonBase.animate-389"><span class="linenos">389</span></a>
</span><span id="SkeletonBase.animate-390"><a href="#SkeletonBase.animate-390"><span class="linenos">390</span></a><span class="sd">        plotPoints : bool</span>
</span><span id="SkeletonBase.animate-391"><a href="#SkeletonBase.animate-391"><span class="linenos">391</span></a><span class="sd">            Whether to plot the point cloud.</span>
</span><span id="SkeletonBase.animate-392"><a href="#SkeletonBase.animate-392"><span class="linenos">392</span></a>
</span><span id="SkeletonBase.animate-393"><a href="#SkeletonBase.animate-393"><span class="linenos">393</span></a><span class="sd">        plotSkeleton : bool</span>
</span><span id="SkeletonBase.animate-394"><a href="#SkeletonBase.animate-394"><span class="linenos">394</span></a><span class="sd">            Whether to plot the derived skeleton nodes and edges.</span>
</span><span id="SkeletonBase.animate-395"><a href="#SkeletonBase.animate-395"><span class="linenos">395</span></a>
</span><span id="SkeletonBase.animate-396"><a href="#SkeletonBase.animate-396"><span class="linenos">396</span></a><span class="sd">        rotationSpeed : int</span>
</span><span id="SkeletonBase.animate-397"><a href="#SkeletonBase.animate-397"><span class="linenos">397</span></a><span class="sd">            The speed of the rotation during the animation.</span>
</span><span id="SkeletonBase.animate-398"><a href="#SkeletonBase.animate-398"><span class="linenos">398</span></a>
</span><span id="SkeletonBase.animate-399"><a href="#SkeletonBase.animate-399"><span class="linenos">399</span></a><span class="sd">        maxFrames : int, optional</span>
</span><span id="SkeletonBase.animate-400"><a href="#SkeletonBase.animate-400"><span class="linenos">400</span></a><span class="sd">            The total number of frames to save; if `None`, no limit will</span>
</span><span id="SkeletonBase.animate-401"><a href="#SkeletonBase.animate-401"><span class="linenos">401</span></a><span class="sd">            be applied.</span>
</span><span id="SkeletonBase.animate-402"><a href="#SkeletonBase.animate-402"><span class="linenos">402</span></a>
</span><span id="SkeletonBase.animate-403"><a href="#SkeletonBase.animate-403"><span class="linenos">403</span></a><span class="sd">            Note that I can&#39;t figure out how to exit a window automatically,</span>
</span><span id="SkeletonBase.animate-404"><a href="#SkeletonBase.animate-404"><span class="linenos">404</span></a><span class="sd">            so the window itself will continue existing until the user manually</span>
</span><span id="SkeletonBase.animate-405"><a href="#SkeletonBase.animate-405"><span class="linenos">405</span></a><span class="sd">            presses &#39;q&#39;, but no more than `maxFrames` will actually be saved.</span>
</span><span id="SkeletonBase.animate-406"><a href="#SkeletonBase.animate-406"><span class="linenos">406</span></a>
</span><span id="SkeletonBase.animate-407"><a href="#SkeletonBase.animate-407"><span class="linenos">407</span></a><span class="sd">        fps : int</span>
</span><span id="SkeletonBase.animate-408"><a href="#SkeletonBase.animate-408"><span class="linenos">408</span></a><span class="sd">            The frames per second of the output animation.</span>
</span><span id="SkeletonBase.animate-409"><a href="#SkeletonBase.animate-409"><span class="linenos">409</span></a>
</span><span id="SkeletonBase.animate-410"><a href="#SkeletonBase.animate-410"><span class="linenos">410</span></a><span class="sd">        pointSize : float</span>
</span><span id="SkeletonBase.animate-411"><a href="#SkeletonBase.animate-411"><span class="linenos">411</span></a><span class="sd">            The size of points for point clouds.</span>
</span><span id="SkeletonBase.animate-412"><a href="#SkeletonBase.animate-412"><span class="linenos">412</span></a>
</span><span id="SkeletonBase.animate-413"><a href="#SkeletonBase.animate-413"><span class="linenos">413</span></a><span class="sd">        lineWidth : float</span>
</span><span id="SkeletonBase.animate-414"><a href="#SkeletonBase.animate-414"><span class="linenos">414</span></a><span class="sd">            The width of lines for line sets (WIP).</span>
</span><span id="SkeletonBase.animate-415"><a href="#SkeletonBase.animate-415"><span class="linenos">415</span></a>
</span><span id="SkeletonBase.animate-416"><a href="#SkeletonBase.animate-416"><span class="linenos">416</span></a><span class="sd">        zoom : float</span>
</span><span id="SkeletonBase.animate-417"><a href="#SkeletonBase.animate-417"><span class="linenos">417</span></a><span class="sd">            The zoom setting for the view.</span>
</span><span id="SkeletonBase.animate-418"><a href="#SkeletonBase.animate-418"><span class="linenos">418</span></a>
</span><span id="SkeletonBase.animate-419"><a href="#SkeletonBase.animate-419"><span class="linenos">419</span></a><span class="sd">        initialRotation : (theta, phi)</span>
</span><span id="SkeletonBase.animate-420"><a href="#SkeletonBase.animate-420"><span class="linenos">420</span></a><span class="sd">            Initial rotation angles. This is based off of</span>
</span><span id="SkeletonBase.animate-421"><a href="#SkeletonBase.animate-421"><span class="linenos">421</span></a><span class="sd">            `open3d.visualization.ViewControl.rotate` method, which</span>
</span><span id="SkeletonBase.animate-422"><a href="#SkeletonBase.animate-422"><span class="linenos">422</span></a><span class="sd">            takes the rotation values in pixels your cursor has</span>
</span><span id="SkeletonBase.animate-423"><a href="#SkeletonBase.animate-423"><span class="linenos">423</span></a><span class="sd">            moved across the screen... not ideal.</span>
</span><span id="SkeletonBase.animate-424"><a href="#SkeletonBase.animate-424"><span class="linenos">424</span></a>
</span><span id="SkeletonBase.animate-425"><a href="#SkeletonBase.animate-425"><span class="linenos">425</span></a><span class="sd">            Roughly 520 pixels gives you a 90 degree rotation.</span>
</span><span id="SkeletonBase.animate-426"><a href="#SkeletonBase.animate-426"><span class="linenos">426</span></a>
</span><span id="SkeletonBase.animate-427"><a href="#SkeletonBase.animate-427"><span class="linenos">427</span></a><span class="sd">        backgroundColor : [float, float, float]</span>
</span><span id="SkeletonBase.animate-428"><a href="#SkeletonBase.animate-428"><span class="linenos">428</span></a><span class="sd">            The background color for the animation.</span>
</span><span id="SkeletonBase.animate-429"><a href="#SkeletonBase.animate-429"><span class="linenos">429</span></a>
</span><span id="SkeletonBase.animate-430"><a href="#SkeletonBase.animate-430"><span class="linenos">430</span></a><span class="sd">        crop : bool, optional</span>
</span><span id="SkeletonBase.animate-431"><a href="#SkeletonBase.animate-431"><span class="linenos">431</span></a><span class="sd">            Whether to crop the animation to a minimal window size (plus</span>
</span><span id="SkeletonBase.animate-432"><a href="#SkeletonBase.animate-432"><span class="linenos">432</span></a><span class="sd">            padding) that only includes pixels that actually change</span>
</span><span id="SkeletonBase.animate-433"><a href="#SkeletonBase.animate-433"><span class="linenos">433</span></a><span class="sd">            during the animation.</span>
</span><span id="SkeletonBase.animate-434"><a href="#SkeletonBase.animate-434"><span class="linenos">434</span></a>
</span><span id="SkeletonBase.animate-435"><a href="#SkeletonBase.animate-435"><span class="linenos">435</span></a><span class="sd">        cropPadding : int</span>
</span><span id="SkeletonBase.animate-436"><a href="#SkeletonBase.animate-436"><span class="linenos">436</span></a><span class="sd">            The amount of padding to add around the animation if</span>
</span><span id="SkeletonBase.animate-437"><a href="#SkeletonBase.animate-437"><span class="linenos">437</span></a><span class="sd">            `crop=True`.</span>
</span><span id="SkeletonBase.animate-438"><a href="#SkeletonBase.animate-438"><span class="linenos">438</span></a>
</span><span id="SkeletonBase.animate-439"><a href="#SkeletonBase.animate-439"><span class="linenos">439</span></a><span class="sd">        outputFormat : &#39;gif&#39; or &#39;mp4&#39;</span>
</span><span id="SkeletonBase.animate-440"><a href="#SkeletonBase.animate-440"><span class="linenos">440</span></a><span class="sd">            The output format for the animation. Overridden if an extension is</span>
</span><span id="SkeletonBase.animate-441"><a href="#SkeletonBase.animate-441"><span class="linenos">441</span></a><span class="sd">            directly included in the file name (`outputFile`).</span>
</span><span id="SkeletonBase.animate-442"><a href="#SkeletonBase.animate-442"><span class="linenos">442</span></a><span class="sd">            </span>
</span><span id="SkeletonBase.animate-443"><a href="#SkeletonBase.animate-443"><span class="linenos">443</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="SkeletonBase.animate-444"><a href="#SkeletonBase.animate-444"><span class="linenos">444</span></a>
</span><span id="SkeletonBase.animate-445"><a href="#SkeletonBase.animate-445"><span class="linenos">445</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dim</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="SkeletonBase.animate-446"><a href="#SkeletonBase.animate-446"><span class="linenos">446</span></a>            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s1">&#39;Animation not supported for 2D point clouds&#39;</span><span class="p">)</span>
</span><span id="SkeletonBase.animate-447"><a href="#SkeletonBase.animate-447"><span class="linenos">447</span></a>
</span><span id="SkeletonBase.animate-448"><a href="#SkeletonBase.animate-448"><span class="linenos">448</span></a>        <span class="c1"># Import these here since they arent needed in the rest of this</span>
</span><span id="SkeletonBase.animate-449"><a href="#SkeletonBase.animate-449"><span class="linenos">449</span></a>        <span class="c1"># file and this is sortof a debug method</span>
</span><span id="SkeletonBase.animate-450"><a href="#SkeletonBase.animate-450"><span class="linenos">450</span></a>        <span class="kn">import</span> <span class="nn">cv2</span>
</span><span id="SkeletonBase.animate-451"><a href="#SkeletonBase.animate-451"><span class="linenos">451</span></a>        <span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
</span><span id="SkeletonBase.animate-452"><a href="#SkeletonBase.animate-452"><span class="linenos">452</span></a>
</span><span id="SkeletonBase.animate-453"><a href="#SkeletonBase.animate-453"><span class="linenos">453</span></a>        <span class="c1">#############################################</span>
</span><span id="SkeletonBase.animate-454"><a href="#SkeletonBase.animate-454"><span class="linenos">454</span></a>        <span class="c1"># Create our geometries</span>
</span><span id="SkeletonBase.animate-455"><a href="#SkeletonBase.animate-455"><span class="linenos">455</span></a>        <span class="c1">#############################################</span>
</span><span id="SkeletonBase.animate-456"><a href="#SkeletonBase.animate-456"><span class="linenos">456</span></a>        <span class="n">geometry</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="SkeletonBase.animate-457"><a href="#SkeletonBase.animate-457"><span class="linenos">457</span></a>
</span><span id="SkeletonBase.animate-458"><a href="#SkeletonBase.animate-458"><span class="linenos">458</span></a>        <span class="k">if</span> <span class="n">plotSkeleton</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">skeletonPoints</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="SkeletonBase.animate-459"><a href="#SkeletonBase.animate-459"><span class="linenos">459</span></a>            <span class="n">skelPointCloud</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">()</span>
</span><span id="SkeletonBase.animate-460"><a href="#SkeletonBase.animate-460"><span class="linenos">460</span></a>            <span class="n">skelPointCloud</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">utility</span><span class="o">.</span><span class="n">Vector3dVector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">skeletonPoints</span><span class="p">)</span>
</span><span id="SkeletonBase.animate-461"><a href="#SkeletonBase.animate-461"><span class="linenos">461</span></a>            <span class="n">skelPointCloud</span><span class="o">.</span><span class="n">paint_uniform_color</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">31</span><span class="p">,</span> <span class="mi">119</span><span class="p">,</span> <span class="mi">180</span><span class="p">])</span><span class="o">/</span><span class="mf">255.</span><span class="p">)</span> <span class="c1"># Tab:blue color</span>
</span><span id="SkeletonBase.animate-462"><a href="#SkeletonBase.animate-462"><span class="linenos">462</span></a>            <span class="n">geometry</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">skelPointCloud</span><span class="p">)</span>
</span><span id="SkeletonBase.animate-463"><a href="#SkeletonBase.animate-463"><span class="linenos">463</span></a>
</span><span id="SkeletonBase.animate-464"><a href="#SkeletonBase.animate-464"><span class="linenos">464</span></a>            <span class="c1"># TODO: Allow support for weighted edges (maybe use color?)</span>
</span><span id="SkeletonBase.animate-465"><a href="#SkeletonBase.animate-465"><span class="linenos">465</span></a>            <span class="n">skelEdges</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">LineSet</span><span class="p">()</span>
</span><span id="SkeletonBase.animate-466"><a href="#SkeletonBase.animate-466"><span class="linenos">466</span></a>            <span class="n">skelEdges</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">utility</span><span class="o">.</span><span class="n">Vector3dVector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">skeletonPoints</span><span class="p">)</span>
</span><span id="SkeletonBase.animate-467"><a href="#SkeletonBase.animate-467"><span class="linenos">467</span></a>
</span><span id="SkeletonBase.animate-468"><a href="#SkeletonBase.animate-468"><span class="linenos">468</span></a>            <span class="c1"># Find all indices in the adjacency matrix that are greater than 0</span>
</span><span id="SkeletonBase.animate-469"><a href="#SkeletonBase.animate-469"><span class="linenos">469</span></a>            <span class="c1"># Code for numpy</span>
</span><span id="SkeletonBase.animate-470"><a href="#SkeletonBase.animate-470"><span class="linenos">470</span></a>            <span class="n">pairConnections</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">skeletonAdjMat</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
</span><span id="SkeletonBase.animate-471"><a href="#SkeletonBase.animate-471"><span class="linenos">471</span></a>            <span class="c1"># Code for sparse</span>
</span><span id="SkeletonBase.animate-472"><a href="#SkeletonBase.animate-472"><span class="linenos">472</span></a>            <span class="c1">#pairConnections = self.skeletonAdjMat.coords.T</span>
</span><span id="SkeletonBase.animate-473"><a href="#SkeletonBase.animate-473"><span class="linenos">473</span></a>            <span class="c1"># Sort them, so that we can remove duplicates</span>
</span><span id="SkeletonBase.animate-474"><a href="#SkeletonBase.animate-474"><span class="linenos">474</span></a>            <span class="n">pairConnections</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">pairConnections</span><span class="p">]</span>
</span><span id="SkeletonBase.animate-475"><a href="#SkeletonBase.animate-475"><span class="linenos">475</span></a>            <span class="c1"># And remove duplicates</span>
</span><span id="SkeletonBase.animate-476"><a href="#SkeletonBase.animate-476"><span class="linenos">476</span></a>            <span class="n">pairConnections</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">pairConnections</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span><span id="SkeletonBase.animate-477"><a href="#SkeletonBase.animate-477"><span class="linenos">477</span></a>
</span><span id="SkeletonBase.animate-478"><a href="#SkeletonBase.animate-478"><span class="linenos">478</span></a>            <span class="n">skelEdges</span><span class="o">.</span><span class="n">lines</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">utility</span><span class="o">.</span><span class="n">Vector2iVector</span><span class="p">(</span><span class="n">pairConnections</span><span class="p">)</span>
</span><span id="SkeletonBase.animate-479"><a href="#SkeletonBase.animate-479"><span class="linenos">479</span></a>
</span><span id="SkeletonBase.animate-480"><a href="#SkeletonBase.animate-480"><span class="linenos">480</span></a>            <span class="n">geometry</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">skelEdges</span><span class="p">)</span>
</span><span id="SkeletonBase.animate-481"><a href="#SkeletonBase.animate-481"><span class="linenos">481</span></a>
</span><span id="SkeletonBase.animate-482"><a href="#SkeletonBase.animate-482"><span class="linenos">482</span></a>        <span class="k">if</span> <span class="n">plotPoints</span><span class="p">:</span>
</span><span id="SkeletonBase.animate-483"><a href="#SkeletonBase.animate-483"><span class="linenos">483</span></a>            <span class="n">pointCloud</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">PointCloud</span><span class="p">()</span>
</span><span id="SkeletonBase.animate-484"><a href="#SkeletonBase.animate-484"><span class="linenos">484</span></a>            <span class="n">pointCloud</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="n">o3d</span><span class="o">.</span><span class="n">utility</span><span class="o">.</span><span class="n">Vector3dVector</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="p">)</span>
</span><span id="SkeletonBase.animate-485"><a href="#SkeletonBase.animate-485"><span class="linenos">485</span></a>            <span class="n">pointCloud</span><span class="o">.</span><span class="n">paint_uniform_color</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">148</span><span class="p">,</span> <span class="mi">103</span><span class="p">,</span> <span class="mi">189</span><span class="p">])</span><span class="o">/</span><span class="mf">255.</span><span class="p">)</span> <span class="c1"># Tab:purple color</span>
</span><span id="SkeletonBase.animate-486"><a href="#SkeletonBase.animate-486"><span class="linenos">486</span></a>            <span class="n">geometry</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pointCloud</span><span class="p">)</span>
</span><span id="SkeletonBase.animate-487"><a href="#SkeletonBase.animate-487"><span class="linenos">487</span></a>
</span><span id="SkeletonBase.animate-488"><a href="#SkeletonBase.animate-488"><span class="linenos">488</span></a>        <span class="c1"># If any of the implementations of this base class want to</span>
</span><span id="SkeletonBase.animate-489"><a href="#SkeletonBase.animate-489"><span class="linenos">489</span></a>        <span class="c1"># add extra elements to plot, we have support for that.</span>
</span><span id="SkeletonBase.animate-490"><a href="#SkeletonBase.animate-490"><span class="linenos">490</span></a>        <span class="c1"># For example, if an octree algorithm wants to plot the</span>
</span><span id="SkeletonBase.animate-491"><a href="#SkeletonBase.animate-491"><span class="linenos">491</span></a>        <span class="c1"># boxes into which points are divided</span>
</span><span id="SkeletonBase.animate-492"><a href="#SkeletonBase.animate-492"><span class="linenos">492</span></a>        <span class="n">geometry</span> <span class="o">=</span> <span class="n">geometry</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_o3d_extra_plot_geometries</span><span class="p">(</span><span class="n">plotPoints</span><span class="p">,</span> <span class="n">plotSkeleton</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="SkeletonBase.animate-493"><a href="#SkeletonBase.animate-493"><span class="linenos">493</span></a>
</span><span id="SkeletonBase.animate-494"><a href="#SkeletonBase.animate-494"><span class="linenos">494</span></a>        <span class="c1"># Correct for rotation</span>
</span><span id="SkeletonBase.animate-495"><a href="#SkeletonBase.animate-495"><span class="linenos">495</span></a>        <span class="c1"># TODO: Find a better way to do this (can I rotate the view?)</span>
</span><span id="SkeletonBase.animate-496"><a href="#SkeletonBase.animate-496"><span class="linenos">496</span></a>        <span class="c1">#for i in range(len(geometry)):</span>
</span><span id="SkeletonBase.animate-497"><a href="#SkeletonBase.animate-497"><span class="linenos">497</span></a>        <span class="c1">#    geometry[i].points = o3d.utility.Vector3dVector(np.asarray(geometry[i].points)[[0,2,1]])</span>
</span><span id="SkeletonBase.animate-498"><a href="#SkeletonBase.animate-498"><span class="linenos">498</span></a>
</span><span id="SkeletonBase.animate-499"><a href="#SkeletonBase.animate-499"><span class="linenos">499</span></a>        <span class="c1">#############################################</span>
</span><span id="SkeletonBase.animate-500"><a href="#SkeletonBase.animate-500"><span class="linenos">500</span></a>        <span class="c1"># Setup the animation</span>
</span><span id="SkeletonBase.animate-501"><a href="#SkeletonBase.animate-501"><span class="linenos">501</span></a>        <span class="c1">#############################################</span>
</span><span id="SkeletonBase.animate-502"><a href="#SkeletonBase.animate-502"><span class="linenos">502</span></a>        <span class="n">ALLOWED_FORMATS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;gif&#39;</span><span class="p">,</span> <span class="s1">&#39;mp4&#39;</span><span class="p">]</span>
</span><span id="SkeletonBase.animate-503"><a href="#SkeletonBase.animate-503"><span class="linenos">503</span></a>
</span><span id="SkeletonBase.animate-504"><a href="#SkeletonBase.animate-504"><span class="linenos">504</span></a>        <span class="k">if</span> <span class="n">outputFile</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SkeletonBase.animate-505"><a href="#SkeletonBase.animate-505"><span class="linenos">505</span></a>            <span class="c1"># Try to infer the output format from the file name</span>
</span><span id="SkeletonBase.animate-506"><a href="#SkeletonBase.animate-506"><span class="linenos">506</span></a>            <span class="n">potentialExtension</span> <span class="o">=</span> <span class="n">outputFile</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span><span id="SkeletonBase.animate-507"><a href="#SkeletonBase.animate-507"><span class="linenos">507</span></a>            <span class="k">if</span> <span class="n">potentialExtension</span> <span class="ow">in</span> <span class="n">ALLOWED_FORMATS</span><span class="p">:</span>
</span><span id="SkeletonBase.animate-508"><a href="#SkeletonBase.animate-508"><span class="linenos">508</span></a>                <span class="n">outputFormat</span> <span class="o">=</span> <span class="n">potentialExtension</span>
</span><span id="SkeletonBase.animate-509"><a href="#SkeletonBase.animate-509"><span class="linenos">509</span></a>                <span class="n">fullOutputPath</span> <span class="o">=</span> <span class="n">outputFile</span>
</span><span id="SkeletonBase.animate-510"><a href="#SkeletonBase.animate-510"><span class="linenos">510</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="SkeletonBase.animate-511"><a href="#SkeletonBase.animate-511"><span class="linenos">511</span></a>                <span class="c1"># Otherwise, we have to append whatever the provided extension is</span>
</span><span id="SkeletonBase.animate-512"><a href="#SkeletonBase.animate-512"><span class="linenos">512</span></a>                <span class="n">outputFormat</span> <span class="o">=</span> <span class="n">outputFormat</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span><span id="SkeletonBase.animate-513"><a href="#SkeletonBase.animate-513"><span class="linenos">513</span></a>
</span><span id="SkeletonBase.animate-514"><a href="#SkeletonBase.animate-514"><span class="linenos">514</span></a>                <span class="c1"># But first make sure the provided format is allowed</span>
</span><span id="SkeletonBase.animate-515"><a href="#SkeletonBase.animate-515"><span class="linenos">515</span></a>                <span class="k">if</span> <span class="n">outputFormat</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ALLOWED_FORMATS</span><span class="p">:</span>
</span><span id="SkeletonBase.animate-516"><a href="#SkeletonBase.animate-516"><span class="linenos">516</span></a>                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Invalid output format specified: </span><span class="si">{</span><span class="n">outputFormat</span><span class="si">}</span><span class="s1">; available options are </span><span class="si">{</span><span class="n">ALLOWED_FORMATS</span><span class="si">}</span><span class="s1">.&#39;</span><span class="p">)</span>
</span><span id="SkeletonBase.animate-517"><a href="#SkeletonBase.animate-517"><span class="linenos">517</span></a>
</span><span id="SkeletonBase.animate-518"><a href="#SkeletonBase.animate-518"><span class="linenos">518</span></a>                <span class="n">fullOutputPath</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">outputFile</span><span class="si">}</span><span class="s1">.</span><span class="si">{</span><span class="n">outputFormat</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="SkeletonBase.animate-519"><a href="#SkeletonBase.animate-519"><span class="linenos">519</span></a>
</span><span id="SkeletonBase.animate-520"><a href="#SkeletonBase.animate-520"><span class="linenos">520</span></a>        <span class="n">images</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="SkeletonBase.animate-521"><a href="#SkeletonBase.animate-521"><span class="linenos">521</span></a>        <span class="k">global</span> <span class="n">initialRotationApplied</span>
</span><span id="SkeletonBase.animate-522"><a href="#SkeletonBase.animate-522"><span class="linenos">522</span></a>        <span class="n">initialRotationApplied</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="SkeletonBase.animate-523"><a href="#SkeletonBase.animate-523"><span class="linenos">523</span></a>
</span><span id="SkeletonBase.animate-524"><a href="#SkeletonBase.animate-524"><span class="linenos">524</span></a>        <span class="k">def</span> <span class="nf">update_view</span><span class="p">(</span><span class="n">vis</span><span class="p">):</span>
</span><span id="SkeletonBase.animate-525"><a href="#SkeletonBase.animate-525"><span class="linenos">525</span></a>            <span class="k">global</span> <span class="n">initialRotationApplied</span>
</span><span id="SkeletonBase.animate-526"><a href="#SkeletonBase.animate-526"><span class="linenos">526</span></a>
</span><span id="SkeletonBase.animate-527"><a href="#SkeletonBase.animate-527"><span class="linenos">527</span></a>            <span class="n">opt</span> <span class="o">=</span> <span class="n">vis</span><span class="o">.</span><span class="n">get_render_option</span><span class="p">()</span>
</span><span id="SkeletonBase.animate-528"><a href="#SkeletonBase.animate-528"><span class="linenos">528</span></a>            <span class="n">opt</span><span class="o">.</span><span class="n">background_color</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">backgroundColor</span><span class="p">)</span>
</span><span id="SkeletonBase.animate-529"><a href="#SkeletonBase.animate-529"><span class="linenos">529</span></a>
</span><span id="SkeletonBase.animate-530"><a href="#SkeletonBase.animate-530"><span class="linenos">530</span></a>            <span class="n">vis</span><span class="o">.</span><span class="n">get_render_option</span><span class="p">()</span><span class="o">.</span><span class="n">point_size</span> <span class="o">=</span> <span class="n">pointSize</span>
</span><span id="SkeletonBase.animate-531"><a href="#SkeletonBase.animate-531"><span class="linenos">531</span></a>            <span class="n">vis</span><span class="o">.</span><span class="n">get_render_option</span><span class="p">()</span><span class="o">.</span><span class="n">line_width</span> <span class="o">=</span> <span class="n">lineWidth</span>
</span><span id="SkeletonBase.animate-532"><a href="#SkeletonBase.animate-532"><span class="linenos">532</span></a>
</span><span id="SkeletonBase.animate-533"><a href="#SkeletonBase.animate-533"><span class="linenos">533</span></a>            <span class="n">ctr</span> <span class="o">=</span> <span class="n">vis</span><span class="o">.</span><span class="n">get_view_control</span><span class="p">()</span>
</span><span id="SkeletonBase.animate-534"><a href="#SkeletonBase.animate-534"><span class="linenos">534</span></a>
</span><span id="SkeletonBase.animate-535"><a href="#SkeletonBase.animate-535"><span class="linenos">535</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">initialRotationApplied</span><span class="p">:</span>
</span><span id="SkeletonBase.animate-536"><a href="#SkeletonBase.animate-536"><span class="linenos">536</span></a>                <span class="n">ctr</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="o">*</span><span class="n">initialRotation</span><span class="p">)</span>
</span><span id="SkeletonBase.animate-537"><a href="#SkeletonBase.animate-537"><span class="linenos">537</span></a>                <span class="n">initialRotationApplied</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="SkeletonBase.animate-538"><a href="#SkeletonBase.animate-538"><span class="linenos">538</span></a>
</span><span id="SkeletonBase.animate-539"><a href="#SkeletonBase.animate-539"><span class="linenos">539</span></a>            <span class="n">ctr</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">rotationSpeed</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span><span id="SkeletonBase.animate-540"><a href="#SkeletonBase.animate-540"><span class="linenos">540</span></a>            <span class="n">ctr</span><span class="o">.</span><span class="n">set_zoom</span><span class="p">(</span><span class="n">zoom</span><span class="p">)</span>
</span><span id="SkeletonBase.animate-541"><a href="#SkeletonBase.animate-541"><span class="linenos">541</span></a>
</span><span id="SkeletonBase.animate-542"><a href="#SkeletonBase.animate-542"><span class="linenos">542</span></a>            <span class="k">if</span> <span class="n">outputFile</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="p">(</span><span class="n">maxFrames</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">images</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">maxFrames</span><span class="p">):</span>
</span><span id="SkeletonBase.animate-543"><a href="#SkeletonBase.animate-543"><span class="linenos">543</span></a>                <span class="n">image</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">vis</span><span class="o">.</span><span class="n">capture_screen_float_buffer</span><span class="p">(</span><span class="kc">False</span><span class="p">))</span><span class="o">*</span><span class="mi">255</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
</span><span id="SkeletonBase.animate-544"><a href="#SkeletonBase.animate-544"><span class="linenos">544</span></a>                <span class="n">images</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">image</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">))</span>
</span><span id="SkeletonBase.animate-545"><a href="#SkeletonBase.animate-545"><span class="linenos">545</span></a>            
</span><span id="SkeletonBase.animate-546"><a href="#SkeletonBase.animate-546"><span class="linenos">546</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="SkeletonBase.animate-547"><a href="#SkeletonBase.animate-547"><span class="linenos">547</span></a>
</span><span id="SkeletonBase.animate-548"><a href="#SkeletonBase.animate-548"><span class="linenos">548</span></a>        <span class="n">o3d</span><span class="o">.</span><span class="n">visualization</span><span class="o">.</span><span class="n">draw_geometries_with_animation_callback</span><span class="p">(</span><span class="n">geometry</span><span class="p">,</span>
</span><span id="SkeletonBase.animate-549"><a href="#SkeletonBase.animate-549"><span class="linenos">549</span></a>                                                                  <span class="n">update_view</span><span class="p">)</span>
</span><span id="SkeletonBase.animate-550"><a href="#SkeletonBase.animate-550"><span class="linenos">550</span></a>
</span><span id="SkeletonBase.animate-551"><a href="#SkeletonBase.animate-551"><span class="linenos">551</span></a>        <span class="k">if</span> <span class="n">outputFile</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="SkeletonBase.animate-552"><a href="#SkeletonBase.animate-552"><span class="linenos">552</span></a>            <span class="k">return</span>
</span><span id="SkeletonBase.animate-553"><a href="#SkeletonBase.animate-553"><span class="linenos">553</span></a>
</span><span id="SkeletonBase.animate-554"><a href="#SkeletonBase.animate-554"><span class="linenos">554</span></a>
</span><span id="SkeletonBase.animate-555"><a href="#SkeletonBase.animate-555"><span class="linenos">555</span></a>        <span class="k">if</span> <span class="n">crop</span><span class="p">:</span>
</span><span id="SkeletonBase.animate-556"><a href="#SkeletonBase.animate-556"><span class="linenos">556</span></a>            <span class="c1"># If we want to crop, we should see if there are any pixels that only</span>
</span><span id="SkeletonBase.animate-557"><a href="#SkeletonBase.animate-557"><span class="linenos">557</span></a>            <span class="c1"># ever take on the value of the background color</span>
</span><span id="SkeletonBase.animate-558"><a href="#SkeletonBase.animate-558"><span class="linenos">558</span></a>            <span class="n">usedPixels</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">images</span><span class="p">)</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">backgroundColor</span><span class="p">)</span><span class="o">*</span><span class="mi">255</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</span><span id="SkeletonBase.animate-559"><a href="#SkeletonBase.animate-559"><span class="linenos">559</span></a>            <span class="n">usedPixels</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">usedPixels</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="n">axis</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
</span><span id="SkeletonBase.animate-560"><a href="#SkeletonBase.animate-560"><span class="linenos">560</span></a>
</span><span id="SkeletonBase.animate-561"><a href="#SkeletonBase.animate-561"><span class="linenos">561</span></a>            <span class="n">usedIndices</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">usedPixels</span> <span class="o">&gt;</span> <span class="mf">1e-8</span><span class="p">))</span>
</span><span id="SkeletonBase.animate-562"><a href="#SkeletonBase.animate-562"><span class="linenos">562</span></a>            <span class="n">cropBounds</span> <span class="o">=</span> <span class="p">[</span><span class="nb">max</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">usedIndices</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">-</span><span class="n">cropPadding</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
</span><span id="SkeletonBase.animate-563"><a href="#SkeletonBase.animate-563"><span class="linenos">563</span></a>                          <span class="nb">min</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">usedIndices</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="n">cropPadding</span><span class="p">,</span> <span class="n">images</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
</span><span id="SkeletonBase.animate-564"><a href="#SkeletonBase.animate-564"><span class="linenos">564</span></a>                          <span class="nb">max</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">usedIndices</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">-</span><span class="n">cropPadding</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
</span><span id="SkeletonBase.animate-565"><a href="#SkeletonBase.animate-565"><span class="linenos">565</span></a>                          <span class="nb">min</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">usedIndices</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">+</span><span class="n">cropPadding</span><span class="p">,</span> <span class="n">images</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])]</span>
</span><span id="SkeletonBase.animate-566"><a href="#SkeletonBase.animate-566"><span class="linenos">566</span></a>
</span><span id="SkeletonBase.animate-567"><a href="#SkeletonBase.animate-567"><span class="linenos">567</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="SkeletonBase.animate-568"><a href="#SkeletonBase.animate-568"><span class="linenos">568</span></a>            <span class="n">cropBounds</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">images</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="n">images</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
</span><span id="SkeletonBase.animate-569"><a href="#SkeletonBase.animate-569"><span class="linenos">569</span></a>
</span><span id="SkeletonBase.animate-570"><a href="#SkeletonBase.animate-570"><span class="linenos">570</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">images</span><span class="p">)):</span>
</span><span id="SkeletonBase.animate-571"><a href="#SkeletonBase.animate-571"><span class="linenos">571</span></a>            <span class="n">images</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">images</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">cropBounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span><span class="n">cropBounds</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">cropBounds</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span><span class="n">cropBounds</span><span class="p">[</span><span class="mi">3</span><span class="p">]]</span>
</span><span id="SkeletonBase.animate-572"><a href="#SkeletonBase.animate-572"><span class="linenos">572</span></a>
</span><span id="SkeletonBase.animate-573"><a href="#SkeletonBase.animate-573"><span class="linenos">573</span></a>        <span class="k">if</span> <span class="n">outputFormat</span> <span class="o">==</span> <span class="s1">&#39;mp4&#39;</span><span class="p">:</span>
</span><span id="SkeletonBase.animate-574"><a href="#SkeletonBase.animate-574"><span class="linenos">574</span></a>            <span class="n">fourcc</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">VideoWriter_fourcc</span><span class="p">(</span><span class="o">*</span><span class="s1">&#39;mp4v&#39;</span><span class="p">)</span>
</span><span id="SkeletonBase.animate-575"><a href="#SkeletonBase.animate-575"><span class="linenos">575</span></a>            <span class="n">video</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">VideoWriter</span><span class="p">(</span><span class="n">fullOutputPath</span><span class="p">,</span> <span class="n">fourcc</span><span class="p">,</span> <span class="n">fps</span><span class="p">,</span> <span class="p">(</span><span class="n">images</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">images</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
</span><span id="SkeletonBase.animate-576"><a href="#SkeletonBase.animate-576"><span class="linenos">576</span></a>
</span><span id="SkeletonBase.animate-577"><a href="#SkeletonBase.animate-577"><span class="linenos">577</span></a>            <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">images</span><span class="p">:</span>
</span><span id="SkeletonBase.animate-578"><a href="#SkeletonBase.animate-578"><span class="linenos">578</span></a>                <span class="n">video</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_RGB2BGR</span><span class="p">))</span>
</span><span id="SkeletonBase.animate-579"><a href="#SkeletonBase.animate-579"><span class="linenos">579</span></a>
</span><span id="SkeletonBase.animate-580"><a href="#SkeletonBase.animate-580"><span class="linenos">580</span></a>            <span class="n">video</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
</span><span id="SkeletonBase.animate-581"><a href="#SkeletonBase.animate-581"><span class="linenos">581</span></a>
</span><span id="SkeletonBase.animate-582"><a href="#SkeletonBase.animate-582"><span class="linenos">582</span></a>        <span class="k">if</span> <span class="n">outputFormat</span> <span class="o">==</span> <span class="s1">&#39;gif&#39;</span><span class="p">:</span>
</span><span id="SkeletonBase.animate-583"><a href="#SkeletonBase.animate-583"><span class="linenos">583</span></a>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">images</span><span class="p">)):</span>
</span><span id="SkeletonBase.animate-584"><a href="#SkeletonBase.animate-584"><span class="linenos">584</span></a>                <span class="n">images</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">fromarray</span><span class="p">(</span><span class="n">images</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</span><span id="SkeletonBase.animate-585"><a href="#SkeletonBase.animate-585"><span class="linenos">585</span></a>
</span><span id="SkeletonBase.animate-586"><a href="#SkeletonBase.animate-586"><span class="linenos">586</span></a>            <span class="n">images</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">fullOutputPath</span><span class="p">,</span> <span class="n">save_all</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">append_images</span><span class="o">=</span><span class="n">images</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">loop</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">fps</span><span class="o">*</span><span class="mf">1e3</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Create an animation of the point cloud and/or skeleton rotating.</p>

<p>Uses Open3D as the graphical framework.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><p><strong>outputFile</strong> (str, optional):
The name of the animation file that will be saved. If it includes
an (acceptable) extension, the output type will be automatically
chosen; otherwise, the output format will be set by the
kwarg <code>outputFormat</code>.</p>

<p>If <code>None</code>, no file will be saved, the animation will just be
played.</p></li>
<li><strong>plotPoints</strong> (bool):
Whether to plot the point cloud.</li>
<li><strong>plotSkeleton</strong> (bool):
Whether to plot the derived skeleton nodes and edges.</li>
<li><strong>rotationSpeed</strong> (int):
The speed of the rotation during the animation.</li>
<li><p><strong>maxFrames</strong> (int, optional):
The total number of frames to save; if <code>None</code>, no limit will
be applied.</p>

<p>Note that I can't figure out how to exit a window automatically,
so the window itself will continue existing until the user manually
presses 'q', but no more than <code>maxFrames</code> will actually be saved.</p></li>
<li><strong>fps</strong> (int):
The frames per second of the output animation.</li>
<li><strong>pointSize</strong> (float):
The size of points for point clouds.</li>
<li><strong>lineWidth</strong> (float):
The width of lines for line sets (WIP).</li>
<li><strong>zoom</strong> (float):
The zoom setting for the view.</li>
<li><p><strong>initialRotation</strong> ((theta, phi)):
Initial rotation angles. This is based off of
<code>open3d.visualization.ViewControl.rotate</code> method, which
takes the rotation values in pixels your cursor has
moved across the screen... not ideal.</p>

<p>Roughly 520 pixels gives you a 90 degree rotation.</p></li>
<li><strong>backgroundColor</strong> ([float, float, float]):
The background color for the animation.</li>
<li><strong>crop</strong> (bool, optional):
Whether to crop the animation to a minimal window size (plus
padding) that only includes pixels that actually change
during the animation.</li>
<li><strong>cropPadding</strong> (int):
The amount of padding to add around the animation if
<code>crop=True</code>.</li>
<li><strong>outputFormat</strong> ('gif' or 'mp4'):
The output format for the animation. Overridden if an extension is
directly included in the file name (<code>outputFile</code>).</li>
</ul>
</div>


                            </div>
                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>